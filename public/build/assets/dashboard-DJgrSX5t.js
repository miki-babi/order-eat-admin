import{c as de,u as me,r as Y,j as s,b as xe,H as pe}from"./app-B2cIwGfD.js";import{b as ie,B as ae}from"./createLucideIcon-BFAgR0NR.js";import{d,C as m,a as Z,b as ee}from"./card-C_AC009X.js";import{I as le}from"./input-CPcJ3zml.js";import{S as re,A as he}from"./app-layout-D_Km3gyO.js";import{L as ce}from"./lock-CH3BV6oE.js";import{E as be}from"./external-link-BGjHshbe.js";import{S as ge}from"./smartphone-DkMhyko_.js";import{C as fe}from"./clock-3-DMCP7UXg.js";/* empty css            */import"./index-CEmBGWsJ.js";import"./index-DtyZ9mrl.js";import"./index-C8o9R0tm.js";import"./map-pin-dUWEhuBa.js";import"./store-BNPA_be_.js";const je=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ne=ie("Activity",je);const ue=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],ke=ie("LockOpen",ue),ye=[{title:"System Admin",href:"/__system-admin/dashboard"}];function Pe(r){const e=de.c(65),{featureGroups:V,summary:l,activity:x,logLines:L}=r,{flash:i}=me().props,[C,se]=Y.useState(null);let A;e[0]===Symbol.for("react.memo_cache_sentinel")?(A={},e[0]=A):A=e[0];const[q,ne]=Y.useState(A);let $;e[1]===Symbol.for("react.memo_cache_sentinel")?($={},e[1]=$):$=e[1];const[J,oe]=Y.useState($);let H;e[2]!==q?(H=a=>q[a.id]??a.lock_message??"",e[2]=q,e[3]=H):H=e[3];const n=H;let E;e[4]!==J?(E=a=>J[a.id]??a.help_url??"",e[4]=J,e[5]=E):E=e[5];const c=E;let M;e[6]!==c||e[7]!==n?(M=(a,o)=>{se(a.id),xe.put(`/__system-admin/features/${a.id}`,{is_enabled:o,lock_message:n(a),help_url:c(a)},{preserveScroll:!0,onFinish:()=>{se(t=>t===a.id?null:t)}})},e[6]=c,e[7]=n,e[8]=M):M=e[8];const p=M;let U;e[9]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(pe,{title:"System Admin Dashboard"}),e[9]=U):U=e[9];let D;e[10]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white px-6 py-5 shadow-sm",children:[s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.22em] text-zinc-500",children:"Hidden Control Plane"}),s.jsx("h1",{className:"mt-2 text-2xl font-black tracking-tight text-[#212121]",children:"System Admin Dashboard"}),s.jsx("p",{className:"mt-2 text-sm text-zinc-600",children:"Lock or unlock granular features by group, inspect recent runtime activity, and review logs."})]}),e[10]=D):D=e[10];let h;e[11]!==i?(h=(i?.success||i?.error)&&s.jsxs("div",{className:"space-y-2",children:[i?.success&&s.jsx("div",{className:"rounded-xl border border-emerald-100 bg-emerald-50 px-4 py-3 text-sm font-bold text-emerald-700",children:i.success}),i?.error&&s.jsx("div",{className:"rounded-xl border border-red-100 bg-red-50 px-4 py-3 text-sm font-bold text-red-700",children:i.error})]}),e[11]=i,e[12]=h):h=e[12];let I;e[13]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-500",children:"Orders 24h"}),e[13]=I):I=e[13];let b;e[14]!==l.orders_last_24h?(b=s.jsx(d,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(m,{className:"pt-6",children:[I,s.jsx("p",{className:"mt-1 text-2xl font-black text-[#212121]",children:l.orders_last_24h})]})}),e[14]=l.orders_last_24h,e[15]=b):b=e[15];let O;e[16]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-500",children:"Customers 24h"}),e[16]=O):O=e[16];let g;e[17]!==l.customers_last_24h?(g=s.jsx(d,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(m,{className:"pt-6",children:[O,s.jsx("p",{className:"mt-1 text-2xl font-black text-[#212121]",children:l.customers_last_24h})]})}),e[17]=l.customers_last_24h,e[18]=g):g=e[18];let P;e[19]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-500",children:"SMS 24h"}),e[19]=P):P=e[19];let f;e[20]!==l.sms_last_24h?(f=s.jsx(d,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(m,{className:"pt-6",children:[P,s.jsx("p",{className:"mt-1 text-2xl font-black text-[#212121]",children:l.sms_last_24h})]})}),e[20]=l.sms_last_24h,e[21]=f):f=e[21];let T;e[22]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-500",children:"Table Sessions 24h"}),e[22]=T):T=e[22];let j;e[23]!==l.table_sessions_last_24h?(j=s.jsx(d,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(m,{className:"pt-6",children:[T,s.jsx("p",{className:"mt-1 text-2xl font-black text-[#212121]",children:l.table_sessions_last_24h})]})}),e[23]=l.table_sessions_last_24h,e[24]=j):j=e[24];let N;e[25]!==b||e[26]!==g||e[27]!==f||e[28]!==j?(N=s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[b,g,f,j]}),e[25]=b,e[26]=g,e[27]=f,e[28]=j,e[29]=N):N=e[29];let B;e[30]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(Z,{className:"border-b border-zinc-100 bg-zinc-50/60",children:s.jsxs(ee,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[s.jsx(re,{className:"size-4 text-[#F57C00]"}),"Feature Locks"]})}),e[30]=B):B=e[30];let u;if(e[31]!==c||e[32]!==n||e[33]!==V||e[34]!==p||e[35]!==C){let a;e[37]!==c||e[38]!==n||e[39]!==p||e[40]!==C?(a=o=>s.jsxs("section",{className:"space-y-4 rounded-2xl border border-zinc-200 bg-white/80 p-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-500",children:"Major Feature"}),s.jsx("h3",{className:"mt-1 text-lg font-black text-[#212121]",children:o.name}),o.description&&s.jsx("p",{className:"mt-1 text-sm text-zinc-600",children:o.description})]}),s.jsx("div",{className:"space-y-3",children:o.features.map(t=>{const te=C===t.id,F=t.is_enabled;return s.jsxs("div",{className:`rounded-2xl border p-4 shadow-sm transition-all ${F?"border-emerald-100 bg-emerald-50/40":"border-amber-200 bg-amber-50/70"}`,children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] font-black uppercase tracking-widest text-zinc-500",children:t.feature_key}),s.jsx("h4",{className:"mt-1 text-base font-black text-[#212121]",children:t.name}),t.description&&s.jsx("p",{className:"mt-1 text-sm text-zinc-600",children:t.description})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ae,{type:"button",variant:"outline",className:"h-9 rounded-lg px-4 text-[10px] font-black uppercase tracking-widest",disabled:te,onClick:()=>p(t,!F),children:F?s.jsxs(s.Fragment,{children:[s.jsx(ce,{className:"mr-1 size-3.5"}),"Lock"]}):s.jsxs(s.Fragment,{children:[s.jsx(ke,{className:"mr-1 size-3.5"}),"Unlock"]})}),s.jsx(ae,{type:"button",className:"h-9 rounded-lg bg-[#212121] px-4 text-[10px] font-black uppercase tracking-widest text-white hover:bg-[#F57C00]",disabled:te,onClick:()=>p(t,F),children:"Save Settings"})]})]}),s.jsxs("div",{className:"mt-4 grid gap-3",children:[s.jsx(le,{value:n(t),onChange:K=>{const Q=K.target.value;ne(X=>({...X,[t.id]:Q}))},placeholder:"This feature is locked. Contact us to unlock.",className:"h-10 rounded-xl border-zinc-200"}),s.jsx(le,{value:c(t),onChange:K=>{const Q=K.target.value;oe(X=>({...X,[t.id]:Q}))},placeholder:"https://youtube.com/... (What does this feature do?)",className:"h-10 rounded-xl border-zinc-200"}),c(t).trim()!==""&&s.jsxs("a",{href:c(t),target:"_blank",rel:"noopener noreferrer",className:"inline-flex w-fit items-center gap-1 text-[10px] font-black uppercase tracking-widest text-[#F57C00] underline",children:['Preview "What does this feature do?" link',s.jsx(be,{className:"size-3"})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-zinc-500",children:F?s.jsxs(s.Fragment,{children:[s.jsx(re,{className:"size-3.5 text-emerald-600"}),"Enabled"]}):s.jsxs(s.Fragment,{children:[s.jsx(ce,{className:"size-3.5 text-amber-700"}),"Locked"]})}),s.jsxs("p",{className:"text-[10px] font-bold uppercase tracking-wider text-zinc-500",children:["Last changed: ",t.last_toggled_at??"Never",t.last_toggled_by?` by ${t.last_toggled_by.name}`:""]})]})]})]},t.id)})})]},o.key),e[37]=c,e[38]=n,e[39]=p,e[40]=C,e[41]=a):a=e[41],u=V.map(a),e[31]=c,e[32]=n,e[33]=V,e[34]=p,e[35]=C,e[36]=u}else u=e[36];let k;e[42]!==u?(k=s.jsxs(d,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[B,s.jsx(m,{className:"space-y-7 pt-6",children:u})]}),e[42]=u,e[43]=k):k=e[43];let R;e[44]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(Z,{className:"border-b border-zinc-100 bg-zinc-50/60",children:s.jsxs(ee,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[s.jsx(Ne,{className:"size-4 text-[#F57C00]"}),"App Activity"]})}),e[44]=R):R=e[44];let y;e[45]!==x.length?(y=x.length===0&&s.jsx("p",{className:"text-sm font-bold text-zinc-500",children:"No recent activity recorded."}),e[45]=x.length,e[46]=y):y=e[46];let _;e[47]!==x?(_=x.map(ze),e[47]=x,e[48]=_):_=e[48];let z;e[49]!==y||e[50]!==_?(z=s.jsxs(d,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[R,s.jsxs(m,{className:"max-h-[520px] space-y-3 overflow-y-auto pt-6",children:[y,_]})]}),e[49]=y,e[50]=_,e[51]=z):z=e[51];let W;e[52]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(Z,{className:"border-b border-zinc-100 bg-zinc-50/60",children:s.jsxs(ee,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[s.jsx(ge,{className:"size-4 text-[#F57C00]"}),"Application Logs"]})}),e[52]=W):W=e[52];let w;e[53]!==L?(w=L.length===0?s.jsx("p",{className:"text-zinc-400",children:"No log lines available."}):L.map(_e),e[53]=L,e[54]=w):w=e[54];let v;e[55]!==w?(v=s.jsxs(d,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[W,s.jsx(m,{className:"pt-6",children:s.jsx("div",{className:"max-h-[520px] overflow-auto rounded-xl border border-zinc-200 bg-[#151515] p-4 font-mono text-[11px] leading-relaxed text-zinc-100",children:w})})]}),e[55]=w,e[56]=v):v=e[56];let S;e[57]!==z||e[58]!==v?(S=s.jsxs("div",{className:"grid gap-6 xl:grid-cols-2",children:[z,v]}),e[57]=z,e[58]=v,e[59]=S):S=e[59];let G;return e[60]!==N||e[61]!==k||e[62]!==S||e[63]!==h?(G=s.jsxs(he,{breadcrumbs:ye,children:[U,s.jsxs("div",{className:"min-h-screen space-y-8 bg-zinc-50/40 p-6",children:[D,h,N,k,S]})]}),e[60]=N,e[61]=k,e[62]=S,e[63]=h,e[64]=G):G=e[64],G}function _e(r,e){return s.jsx("p",{className:"whitespace-pre-wrap break-words",children:r},`${e}-${r.slice(0,24)}`)}function ze(r,e){return s.jsxs("div",{className:"rounded-xl border border-zinc-100 bg-zinc-50/50 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("p",{className:"text-xs font-black uppercase tracking-wider text-[#212121]",children:r.title}),s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white px-2 py-1 text-[9px] font-black uppercase tracking-widest text-zinc-500 ring-1 ring-zinc-200",children:[s.jsx(fe,{className:"size-3"}),r.occurred_at]})]}),s.jsx("p",{className:"mt-2 text-sm text-zinc-600",children:r.description})]},`${r.type}-${r.occurred_at}-${e}`)}export{Pe as default};
