import{c as rs,r as cs,a as Ke,j as s,b as Le,H as ns,L as ss}from"./app-uTKXIY9p.js";import{B as d}from"./badge-CB5KYLBW.js";import{b as is,B as te}from"./createLucideIcon-CUSOX-IT.js";import{d as ee,C as se,a as Qe,b as Ge}from"./card-0ldL8LxI.js";import{a as os,g as ds,e as ms,f as xs,D as hs}from"./dialog-CemsAHb2.js";import{I as ps}from"./input-C3HA7uRK.js";import{L as Je}from"./label-UpKlFMN4.js";import{U as Xe,A as fs,C as Ye}from"./app-layout-Bob68WRG.js";import{C as gs}from"./clock-3-rYXMf-Q0.js";import{S as us}from"./store-ZtkUo-DR.js";import{P as bs}from"./package-CxP7AIq-.js";import{M as js}from"./map-pin-BKIn1aP7.js";import{T as Ns}from"./trending-up-D4NEbC5o.js";import{S as Ze}from"./search-WOZ5x3Ct.js";import{C as es}from"./chevron-left-QDFHRxuh.js";/* empty css            */import"./index-DqJ3PsFr.js";import"./index-D0vn7R-A.js";import"./index-C8o9R0tm.js";const ws=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],ys=is("MessageSquare",ws),vs=[{title:"Customers",href:"/staff/customers"}];function ts(t){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(t)}function zs(t){return t==="telegram"?"Telegram":t==="table"?"Table":"Web"}function _s(t){return t==="telegram"?"bg-sky-50 text-sky-700 ring-1 ring-sky-200":t==="table"?"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200":"bg-zinc-100 text-zinc-700 ring-1 ring-zinc-200"}function st(t){const e=rs.c(152),{customers:i,selectedCustomer:r,filters:as,smsTemplates:m,smsPlaceholders:ae,summary:h}=t;let le;e[0]===Symbol.for("react.memo_cache_sentinel")?(le=[],e[0]=le):le=e[0];const[c,Me]=cs.useState(le),Pe=as.search??"";let re;e[1]!==Pe?(re={search:Pe},e[1]=Pe,e[2]=re):re=e[2];const o=Ke(re);let ce;e[3]===Symbol.for("react.memo_cache_sentinel")?(ce=[],e[3]=ce):ce=e[3];let ne;e[4]===Symbol.for("react.memo_cache_sentinel")?(ne={customer_ids:ce,message:""},e[4]=ne):ne=e[4];const n=Ke(ne);let Ae;e:{if(i.data.length===0){Ae=!1;break e}let a;if(e[5]!==i.data||e[6]!==c){let l;e[8]!==c?(l=x=>c.includes(x.id),e[8]=c,e[9]=l):l=e[9],a=i.data.every(l),e[5]=i.data,e[6]=c,e[7]=a}else a=e[7];Ae=a}const p=Ae;let ie;e[10]===Symbol.for("react.memo_cache_sentinel")?(ie=a=>{Me(l=>l.includes(a)?l.filter(x=>x!==a):[...l,a])},e[10]=ie):ie=e[10];const ls=ie;let oe;e[11]!==i.data||e[12]!==p?(oe=()=>{if(p){Me(a=>a.filter(l=>!i.data.some(x=>x.id===l)));return}Me(a=>[...new Set([...a,...i.data.map(Ps)])])},e[11]=i.data,e[12]=p,e[13]=oe):oe=e[13];const He=oe;let de;e[14]!==o.data?(de=a=>{a.preventDefault(),Le.get("/staff/customers",o.data,{preserveState:!0,replace:!0})},e[14]=o.data,e[15]=de):de=e[15];const Oe=de;let me;e[16]!==c||e[17]!==n?(me=a=>{a.preventDefault(),n.transform(l=>({...l,customer_ids:c})),n.post("/staff/customers/sms",{preserveScroll:!0,onSuccess:()=>{n.reset("message")}})},e[16]=c,e[17]=n,e[18]=me):me=e[18];const Re=me;let xe;e[19]!==o.data.search?(xe=()=>{if(typeof window>"u"){Le.get("/staff/customers",{search:o.data.search||void 0},{preserveState:!0,preserveScroll:!0,replace:!0});return}const a=new URLSearchParams(window.location.search);a.delete("customer_id");const l=a.toString(),x=l.length>0?`/staff/customers?${l}`:"/staff/customers";Le.get(x,{},{preserveState:!0,preserveScroll:!0,replace:!0})},e[19]=o.data.search,e[20]=xe):xe=e[20];const Be=xe;let he;e[21]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(ns,{title:"Customers"}),e[21]=he):he=e[21];let pe;e[22]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-[#9E9E9E]",children:"Total Customers"}),e[22]=pe):pe=e[22];let f;e[23]!==h.total_customers?(f=h.total_customers.toLocaleString(),e[23]=h.total_customers,e[24]=f):f=e[24];let g;e[25]!==f?(g=s.jsxs("div",{children:[pe,s.jsx("h3",{className:"mt-2 text-3xl font-black text-[#212121]",children:f})]}),e[25]=f,e[26]=g):g=e[26];let fe;e[27]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx("div",{className:"rounded-2xl bg-[#F57C00]/10 p-3 text-[#F57C00]",children:s.jsx(Xe,{className:"size-6"})}),e[27]=fe):fe=e[27];let u;e[28]!==g?(u=s.jsx(ee,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsx(se,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[g,fe]})})}),e[28]=g,e[29]=u):u=e[29];let ge;e[30]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-emerald-500",children:"Active (With Orders)"}),e[30]=ge):ge=e[30];let b;e[31]!==h.active_customers?(b=h.active_customers.toLocaleString(),e[31]=h.active_customers,e[32]=b):b=e[32];let j;e[33]!==b?(j=s.jsxs("div",{children:[ge,s.jsx("h3",{className:"mt-2 text-3xl font-black text-[#212121]",children:b})]}),e[33]=b,e[34]=j):j=e[34];let ue;e[35]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx("div",{className:"rounded-2xl bg-emerald-50 p-3 text-emerald-500",children:s.jsx(Ns,{className:"size-6"})}),e[35]=ue):ue=e[35];let N;e[36]!==j?(N=s.jsx(ee,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsx(se,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[j,ue]})})}),e[36]=j,e[37]=N):N=e[37];let w;e[38]!==u||e[39]!==N?(w=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u,N]}),e[38]=u,e[39]=N,e[40]=w):w=e[40];let be;e[41]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(Qe,{className:"border-b border-zinc-100 bg-zinc-50/50 py-4",children:s.jsxs(Ge,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[s.jsx(Ze,{className:"size-4 text-[#F57C00]"}),"Search Database"]})}),e[41]=be):be=e[41];let je;e[42]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(Je,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",htmlFor:"search",children:"Name or Phone Number"}),e[42]=je):je=e[42];let Ne;e[43]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx(Ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-zinc-400"}),e[43]=Ne):Ne=e[43];let y;e[44]!==o?(y=a=>o.setData("search",a.target.value),e[44]=o,e[45]=y):y=e[45];let v;e[46]!==o.data.search||e[47]!==y?(v=s.jsxs("div",{className:"min-w-[300px] flex-1",children:[je,s.jsxs("div",{className:"relative mt-1.5",children:[Ne,s.jsx(ps,{id:"search",className:"h-11 pl-10 rounded-xl border-zinc-200 focus:ring-[#F57C00] transition-all",value:o.data.search,onChange:y,placeholder:"Enter customer name or phone..."})]})]}),e[46]=o.data.search,e[47]=y,e[48]=v):v=e[48];let we,ye;e[49]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx(te,{type:"submit",className:"h-11 px-8 rounded-xl bg-[#F57C00] font-black shadow-lg shadow-[#F57C00]/20 hover:bg-[#E65100]",children:"Apply Filter"}),ye=s.jsx(te,{type:"button",variant:"outline",className:"h-11 rounded-xl font-bold border-zinc-200",onClick:Ms,children:"Reset"}),e[49]=we,e[50]=ye):(we=e[49],ye=e[50]);let z;e[51]!==Oe||e[52]!==v?(z=s.jsxs(ee,{className:"border-none shadow-md ring-1 ring-zinc-200",children:[be,s.jsx(se,{className:"pt-6",children:s.jsxs("form",{className:"flex flex-wrap items-end gap-3",onSubmit:Oe,children:[v,we,ye]})})]}),e[51]=Oe,e[52]=v,e[53]=z):z=e[53];let ve;e[54]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsxs(Ge,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[s.jsx(Xe,{className:"size-4 text-[#F57C00]"}),"Customer Directory"]}),e[54]=ve):ve=e[54];let _;e[55]!==c.length?(_=c.length>0&&s.jsxs(d,{className:"bg-[#F57C00] font-black uppercase tracking-tighter shadow-none",children:[c.length," Selected"]}),e[55]=c.length,e[56]=_):_=e[56];let k;e[57]!==_?(k=s.jsx(Qe,{className:"border-b border-zinc-100 bg-white py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[ve,_]})}),e[57]=_,e[58]=k):k=e[58];let C;e[59]!==p||e[60]!==He?(C=s.jsx("th",{className:"w-12 px-6 py-4",children:s.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-zinc-300 text-[#F57C00] focus:ring-[#F57C00]/20",checked:p,onChange:He})}),e[59]=p,e[60]=He,e[61]=C):C=e[61];let ze,_e,ke,Ce;e[62]===Symbol.for("react.memo_cache_sentinel")?(ze=s.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Customer Info"}),_e=s.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Order Stats"}),ke=s.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Volume"}),Ce=s.jsx("th",{className:"px-6 py-4 text-right text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Actions"}),e[62]=ze,e[63]=_e,e[64]=ke,e[65]=Ce):(ze=e[62],_e=e[63],ke=e[64],Ce=e[65]);let S;e[66]!==C?(S=s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-zinc-100 bg-zinc-50/50",children:[C,ze,_e,ke,Ce]})}),e[66]=C,e[67]=S):S=e[67];let F;if(e[68]!==i.data||e[69]!==o.data.search||e[70]!==c){let a;e[72]!==o.data.search||e[73]!==c?(a=l=>s.jsxs("tr",{className:"group border-b border-zinc-50 transition-colors hover:bg-zinc-50/50 last:border-0",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-zinc-300 text-[#F57C00] focus:ring-[#F57C00]/20",checked:c.includes(l.id),onChange:()=>ls(l.id)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-zinc-100 text-xs font-black text-zinc-500 transition-colors group-hover:bg-[#F57C00]/10 group-hover:text-[#F57C00]",children:l.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-[#212121]",children:l.name}),s.jsx("p",{className:"text-xs font-medium text-zinc-500",children:l.phone})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(d,{className:"bg-zinc-100 font-bold text-zinc-700 shadow-none ring-1 ring-zinc-200",children:[l.orders_count," Orders"]})})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("p",{className:"font-black text-[#212121]",children:ts(l.total_spent)}),l.last_order_at&&s.jsxs("p",{className:"text-[10px] font-medium text-zinc-400",children:["Last: ",l.last_order_at]})]}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsx(te,{variant:"ghost",size:"sm",asChild:!0,className:"h-8 rounded-lg font-bold text-[#F57C00] hover:bg-[#F57C00]/10",children:s.jsx(ss,{href:`/staff/customers?search=${encodeURIComponent(o.data.search??"")}&customer_id=${l.id}`,preserveState:!0,preserveScroll:!0,children:"View History"})})})]},l.id),e[72]=o.data.search,e[73]=c,e[74]=a):a=e[74],F=i.data.map(a),e[68]=i.data,e[69]=o.data.search,e[70]=c,e[71]=F}else F=e[71];let E;e[75]!==F?(E=s.jsx("tbody",{children:F}),e[75]=F,e[76]=E):E=e[76];let D;e[77]!==S||e[78]!==E?(D=s.jsx(se,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[S,E]})})}),e[77]=S,e[78]=E,e[79]=D):D=e[79];let T;e[80]!==k||e[81]!==D?(T=s.jsxs(ee,{className:"overflow-hidden border-none shadow-md ring-1 ring-zinc-200",children:[k,D]}),e[80]=k,e[81]=D,e[82]=T):T=e[82];let Se;e[83]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(Qe,{className:"border-b border-zinc-100 bg-zinc-50/50 py-4",children:s.jsxs(Ge,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[s.jsx(ys,{className:"size-4 text-[#F57C00]"}),"Outreach & Promotions"]})}),e[83]=Se):Se=e[83];let Fe;e[84]===Symbol.for("react.memo_cache_sentinel")?(Fe=s.jsx(Je,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Message Templates"}),e[84]=Fe):Fe=e[84];let L;e[85]!==m.length?(L=s.jsxs("div",{className:"flex items-center justify-between",children:[Fe,s.jsx(d,{variant:"outline",className:"text-[10px] font-bold text-[#F57C00] border-[#F57C00]/30",children:m.length})]}),e[85]=m.length,e[86]=L):L=e[86];let M;e[87]!==n||e[88]!==m?(M=s.jsx("div",{className:"grid gap-2",children:m.length>0?s.jsx("div",{className:"flex flex-col gap-2",children:m.map(a=>s.jsxs("button",{type:"button",onClick:()=>n.setData("message",a.body),className:"flex flex-col rounded-xl border border-zinc-100 bg-zinc-50/50 p-3 text-left transition-all hover:border-[#F57C00]/30 hover:bg-white hover:shadow-sm",children:[s.jsx("span",{className:"text-xs font-black text-[#212121]",children:a.label}),s.jsx("span",{className:"mt-1 line-clamp-1 text-[10px] text-zinc-500",children:a.body})]},a.key))}):s.jsx("div",{className:"rounded-xl border border-dashed border-zinc-200 py-6 text-center",children:s.jsx("p",{className:"text-[10px] font-bold text-zinc-400",children:"No templates defined"})})}),e[87]=n,e[88]=m,e[89]=M):M=e[89];let P;e[90]!==L||e[91]!==M?(P=s.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[L,M]}),e[90]=L,e[91]=M,e[92]=P):P=e[92];let Ee;e[93]===Symbol.for("react.memo_cache_sentinel")?(Ee=s.jsx(Je,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Compose Message"}),e[93]=Ee):Ee=e[93];const Ie=`text-[10px] font-black tracking-widest ${n.data.message.length>400?"text-rose-500":"text-zinc-400"}`;let A;e[94]!==n.data.message.length||e[95]!==Ie?(A=s.jsxs("div",{className:"flex items-center justify-between",children:[Ee,s.jsxs("span",{className:Ie,children:[n.data.message.length,"/480 Characters"]})]}),e[94]=n.data.message.length,e[95]=Ie,e[96]=A):A=e[96];let H;e[97]!==n?(H=a=>n.setData("message",a.target.value),e[97]=n,e[98]=H):H=e[98];let O;e[99]!==n.data.message||e[100]!==H?(O=s.jsx("textarea",{id:"message",className:"min-h-[160px] w-full rounded-2xl border border-zinc-200 bg-white p-4 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-[#F57C00]/20 transition-all placeholder:text-zinc-300",value:n.data.message,maxLength:480,onChange:H,placeholder:"Enter your promotional or notification message here..."}),e[99]=n.data.message,e[100]=H,e[101]=O):O=e[101];let R;e[102]!==c.length?(R=s.jsx("div",{className:"absolute bottom-4 right-4 flex h-10 w-10 items-center justify-center rounded-full bg-zinc-50 text-[10px] font-black text-zinc-400 ring-1 ring-zinc-200",children:c.length}),e[102]=c.length,e[103]=R):R=e[103];let B;e[104]!==O||e[105]!==R?(B=s.jsxs("div",{className:"relative",children:[O,R]}),e[104]=O,e[105]=R,e[106]=B):B=e[106];let I;e[107]!==ae?(I=ae.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5",children:ae.map(Ls)}),e[107]=ae,e[108]=I):I=e[108];let De;e[109]===Symbol.for("react.memo_cache_sentinel")?(De=s.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter",children:"Click to use placeholders in your message"}),e[109]=De):De=e[109];let $;e[110]!==I?($=s.jsxs("div",{className:"flex-1 space-y-1",children:[I,De]}),e[110]=I,e[111]=$):$=e[111];const $e=n.processing||c.length===0||!n.data.message,Ue=n.processing?"Delivering...":`Send to ${c.length} Recipients`;let U;e[112]!==$e||e[113]!==Ue?(U=s.jsx(te,{type:"submit",disabled:$e,className:"h-12 px-10 rounded-xl bg-[#212121] font-black shadow-lg shadow-zinc-200 hover:bg-[#F57C00] transition-colors",children:Ue}),e[112]=$e,e[113]=Ue,e[114]=U):U=e[114];let q;e[115]!==$||e[116]!==U?(q=s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[$,U]}),e[115]=$,e[116]=U,e[117]=q):q=e[117];let V;e[118]!==A||e[119]!==B||e[120]!==q?(V=s.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[A,B,q]}),e[118]=A,e[119]=B,e[120]=q,e[121]=V):V=e[121];let W;e[122]!==Re||e[123]!==P||e[124]!==V?(W=s.jsxs(ee,{className:"border-none shadow-lg ring-1 ring-zinc-200",children:[Se,s.jsx(se,{className:"pt-6",children:s.jsxs("form",{className:"grid gap-8 lg:grid-cols-12",onSubmit:Re,children:[P,V]})})]}),e[122]=Re,e[123]=P,e[124]=V,e[125]=W):W=e[125];const qe=!!r;let Q;e[126]!==Be?(Q=a=>{a||Be()},e[126]=Be,e[127]=Q):Q=e[127];let G;e[128]!==r?(G=r?s.jsxs(os,{className:"max-h-[92vh] overflow-y-auto border-none p-0 sm:max-w-6xl",children:[s.jsxs(ds,{className:"sr-only",children:[s.jsx(ms,{children:"Customer History"}),s.jsx(xs,{children:"Detailed order history, source channels, top branch, and ordering habits."})]}),s.jsx("div",{className:"border-b border-zinc-100 bg-[#212121] px-6 py-6 text-white md:px-8",children:s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-40",children:"Client Dossier"}),s.jsx("h3",{className:"mt-2 text-2xl font-black",children:r.name}),s.jsx("p",{className:"mt-1 font-bold text-[#F57C00] opacity-80",children:r.phone}),r.telegram_username&&s.jsxs("p",{className:"mt-1 text-xs font-semibold text-sky-200",children:["@",r.telegram_username]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(d,{className:"border border-white/20 bg-white/10 font-black uppercase tracking-widest text-white shadow-none backdrop-blur-md",children:[r.source_summary.total," Total Orders"]})})]})}),s.jsxs("div",{className:"space-y-6 p-4 md:p-8",children:[s.jsxs("div",{className:"grid gap-4 lg:grid-cols-4",children:[s.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[s.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:"Source Mix"}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s.jsxs(d,{className:"bg-zinc-100 text-zinc-700 ring-1 ring-zinc-200 shadow-none",children:["Web ",r.source_summary.web]}),s.jsxs(d,{className:"bg-sky-50 text-sky-700 ring-1 ring-sky-200 shadow-none",children:["Telegram ",r.source_summary.telegram]}),s.jsxs(d,{className:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 shadow-none",children:["Table ",r.source_summary.table]})]})]}),s.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[s.jsxs("p",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[s.jsx(gs,{className:"size-3.5"}),"Frequent Time"]}),s.jsx("div",{className:"mt-3 space-y-1.5",children:r.top_order_hours.length>0?r.top_order_hours.map(Ts):s.jsx("p",{className:"text-xs font-semibold text-zinc-400",children:"No ordering pattern yet"})}),r.top_order_weekdays.length>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:r.top_order_weekdays.map(Ds)})]}),s.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[s.jsxs("p",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[s.jsx(us,{className:"size-3.5"}),"Top Branch"]}),s.jsx("p",{className:"mt-3 text-sm font-black text-[#212121]",children:r.top_branch?.pickup_location??"N/A"}),r.top_branch&&s.jsxs("p",{className:"text-xs font-semibold text-zinc-500",children:[r.top_branch.orders_count," order(s)"]}),r.branch_summary.length>1&&s.jsx("div",{className:"mt-3 space-y-1",children:r.branch_summary.slice(1).map(Es)})]}),s.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[s.jsxs("p",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[s.jsx(bs,{className:"size-3.5"}),"Most Ordered"]}),s.jsx("div",{className:"mt-3 space-y-1.5",children:r.top_items.length>0?r.top_items.slice(0,4).map(Fs):s.jsx("p",{className:"text-xs font-semibold text-zinc-400",children:"No items yet"})})]})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"mb-3 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[s.jsx(js,{className:"size-3.5"}),"Recent Orders (20)"]}),r.orders.length===0?s.jsx("div",{className:"py-12 text-center",children:s.jsx("p",{className:"text-zinc-400 font-bold uppercase tracking-widest text-xs",children:"No order history found for this account"})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.orders.map(Cs)})]})]})]}):null,e[128]=r,e[129]=G):G=e[129];let J;e[130]!==qe||e[131]!==Q||e[132]!==G?(J=s.jsx(hs,{open:qe,onOpenChange:Q,children:G}),e[130]=qe,e[131]=Q,e[132]=G,e[133]=J):J=e[133];const Ve=i.from??0,We=i.to??0;let K;e[134]!==i.total||e[135]!==Ve||e[136]!==We?(K=s.jsxs("p",{className:"text-muted-foreground text-sm",children:["Showing ",Ve," to ",We," of ",i.total," customer(s)"]}),e[134]=i.total,e[135]=Ve,e[136]=We,e[137]=K):K=e[137];let X;e[138]!==i.links?(X=i.links.map(ks),e[138]=i.links,e[139]=X):X=e[139];let Y;e[140]!==X?(Y=s.jsx("div",{className:"flex items-center gap-2",children:X}),e[140]=X,e[141]=Y):Y=e[141];let Z;e[142]!==K||e[143]!==Y?(Z=s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[K,Y]}),e[142]=K,e[143]=Y,e[144]=Z):Z=e[144];let Te;return e[145]!==w||e[146]!==z||e[147]!==T||e[148]!==W||e[149]!==J||e[150]!==Z?(Te=s.jsxs(fs,{breadcrumbs:vs,children:[he,s.jsxs("div",{className:"space-y-8 bg-zinc-50/50 p-6 min-h-screen",children:[w,z,T,W,J,Z]})]}),e[145]=w,e[146]=z,e[147]=T,e[148]=W,e[149]=J,e[150]=Z,e[151]=Te):Te=e[151],Te}function ks(t){return s.jsx(te,{variant:t.active?"default":"outline",size:"sm",disabled:!t.url,asChild:!!t.url,className:`h-11 rounded-xl px-4 font-bold transition-all ${t.active?"bg-[#F57C00] text-white shadow-lg shadow-[#F57C00]/20":"text-zinc-500 border-zinc-200"}`,children:t.url?s.jsx(ss,{href:t.url,preserveState:!0,preserveScroll:!0,children:t.label.includes("Previous")?s.jsx(es,{className:"size-4"}):t.label.includes("Next")?s.jsx(Ye,{className:"size-4"}):s.jsx("span",{dangerouslySetInnerHTML:{__html:t.label}})}):s.jsx("span",{children:t.label.includes("Previous")?s.jsx(es,{className:"size-4"}):t.label.includes("Next")?s.jsx(Ye,{className:"size-4"}):s.jsx("span",{dangerouslySetInnerHTML:{__html:t.label}})})},t.label)}function Cs(t){return s.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-50/50 p-5 transition-all hover:bg-white hover:shadow-md hover:ring-1 hover:ring-[#F57C00]/20",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:"Order Ref"}),s.jsxs("p",{className:"text-sm font-black text-[#212121]",children:["#",t.id]})]}),s.jsx("p",{className:"text-lg font-black text-[#F57C00]",children:ts(t.total_amount)})]}),s.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[s.jsx(d,{className:`rounded-lg px-2 py-0.5 text-[9px] font-black uppercase tracking-widest shadow-none ${_s(t.source_channel)}`,children:zs(t.source_channel)}),s.jsx(d,{className:"rounded-lg bg-white px-2 py-0.5 text-[9px] font-black uppercase tracking-widest text-zinc-500 ring-1 ring-zinc-200 shadow-none",children:t.order_status}),s.jsxs(d,{className:"rounded-lg bg-white px-2 py-0.5 text-[9px] font-black uppercase tracking-widest text-[#F57C00] ring-1 ring-[#F57C00]/20 shadow-none",children:["Receipt ",t.receipt_status]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"Location"}),s.jsx("p",{className:"truncate text-[11px] font-bold text-zinc-600",children:t.pickup_location??"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"Date"}),s.jsx("p",{className:"text-[11px] font-bold text-zinc-600",children:t.pickup_date??"N/A"})]})]}),t.table_name&&s.jsxs("p",{className:"mt-2 text-[10px] font-semibold text-emerald-700",children:["Table: ",t.table_name]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"Items"}),t.items.length>0?s.jsx("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:t.items.map(Ss)}):s.jsx("p",{className:"mt-1 text-[11px] font-semibold text-zinc-400",children:"No item details"})]})]},t.id)}function Ss(t){return s.jsxs(d,{className:"bg-white text-zinc-600 ring-1 ring-zinc-200 shadow-none",children:[t.quantity,"x ",t.name??"Unknown"]},t.id)}function Fs(t){return s.jsxs("p",{className:"text-xs font-semibold text-zinc-700",children:[t.name," ",s.jsxs("span",{className:"text-zinc-400",children:["x",t.quantity]})]},t.name)}function Es(t){return s.jsxs("p",{className:"text-xs font-medium text-zinc-500",children:[t.pickup_location,": ",t.orders_count]},t.pickup_location)}function Ds(t){return s.jsxs(d,{className:"bg-zinc-100 text-zinc-600 ring-1 ring-zinc-200 shadow-none",children:[t.weekday," ",t.orders_count]},t.weekday)}function Ts(t){return s.jsxs("p",{className:"text-xs font-semibold text-zinc-700",children:[t.label," ",s.jsxs("span",{className:"text-zinc-400",children:["(",t.orders_count,")"]})]},t.hour)}function Ls(t){return s.jsx(d,{variant:"outline",className:"cursor-help rounded-lg border-zinc-200 bg-white px-2 py-0.5 text-[9px] font-bold text-zinc-500 hover:text-[#F57C00]",title:t.description,children:`{${t.token}}`},t.token)}function Ms(){return Le.get("/staff/customers")}function Ps(t){return t.id}export{st as default};
