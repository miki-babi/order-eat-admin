import{c as Se,r as De,a as ve,j as s,b as V,H as Fe,L as Pe}from"./app-B1ifENt7.js";import{I as p}from"./input-error-idKhxiu_.js";import{B as ze}from"./badge-BxHkdwaA.js";import{B as u}from"./createLucideIcon-DBjBHpes.js";import{d as g,C as h,a as G,b as H}from"./card-DUXOF7wf.js";import{I as x}from"./input-ZZWHhI5M.js";import{L as m}from"./label-CvzI8C74.js";import{U as Ee,A as Ie}from"./app-layout-BaTFaLhf.js";import{S as Ae}from"./search-DbtaBeGd.js";import{U as Te}from"./users-ClLoEKCw.js";import{I as qe}from"./image-plus-deTB6hLW.js";import{P as Be}from"./pen-line-Lw7DBwrD.js";import{T as Le}from"./trash-2-Bjq0893t.js";import{C as Ue}from"./clock-3-DkC5Zolb.js";/* empty css            */import"./index-D62cbb27.js";import"./index-CFPRdl_O.js";import"./index-CmpwTNNW.js";import"./x-DG3YsQOQ.js";import"./index-BuAWgm97.js";import"./index-C8o9R0tm.js";import"./store-PGPmctu0.js";import"./map-pin-CMaCX4Sl.js";import"./chevron-right-BOcL-KTG.js";const Me=[{title:"Catering Requests",href:"/staff/catering-requests"}];function $e(n){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(n)}function js(n){const e=Se.c(103),{packages:xe,requests:d,filters:_e,statusOptions:f,canManagePackages:o,canUpdateRequests:M,summary:c}=n,[j,pe]=De.useState(null),ge=_e.search??"",he=_e.status??"";let O;e[0]!==ge||e[1]!==he?(O={search:ge,status:he},e[0]=ge,e[1]=he,e[2]=O):O=e[2];const l=ve(O);let J;e[3]===Symbol.for("react.memo_cache_sentinel")?(J={name:"",description:"",image:null,price_per_person:"",min_guests:"20",is_active:!0},e[3]=J):J=e[3];const i=ve(J);let K;e[4]===Symbol.for("react.memo_cache_sentinel")?(K={_method:"put",name:"",description:"",image:null,price_per_person:"",min_guests:"20",is_active:!0},e[4]=K):K=e[4];const r=ve(K);let Q;e[5]!==l.data?(Q=t=>{t.preventDefault(),V.get("/staff/catering-requests",l.data,{preserveState:!0,replace:!0})},e[5]=l.data,e[6]=Q):Q=e[6];const ue=Q;let W;e[7]!==i?(W=t=>{t.preventDefault(),i.post("/staff/catering-packages",{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{i.reset(),i.setData("is_active",!0),i.setData("min_guests","20")}})},e[7]=i,e[8]=W):W=e[8];const fe=W;let X;e[9]!==r?(X=t=>{pe(t),r.setData({_method:"put",name:t.name,description:t.description??"",image:null,price_per_person:String(t.price_per_person),min_guests:String(t.min_guests),is_active:t.is_active})},e[9]=r,e[10]=X):X=e[10];const $=X;let Y;e[11]!==r||e[12]!==j?(Y=t=>{t.preventDefault(),j&&r.post(`/staff/catering-packages/${j.id}`,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{pe(null)}})},e[11]=r,e[12]=j,e[13]=Y):Y=e[13];const je=Y,we=Ke,ye=Je;let Z;e[14]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(Fe,{title:"Catering Requests"}),e[14]=Z):Z=e[14];let R;e[15]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Catering Packages"}),e[15]=R):R=e[15];let b;e[16]!==c.total_packages?(b=s.jsx(g,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(h,{className:"pt-6",children:[R,s.jsx("h3",{className:"mt-2 text-2xl font-black text-zinc-900",children:c.total_packages})]})}),e[16]=c.total_packages,e[17]=b):b=e[17];let ee;e[18]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Active Packages"}),e[18]=ee):ee=e[18];let N;e[19]!==c.active_packages?(N=s.jsx(g,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(h,{className:"pt-6",children:[ee,s.jsx("h3",{className:"mt-2 text-2xl font-black text-zinc-900",children:c.active_packages})]})}),e[19]=c.active_packages,e[20]=N):N=e[20];let se;e[21]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Total Requests"}),e[21]=se):se=e[21];let v;e[22]!==c.total_requests?(v=s.jsx(g,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(h,{className:"pt-6",children:[se,s.jsx("h3",{className:"mt-2 text-2xl font-black text-zinc-900",children:c.total_requests})]})}),e[22]=c.total_requests,e[23]=v):v=e[23];let te;e[24]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Pending"}),e[24]=te):te=e[24];let _;e[25]!==c.pending_requests?(_=s.jsx(g,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(h,{className:"pt-6",children:[te,s.jsx("h3",{className:"mt-2 text-2xl font-black text-zinc-900",children:c.pending_requests})]})}),e[25]=c.pending_requests,e[26]=_):_=e[26];let z;e[27]!==b||e[28]!==N||e[29]!==v||e[30]!==_?(z=s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[b,N,v,_]}),e[27]=b,e[28]=N,e[29]=v,e[30]=_,e[31]=z):z=e[31];let ae;e[32]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx(G,{children:s.jsx(H,{className:"text-sm font-black uppercase tracking-widest text-zinc-700",children:"Search Requests"})}),e[32]=ae):ae=e[32];let ie;e[33]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(m,{htmlFor:"search",children:"Search"}),e[33]=ie):ie=e[33];let w;e[34]!==l?(w=t=>l.setData("search",t.target.value),e[34]=l,e[35]=w):w=e[35];let y;e[36]!==l.data.search||e[37]!==w?(y=s.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[ie,s.jsx(x,{id:"search",value:l.data.search,onChange:w,placeholder:"Request ID, customer, package, venue"})]}),e[36]=l.data.search,e[37]=w,e[38]=y):y=e[38];let re;e[39]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(m,{htmlFor:"status",children:"Status"}),e[39]=re):re=e[39];const ke=l.data.status;let k;e[40]!==l?(k=t=>l.setData("status",t.target.value),e[40]=l,e[41]=k):k=e[41];let ne;e[42]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx("option",{value:"",children:"All"}),e[42]=ne):ne=e[42];let C;e[43]!==f?(C=f.map(Oe),e[43]=f,e[44]=C):C=e[44];let S;e[45]!==l.data.status||e[46]!==k||e[47]!==C?(S=s.jsxs("div",{className:"grid gap-2",children:[re,s.jsxs("select",{id:"status",value:ke,onChange:k,className:"h-10 rounded-xl border border-zinc-200 bg-white px-3 text-sm",children:[ne,C]})]}),e[45]=l.data.status,e[46]=k,e[47]=C,e[48]=S):S=e[48];let le;e[49]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsxs(u,{type:"submit",className:"h-10 flex-1 rounded-xl bg-[#F57C00] text-white hover:bg-[#E65100]",children:[s.jsx(Ae,{className:"mr-2 size-4"}),"Apply"]}),s.jsx(u,{type:"button",variant:"outline",className:"h-10 rounded-xl",onClick:Ve,children:"Clear"})]}),e[49]=le):le=e[49];let D;e[50]!==ue||e[51]!==y||e[52]!==S?(D=s.jsxs(g,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[ae,s.jsx(h,{children:s.jsxs("form",{className:"grid gap-4 md:grid-cols-4",onSubmit:ue,children:[y,S,le]})})]}),e[50]=ue,e[51]=y,e[52]=S,e[53]=D):D=e[53];let F;e[54]!==o||e[55]!==fe||e[56]!==i?(F=o&&s.jsxs(g,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[s.jsx(G,{children:s.jsxs(H,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-700",children:[s.jsx(Ee,{className:"size-4 text-[#F57C00]"}),"Create Catering Package"]})}),s.jsx(h,{children:s.jsxs("form",{className:"grid gap-4 md:grid-cols-6",onSubmit:fe,children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"new-name",children:"Name"}),s.jsx(x,{id:"new-name",value:i.data.name,onChange:t=>i.setData("name",t.target.value)}),s.jsx(p,{message:i.errors.name})]}),s.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[s.jsx(m,{htmlFor:"new-description",children:"Description"}),s.jsx(x,{id:"new-description",value:i.data.description,onChange:t=>i.setData("description",t.target.value)}),s.jsx(p,{message:i.errors.description})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"new-image",children:"Image"}),s.jsx(x,{id:"new-image",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",className:"h-10",onChange:t=>i.setData("image",t.target.files?.[0]??null)}),s.jsx(p,{message:i.errors.image})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"new-price",children:"Price/Person (ETB)"}),s.jsx(x,{id:"new-price",type:"number",min:"0",step:"0.01",value:i.data.price_per_person,onChange:t=>i.setData("price_per_person",t.target.value)}),s.jsx(p,{message:i.errors.price_per_person})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"new-min",children:"Min Guests"}),s.jsx(x,{id:"new-min",type:"number",min:"1",value:i.data.min_guests,onChange:t=>i.setData("min_guests",t.target.value)}),s.jsx(p,{message:i.errors.min_guests})]}),s.jsxs("div",{className:"md:col-span-6 flex items-center justify-between rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-3",children:[s.jsxs("label",{className:"text-sm font-semibold text-zinc-700",children:[s.jsx("input",{type:"checkbox",className:"mr-2",checked:i.data.is_active,onChange:t=>i.setData("is_active",t.target.checked)}),"Active package"]}),s.jsx(u,{type:"submit",className:"rounded-xl bg-[#F57C00] text-white hover:bg-[#E65100]",disabled:i.processing,children:"Add Package"})]})]})})]}),e[54]=o,e[55]=fe,e[56]=i,e[57]=F):F=e[57];let P;e[58]!==o||e[59]!==r||e[60]!==j||e[61]!==je?(P=j&&o&&s.jsxs(g,{className:"border-none shadow-sm ring-2 ring-[#212121]",children:[s.jsx(G,{children:s.jsxs(H,{className:"text-sm font-black uppercase tracking-widest text-zinc-700",children:["Edit Package: ",j.name]})}),s.jsx(h,{children:s.jsxs("form",{className:"grid gap-4 md:grid-cols-6",onSubmit:je,children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit-name",children:"Name"}),s.jsx(x,{id:"edit-name",value:r.data.name,onChange:t=>r.setData("name",t.target.value)}),s.jsx(p,{message:r.errors.name})]}),s.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[s.jsx(m,{htmlFor:"edit-description",children:"Description"}),s.jsx(x,{id:"edit-description",value:r.data.description,onChange:t=>r.setData("description",t.target.value)}),s.jsx(p,{message:r.errors.description})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit-image",children:"Replacement Image"}),s.jsx(x,{id:"edit-image",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",className:"h-10",onChange:t=>r.setData("image",t.target.files?.[0]??null)}),s.jsx(p,{message:r.errors.image})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit-price",children:"Price/Person (ETB)"}),s.jsx(x,{id:"edit-price",type:"number",min:"0",step:"0.01",value:r.data.price_per_person,onChange:t=>r.setData("price_per_person",t.target.value)}),s.jsx(p,{message:r.errors.price_per_person})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit-min",children:"Min Guests"}),s.jsx(x,{id:"edit-min",type:"number",min:"1",value:r.data.min_guests,onChange:t=>r.setData("min_guests",t.target.value)}),s.jsx(p,{message:r.errors.min_guests})]}),s.jsxs("div",{className:"md:col-span-6 flex items-center justify-between rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-3",children:[s.jsxs("label",{className:"text-sm font-semibold text-zinc-700",children:[s.jsx("input",{type:"checkbox",className:"mr-2",checked:r.data.is_active,onChange:t=>r.setData("is_active",t.target.checked)}),"Active package"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(u,{type:"button",variant:"outline",className:"rounded-xl",onClick:()=>pe(null),children:"Cancel"}),s.jsx(u,{type:"submit",className:"rounded-xl bg-[#212121] text-white hover:bg-black",disabled:r.processing,children:"Save Changes"})]})]})]})})]}),e[58]=o,e[59]=r,e[60]=j,e[61]=je,e[62]=P):P=e[62];let ce;e[63]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(G,{children:s.jsx(H,{className:"flex items-center justify-between text-sm font-black uppercase tracking-widest text-zinc-700",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Te,{className:"size-4 text-[#F57C00]"})," Catering Packages"]})})}),e[63]=ce):ce=e[63];let E;if(e[64]!==o||e[65]!==xe||e[66]!==$){let t;e[68]!==o||e[69]!==$?(t=a=>s.jsxs("article",{className:"overflow-hidden rounded-2xl border border-zinc-200 bg-white",children:[s.jsx("div",{className:"aspect-[16/10] overflow-hidden bg-zinc-100",children:a.image_url?s.jsx("img",{src:a.image_url,alt:a.name,className:"h-full w-full object-cover",loading:"lazy"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center text-zinc-400",children:s.jsx(qe,{className:"size-8"})})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-base font-black text-zinc-900",children:a.name}),a.description&&s.jsx("p",{className:"mt-1 text-sm text-zinc-600",children:a.description}),s.jsxs("p",{className:"mt-2 text-sm font-semibold text-zinc-500",children:["Used in ",a.service_requests_count," requests"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ze,{variant:"outline",className:a.is_active?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-zinc-200 bg-zinc-100 text-zinc-600",children:a.is_active?"Active":"Inactive"}),s.jsxs("span",{className:"text-sm font-black text-zinc-900",children:[$e(a.price_per_person),"/guest"]})]})]}),s.jsxs("div",{className:"mt-2 text-sm text-zinc-600",children:["Minimum guests: ",a.min_guests]}),o&&s.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[s.jsxs(u,{type:"button",variant:"outline",className:"h-9 rounded-xl",onClick:()=>$(a),children:[s.jsx(Be,{className:"mr-2 size-4"}),"Edit"]}),s.jsxs(u,{type:"button",variant:"outline",className:"h-9 rounded-xl border-red-200 text-red-600 hover:bg-red-50",onClick:()=>we(a),children:[s.jsx(Le,{className:"mr-2 size-4"}),"Delete"]})]})]})]},a.id),e[68]=o,e[69]=$,e[70]=t):t=e[70],E=xe.map(t),e[64]=o,e[65]=xe,e[66]=$,e[67]=E}else E=e[67];let I;e[71]!==E?(I=s.jsxs(g,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[ce,s.jsx(h,{children:s.jsx("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:E})})]}),e[71]=E,e[72]=I):I=e[72];let me;e[73]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(G,{children:s.jsxs(H,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-700",children:[s.jsx(Ue,{className:"size-4 text-[#F57C00]"}),"Catering Service Requests"]})}),e[73]=me):me=e[73];let A;if(e[74]!==M||e[75]!==d.data||e[76]!==f){let t;e[78]!==M||e[79]!==f?(t=a=>s.jsxs("article",{className:"rounded-2xl border border-zinc-200 p-4",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-black text-zinc-900",children:["Request #",a.id]}),s.jsxs("p",{className:"mt-1 text-sm text-zinc-600",children:[a.customer_name," - ",a.customer_phone]}),s.jsxs("p",{className:"mt-1 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:["Event: ",a.event_date??"N/A"," | Guests: ",a.guest_count]}),s.jsxs("p",{className:"mt-1 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:["Packages: ",a.package_names.length>0?a.package_names.join(", "):a.package_name??"N/A"]}),a.venue&&s.jsxs("p",{className:"mt-1 text-sm text-zinc-600",children:["Venue: ",a.venue]})]}),s.jsx("div",{className:"text-right",children:s.jsx(ze,{variant:"outline",className:"mt-1 border-zinc-200 bg-zinc-100 text-zinc-700",children:a.status})})]}),a.special_instructions&&s.jsx("p",{className:"mt-3 rounded-xl bg-zinc-50 p-3 text-sm text-zinc-700",children:a.special_instructions}),M&&s.jsx("div",{className:"mt-3 flex flex-wrap items-center justify-end gap-2",children:s.jsx("select",{defaultValue:a.status,className:"h-9 rounded-xl border border-zinc-200 bg-white px-3 text-sm",onChange:Ce=>ye(a.id,Ce.target.value),children:f.map(He)})})]},a.id),e[78]=M,e[79]=f,e[80]=t):t=e[80],A=d.data.map(t),e[74]=M,e[75]=d.data,e[76]=f,e[77]=A}else A=e[77];const be=d.from??0,Ne=d.to??0;let T;e[81]!==d.total||e[82]!==be||e[83]!==Ne?(T=s.jsxs("p",{className:"text-sm text-zinc-600",children:["Showing ",be,"-",Ne," of ",d.total]}),e[81]=d.total,e[82]=be,e[83]=Ne,e[84]=T):T=e[84];let q;e[85]!==d.links?(q=d.links.map(Ge),e[85]=d.links,e[86]=q):q=e[86];let B;e[87]!==q?(B=s.jsx("div",{className:"flex flex-wrap gap-2",children:q}),e[87]=q,e[88]=B):B=e[88];let L;e[89]!==T||e[90]!==B?(L=s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 border-t border-zinc-200 pt-4",children:[T,B]}),e[89]=T,e[90]=B,e[91]=L):L=e[91];let U;e[92]!==A||e[93]!==L?(U=s.jsxs(g,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[me,s.jsxs(h,{className:"space-y-4",children:[A,L]})]}),e[92]=A,e[93]=L,e[94]=U):U=e[94];let de;e[95]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx("div",{className:"flex justify-end",children:s.jsx(u,{asChild:!0,variant:"outline",className:"rounded-xl border-zinc-200",children:s.jsx(Pe,{href:"/staff/cake-preorders",children:"Go to Cake Preorders"})})}),e[95]=de):de=e[95];let oe;return e[96]!==z||e[97]!==D||e[98]!==F||e[99]!==P||e[100]!==I||e[101]!==U?(oe=s.jsxs(Ie,{breadcrumbs:Me,children:[Z,s.jsxs("div",{className:"space-y-6 bg-zinc-50/50 p-6",children:[z,D,F,P,I,U,de]})]}),e[96]=z,e[97]=D,e[98]=F,e[99]=P,e[100]=I,e[101]=U,e[102]=oe):oe=e[102],oe}function Ge(n){return s.jsx(u,{type:"button",variant:n.active?"default":"outline",className:"h-8 rounded-lg px-3",disabled:!n.url,onClick:()=>{n.url&&V.visit(n.url,{preserveScroll:!0,preserveState:!0})},children:s.jsx("span",{dangerouslySetInnerHTML:{__html:n.label}})},n.label)}function He(n){return s.jsx("option",{value:n,children:n},n)}function Ve(){return V.get("/staff/catering-requests")}function Oe(n){return s.jsx("option",{value:n,children:n},n)}function Je(n,e){V.patch(`/staff/catering-requests/${n}/status`,{status:e},{preserveScroll:!0})}function Ke(n){window.confirm(`Delete or deactivate "${n.name}"?`)&&V.delete(`/staff/catering-packages/${n.id}`,{preserveScroll:!0})}export{js as default};
