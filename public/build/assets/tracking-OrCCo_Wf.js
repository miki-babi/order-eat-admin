import{c as be,u as je,a as Ne,r as fe,j as s,b as ve,H as _e,L as de}from"./app-urWZCOB2.js";import{I as ke}from"./input-error-Bfp2neNp.js";import{b as we,B as me}from"./createLucideIcon-DXP1NL2b.js";import{C as he}from"./circle-check-D3nhocRF.js";import{C as ye}from"./circle-alert-DPVEXPdL.js";import{A as Ee}from"./arrow-right-CnZ_Gm2v.js";import{R as Fe}from"./receipt-CeHV0Xzp.js";import{U as ze}from"./upload-CWOGAKo5.js";import{E as Ce}from"./external-link-B8Fa0ogm.js";import{S as Ae}from"./shopping-bag-BdzRpI4u.js";import{C as ue}from"./clock-3-C0UEmH_O.js";import{M as Se}from"./map-pin-CupXPNIm.js";import{P as Re}from"./package-Drv-0oa0.js";/* empty css            */const Pe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ie=we("Circle",Pe),xe=[{key:"pending",label:"Order Received",desc:"We have received your order and are waiting for payment verification."},{key:"preparing",label:"Preparing",desc:"Our team is carefully preparing your delicious items."},{key:"ready",label:"Ready for Pickup",desc:"Your order is packaged and ready at the selected location."},{key:"completed",label:"Picked Up",desc:"Order has been successfully collected. Enjoy!"}],Oe=1e4;function ge(a){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(a)}function Qe(a){const e=be.c(99),{order:t}=a,{flash:r}=je().props;let $;e[0]===Symbol.for("react.memo_cache_sentinel")?($={receipt:null},e[0]=$):$=e[0];const i=Ne($),te=fe.useRef(!1);let D;e[1]!==t.order_status?(D=xe.findIndex(l=>l.key===t.order_status),e[1]=t.order_status,e[2]=D):D=e[2];const O=Math.max(D,0),ie=t.receipt_status!=="approved";let B,M;e[3]!==i.processing?(B=()=>{const l=window.setInterval(()=>{document.visibilityState!=="visible"||i.processing||te.current||(te.current=!0,ve.reload({only:["order"],preserveState:!0,preserveScroll:!0,onFinish:()=>{te.current=!1}}))},Oe);return()=>{window.clearInterval(l)}},M=[i.processing],e[3]=i.processing,e[4]=B,e[5]=M):(B=e[4],M=e[5]),fe.useEffect(B,M);let T;e[6]!==i||e[7]!==t.tracking_token?(T=()=>{i.post(`/orders/${t.tracking_token}/receipt`,{forceFormData:!0,preserveScroll:!0})},e[6]=i,e[7]=t.tracking_token,e[8]=T):T=e[8];const ae=T,le=`Track Order #${t.id} - Cafe`;let c;e[9]!==le?(c=s.jsx(_e,{title:le}),e[9]=le,e[10]=c):c=e[10];let U;e[11]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsxs(de,{href:"/",className:"flex items-center gap-2 group",children:[s.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-[#212121] transition-transform group-hover:rotate-12",children:s.jsx(Ae,{className:"size-4 text-[#F57C00]"})}),s.jsx("span",{className:"text-sm font-black uppercase tracking-tighter",children:"Cafe"})]}),e[11]=U):U=e[11];let n;e[12]!==t.id?(n=s.jsxs("span",{className:"text-xs font-black uppercase tracking-widest text-[#9E9E9E]",children:["Order #",t.id]}),e[12]=t.id,e[13]=n):n=e[13];let L;e[14]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx("div",{className:"h-4 w-[1px] bg-zinc-200"}),e[14]=L):L=e[14];let V;e[15]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(de,{href:"/",children:s.jsx(me,{variant:"ghost",className:"h-8 rounded-full px-4 text-xs font-bold text-[#F57C00] hover:bg-[#FFF3E0]",children:"New Order"})}),e[15]=V):V=e[15];let o;e[16]!==n?(o=s.jsx("header",{className:"sticky top-0 z-50 border-b border-zinc-100 bg-white/80 backdrop-blur-md",children:s.jsxs("div",{className:"mx-auto flex h-16 max-w-4xl items-center justify-between px-4",children:[U,s.jsxs("div",{className:"flex items-center gap-4",children:[n,L,V]})]})}),e[16]=n,e[17]=o):o=e[17];let d;e[18]!==r?(d=(r?.success||r?.error)&&s.jsxs("div",{className:"mb-8 animate-in slide-in-from-top-4 duration-500",children:[r?.success&&s.jsxs("div",{className:"flex items-center gap-3 rounded-2xl bg-[#E8F5E9] p-4 text-[#2E7D32] shadow-sm ring-1 ring-[#2E7D32]/20",children:[s.jsx(he,{className:"size-5"}),s.jsx("p",{className:"text-sm font-bold",children:r.success})]}),r?.error&&s.jsxs("div",{className:"flex items-center gap-3 rounded-2xl bg-[#FFEBEE] p-4 text-[#C62828] shadow-sm ring-1 ring-[#C62828]/20",children:[s.jsx(ye,{className:"size-5"}),s.jsx("p",{className:"text-sm font-bold",children:r.error})]})]}),e[18]=r,e[19]=d):d=e[19];const re=`rounded-full px-4 py-1.5 text-[10px] font-black uppercase tracking-[0.2em] shadow-xl transition-all duration-500 ring-2 ring-[#F57C00]/20 ${t.order_status==="completed"?"bg-[#2E7D32] text-white":"bg-[#F57C00] text-white shadow-[#F57C00]/40 scale-110  "}`,ce=xe[O];let m;e[20]!==re||e[21]!==ce.label?(m=s.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 md:right-8",children:s.jsx("div",{className:re,children:ce.label})}),e[20]=re,e[21]=ce.label,e[22]=m):m=e[22];let H;e[23]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-40",children:"Pickup Identification"}),e[23]=H):H=e[23];let x;e[24]!==t.pickup_location.name?(x=s.jsxs("div",{children:[H,s.jsx("h4",{className:"mt-2 text-xl font-bold md:text-2xl",children:t.pickup_location.name})]}),e[24]=t.pickup_location.name,e[25]=x):x=e[25];let p;e[26]!==m||e[27]!==x?(p=s.jsxs("div",{className:"relative bg-[#212121] px-6 py-7 text-white md:px-8",children:[m,x]}),e[26]=m,e[27]=x,e[28]=p):p=e[28];let G,Y;e[29]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-2xl bg-[#FAFAFA] text-[#212121] ring-1 ring-zinc-100",children:s.jsx(ue,{className:"size-6 text-[#F57C00]"})}),Y=s.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Scheduled Time"}),e[29]=G,e[30]=Y):(G=e[29],Y=e[30]);let f;e[31]!==t.pickup_date?(f=s.jsxs("div",{className:"flex items-start gap-5",children:[G,s.jsxs("div",{children:[Y,s.jsx("p",{className:"mt-1 text-base font-bold text-[#212121]",children:t.pickup_date})]})]}),e[31]=t.pickup_date,e[32]=f):f=e[32];let q;e[33]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-2xl bg-[#FAFAFA] text-[#212121] ring-1 ring-zinc-100",children:s.jsx(Se,{className:"size-6 text-[#F57C00]"})}),e[33]=q):q=e[33];let J;e[34]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Pickup Address"}),e[34]=J):J=e[34];let h;e[35]!==t.pickup_location.address?(h=s.jsx("p",{className:"mt-1 text-sm font-bold leading-relaxed text-[#212121]",children:t.pickup_location.address}),e[35]=t.pickup_location.address,e[36]=h):h=e[36];let u;e[37]!==t.pickup_location.google_maps_url?(u=t.pickup_location.google_maps_url&&s.jsxs("a",{href:t.pickup_location.google_maps_url,target:"_blank",rel:"noopener noreferrer",className:"group mt-3 inline-flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-[#F57C00] transition-colors hover:text-[#E65100]",children:["Open in Google Maps ",s.jsx(Ee,{className:"size-3 transition-transform group-hover:translate-x-1"})]}),e[37]=t.pickup_location.google_maps_url,e[38]=u):u=e[38];let g;e[39]!==h||e[40]!==u?(g=s.jsxs("div",{className:"flex items-start gap-5",children:[q,s.jsxs("div",{className:"flex-1 min-w-0",children:[J,h,u]})]}),e[39]=h,e[40]=u,e[41]=g):g=e[41];let b;e[42]!==f||e[43]!==g?(b=s.jsxs("div",{className:"grid gap-8 p-6 md:grid-cols-2 md:p-8",children:[f,g]}),e[42]=f,e[43]=g,e[44]=b):b=e[44];let j;e[45]!==p||e[46]!==b?(j=s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"overflow-hidden rounded-3xl bg-white shadow-xl shadow-zinc-200/50 ring-1 ring-zinc-200",children:[p,b]})}),e[45]=p,e[46]=b,e[47]=j):j=e[47];let W;e[48]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsxs("h3",{className:"mb-8 flex items-center gap-3 text-sm font-black uppercase tracking-widest text-[#9E9E9E]",children:[s.jsx(Re,{className:"size-5 text-[#F57C00]"}),"Order Journey"]}),e[48]=W):W=e[48];let K;e[49]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx("div",{className:"absolute left-[15px] top-2 h-[calc(100%-24px)] w-[2px] bg-zinc-100"}),e[49]=K):K=e[49];let N;e[50]!==O?(N=xe.map((l,pe)=>{const oe=pe<O,se=pe===O;return s.jsxs("div",{className:"relative flex gap-6",children:[s.jsx("div",{className:`relative z-10 flex h-8 w-8 shrink-0 items-center justify-center rounded-full transition-all duration-500 ${oe?"bg-[#2E7D32] text-white":se?"bg-[#F57C00] text-white shadow-lg shadow-[#F57C00]/30 scale-125":"bg-white text-zinc-300 ring-4 ring-[#FAFAFA]"}`,children:oe?s.jsx(he,{className:"size-5"}):se?s.jsx("div",{className:"h-2 w-2 rounded-full bg-white animate-pulse"}):s.jsx(Ie,{className:"size-4"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-base font-black ${oe||se?"text-[#212121]":"text-[#9E9E9E]"}`,children:l.label}),s.jsx("p",{className:"mt-1 text-sm leading-relaxed text-[#757575]",children:l.desc}),se&&s.jsx("div",{className:"mt-2 inline-flex items-center gap-2 rounded-full bg-[#FFF3E0] px-3 py-1 text-[10px] font-black uppercase text-[#E65100]",children:"In Progress"})]})]},l.key)}),e[50]=O,e[51]=N):N=e[51];let v;e[52]!==N?(v=s.jsxs("section",{className:"rounded-3xl bg-white p-8 shadow-xl shadow-zinc-200/50 ring-1 ring-zinc-200",children:[W,s.jsxs("div",{className:"relative space-y-12",children:[K,N]})]}),e[52]=N,e[53]=v):v=e[53];let _;e[54]!==i||e[55]!==t.disapproval_reason||e[56]!==t.receipt_status||e[57]!==t.receipt_url||e[58]!==ie||e[59]!==ae?(_=ie&&s.jsxs("section",{className:`rounded-3xl p-8 shadow-xl transition-all duration-500 ${t.receipt_status==="disapproved"?"bg-[#FFEBEE] ring-2 ring-[#C62828]/20":"bg-white ring-1 ring-zinc-200"}`,children:[s.jsxs("h3",{className:`mb-4 flex items-center gap-3 text-sm font-black uppercase tracking-widest ${t.receipt_status==="disapproved"?"text-[#C62828]":"text-[#9E9E9E]"}`,children:[s.jsx(Fe,{className:"size-5"}),"Payment Verification"]}),t.receipt_status==="disapproved"&&s.jsxs("div",{className:"mb-6 rounded-2xl bg-white/50 p-4 text-[#C62828] shadow-sm",children:[s.jsx("p",{className:"text-xs font-black uppercase tracking-widest opacity-60",children:"Rejection Reason:"}),s.jsx("p",{className:"mt-1 text-sm font-bold",children:t.disapproval_reason})]}),s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("div",{className:"group relative flex flex-col items-center justify-center rounded-3xl border-2 border-dashed border-zinc-200 bg-[#FAFAFA] p-8 transition-all hover:border-[#F57C00] hover:bg-white text-center",children:[s.jsx("div",{className:"mb-4 rounded-full bg-white p-4 shadow-sm group-hover:scale-110 group-hover:text-[#F57C00] transition-all",children:s.jsx(ze,{className:"size-8 text-zinc-300"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-base font-black text-[#212121]",children:i.data.receipt?i.data.receipt.name:"Choose receipt file"}),s.jsx("p",{className:"mt-1 text-xs text-[#9E9E9E]",children:"High resolution images preferred (Max 5MB)"})]}),s.jsx("input",{id:"receipt-tracking",type:"file",className:"absolute inset-0 cursor-pointer opacity-0",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:l=>i.setData("receipt",l.target.files?.[0]??null)})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[t.receipt_url&&s.jsxs("a",{href:t.receipt_url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-xs font-bold text-[#757575] hover:text-[#F57C00] transition-colors",children:[s.jsx(Ce,{className:"size-4"}),"View Previously Uploaded Receipt"]}),s.jsx(me,{className:"h-14 w-full rounded-2xl bg-[#F57C00] text-base font-black text-white shadow-lg shadow-[#F57C00]/20 hover:bg-[#E65100] active:scale-[0.98] disabled:opacity-50 transition-all",disabled:i.processing||!i.data.receipt,onClick:ae,children:i.processing?"Uploading...":"Submit Receipt for Verification"}),s.jsx(ke,{message:i.errors.receipt})]})]})]}),e[54]=i,e[55]=t.disapproval_reason,e[56]=t.receipt_status,e[57]=t.receipt_url,e[58]=ie,e[59]=ae,e[60]=_):_=e[60];let k;e[61]!==v||e[62]!==_?(k=s.jsxs("div",{className:"space-y-8",children:[v,_]}),e[61]=v,e[62]=_,e[63]=k):k=e[63];let w;e[64]!==t.items.length?(w=s.jsxs("h4",{className:"mb-6 flex items-center justify-between text-sm font-black uppercase tracking-widest text-[#9E9E9E]",children:["Your Order",s.jsxs("span",{className:"rounded-full bg-[#FAFAFA] px-2 py-1 text-[10px] ring-1 ring-zinc-100",children:[t.items.length," items"]})]}),e[64]=t.items.length,e[65]=w):w=e[65];let y;e[66]!==t.items?(y=t.items.map($e),e[66]=t.items,e[67]=y):y=e[67];let Q;e[68]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx("span",{className:"text-sm font-bold text-[#757575]",children:"Grand Total"}),e[68]=Q):Q=e[68];let E;e[69]!==t.total_amount?(E=ge(t.total_amount),e[69]=t.total_amount,e[70]=E):E=e[70];let F;e[71]!==E?(F=s.jsx("div",{className:"mt-6 border-t border-zinc-100 pt-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[Q,s.jsx("span",{className:"text-xl font-black text-[#F57C00]",children:E})]})}),e[71]=E,e[72]=F):F=e[72];let z;e[73]!==y||e[74]!==F?(z=s.jsxs("div",{className:"space-y-4",children:[y,F]}),e[73]=y,e[74]=F,e[75]=z):z=e[75];let C;e[76]!==w||e[77]!==z?(C=s.jsx("aside",{className:"space-y-6",children:s.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-lg shadow-zinc-200/50 ring-1 ring-zinc-200",children:[w,z]})}),e[76]=w,e[77]=z,e[78]=C):C=e[78];let A;e[79]!==j||e[80]!==k||e[81]!==C?(A=s.jsxs("div",{className:"grid gap-8 lg:grid-cols-[1fr_340px]",children:[j,k,C]}),e[79]=j,e[80]=k,e[81]=C,e[82]=A):A=e[82];const ne=`/orders/${t.tracking_token}/confirmation`;let X;e[83]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsxs(me,{variant:"ghost",className:"h-12 rounded-xl px-8 font-bold text-[#757575] hover:bg-zinc-100",children:[s.jsx(ue,{className:"mr-2 size-4"}),"View Order Confirmation"]}),e[83]=X):X=e[83];let S;e[84]!==ne?(S=s.jsx(de,{href:ne,children:X}),e[84]=ne,e[85]=S):S=e[85];let Z;e[86]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsxs("div",{className:"flex items-center gap-4 text-[#9E9E9E]",children:[s.jsx("div",{className:"h-[1px] w-12 bg-zinc-200"}),s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:"Premium Cafe Experience"}),s.jsx("div",{className:"h-[1px] w-12 bg-zinc-200"})]}),e[86]=Z):Z=e[86];let R;e[87]!==S?(R=s.jsxs("div",{className:"mt-12 flex flex-col items-center justify-center gap-6 border-t border-zinc-100 pt-12",children:[S,Z]}),e[87]=S,e[88]=R):R=e[88];let P;e[89]!==d||e[90]!==A||e[91]!==R?(P=s.jsxs("main",{className:"mx-auto max-w-4xl px-4 pt-12",children:[d,A,R]}),e[89]=d,e[90]=A,e[91]=R,e[92]=P):P=e[92];let I;e[93]!==o||e[94]!==P?(I=s.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] text-[#212121] selection:bg-[#F57C00]/20 pb-20",children:[o,P]}),e[93]=o,e[94]=P,e[95]=I):I=e[95];let ee;return e[96]!==I||e[97]!==c?(ee=s.jsxs(s.Fragment,{children:[c,I]}),e[96]=I,e[97]=c,e[98]=ee):ee=e[98],ee}function $e(a){return s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-12 w-12 shrink-0 overflow-hidden rounded-xl border border-zinc-100 bg-[#FAFAFA]",children:a.image_url?s.jsx("img",{src:a.image_url,alt:a.name??"Item",className:"h-full w-full object-cover",loading:"lazy"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center bg-zinc-50 text-[8px] font-black uppercase text-zinc-300",children:"P"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"truncate text-sm font-bold text-[#212121]",children:a.name}),s.jsxs("p",{className:"text-xs font-medium text-[#757575]",children:["x",a.quantity]})]})]}),s.jsx("span",{className:"text-sm font-black text-[#212121]",children:ge(a.line_total)})]},a.id)}export{Qe as default};
