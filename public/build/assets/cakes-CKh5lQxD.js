import{c as Pe,u as De,r as ze,a as Ee,j as s,H as Te,L as ke}from"./app-B1ifENt7.js";import{U as Ae,C as Be,B as Ie}from"./business-footer-DVRlSteu.js";import{I as W}from"./input-error-idKhxiu_.js";import{B as z}from"./createLucideIcon-DBjBHpes.js";import{I as Z}from"./input-ZZWHhI5M.js";import{C as Xe}from"./cake-slice-BbBMVFzm.js";import{I as $e}from"./image-plus-deTB6hLW.js";import{C as Re}from"./check-Do_Ao3Q-.js";import{S as we}from"./shopping-bag-CO6CMm6i.js";import{P as Le}from"./phone-z0qs20aY.js";import{C as Me}from"./chevron-left-PoAThYv8.js";import{C as ye}from"./chevron-right-BOcL-KTG.js";/* empty css            */const Oe=[{id:1,title:"Choose Cakes",hint:"Select one or more packages"},{id:2,title:"Your Details",hint:"Contact and date"},{id:3,title:"Review",hint:"Confirm and submit"}];function ee(i){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(i)}function Se(){const i=new Date;return new Date(i.getTime()-i.getTimezoneOffset()*6e4).toISOString().slice(0,10)}function cs(i){const e=Pe.c(113),{packages:j,customerToken:be,customerPrefill:ve,business:ge}=i,{flash:o}=De().props,[n,m]=ze.useState(1);let se;e[0]===Symbol.for("react.memo_cache_sentinel")?(se={},e[0]=se):se=e[0];const[v,J]=ze.useState(se),[te,d]=ze.useState(null),je=ve.name??"",Ne=ve.phone??"";let ae;e[1]===Symbol.for("react.memo_cache_sentinel")?(ae=Se(),e[1]=ae):ae=e[1];let ie;e[2]===Symbol.for("react.memo_cache_sentinel")?(ie=[],e[2]=ie):ie=e[2];let ne;e[3]!==be||e[4]!==je||e[5]!==Ne?(ne={customer_token:be,name:je,phone:Ne,needed_date:ae,special_instructions:"",items:ie},e[3]=be,e[4]=je,e[5]=Ne,e[6]=ne):ne=e[6];const a=Ee(ne);let k;e[7]!==v?(k=Object.entries(v),e[7]=v,e[8]=k):k=e[8];let re;e[9]!==j||e[10]!==k?(re=k.map(ce=>{const[q,K]=ce,N=Number(q),Q=j.find(H=>H.id===N);return Q?{cake_package_id:N,quantity:1,size:K.size,servings:K.servings,specification:K.specification,package:Q,line_total:Q.price}:null}).filter(We),e[9]=j,e[10]=k,e[11]=re):re=e[11];const c=re;let w,y,S,p,C,u,_,F,f,h,b,P,g,D;if(e[12]!==o||e[13]!==a||e[14]!==v||e[15]!==j||e[16]!==c||e[17]!==n){const ce=c.reduce(Ge,0);let q;e[32]===Symbol.for("react.memo_cache_sentinel")?(q=t=>{d(null),J(r=>{if(r[t]){const l={...r};return delete l[t],l}return{...r,[t]:{size:"",servings:1,specification:""}}})},e[32]=q):q=e[32];const K=q;let N;e[33]===Symbol.for("react.memo_cache_sentinel")?(N=(t,r)=>{d(null),J(l=>{const V=l[t]??{size:"",servings:1,specification:""};return{...l,[t]:{...V,size:r}}})},e[33]=N):N=e[33];const Q=N;let H;e[34]===Symbol.for("react.memo_cache_sentinel")?(H=(t,r)=>{d(null),J(l=>{const V=l[t]??{size:"",servings:1,specification:""};return{...l,[t]:{...V,servings:Number.isFinite(r)&&r>0?r:1}}})},e[34]=H):H=e[34];const Ce=H;let de;e[35]===Symbol.for("react.memo_cache_sentinel")?(de=(t,r)=>{d(null),J(l=>{const V=l[t]??{size:"",servings:1,specification:""};return{...l,[t]:{...V,specification:r}}})},e[35]=de):de=e[35];const _e=de;let oe;e[36]!==c?(oe=()=>c.length===0?(d("Select at least one cake package before continuing."),!1):c.some(Ue)?(d("Enter size and servings for each selected cake package."),!1):!0,e[36]=c,e[37]=oe):oe=e[37];const x=oe;let me;e[38]!==a.data.name||e[39]!==a.data.needed_date||e[40]!==a.data.phone?(me=()=>a.data.name.trim()===""||a.data.phone.trim()===""||a.data.needed_date.trim()===""?(d("Enter your name, phone, and needed date before continuing."),!1):!0,e[38]=a.data.name,e[39]=a.data.needed_date,e[40]=a.data.phone,e[41]=me):me=e[41];const U=me;let xe;e[42]!==x?(xe=()=>{if(!x()){m(1);return}d(null),m(2)},e[42]=x,e[43]=xe):xe=e[43],y=xe;let pe;e[44]!==U||e[45]!==x?(pe=()=>{if(!x()){m(1);return}if(!U()){m(2);return}d(null),m(3)},e[44]=U,e[45]=x,e[46]=pe):pe=e[46],w=pe;let ue;e[47]!==a||e[48]!==c||e[49]!==U||e[50]!==x?(ue=t=>{if(t.preventDefault(),!x()){m(1);return}if(!U()){m(2);return}d(null),a.transform(r=>({...r,items:c.map(He)})),a.post("/cakes/preorders",{preserveScroll:!0,onSuccess:()=>{J({}),m(1),d(null),a.reset("special_instructions")}})},e[47]=a,e[48]=c,e[49]=U,e[50]=x,e[51]=ue):ue=e[51];const Fe=ue;e[52]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(Te,{title:"Cake Preordering"}),e[52]=g):g=e[52],P="min-h-screen bg-[#FAFAFA] px-4 py-8 text-[#212121] md:px-8 md:py-10",F="mx-auto w-full max-w-6xl space-y-6";let fe;e[53]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-[#F57C00]",children:"Special Services"}),s.jsx("h1",{className:"mt-2 text-3xl font-black tracking-tight",children:"Cake Preordering Wizard"}),s.jsx("p",{className:"mt-2 max-w-2xl text-sm text-zinc-600",children:"Complete the steps to select cakes, enter details, and submit your preorder."})]}),e[53]=fe):fe=e[53];let he;e[54]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(z,{asChild:!0,variant:"outline",className:"rounded-xl border-zinc-200",children:s.jsx(ke,{href:"/",children:"Main Menu"})}),e[54]=he):he=e[54],e[55]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx("header",{className:"rounded-3xl bg-white p-6 shadow-sm ring-1 ring-zinc-200 md:p-8",children:s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[fe,s.jsxs("div",{className:"flex gap-2",children:[he,s.jsx(z,{asChild:!0,className:"rounded-xl bg-[#212121] text-white hover:bg-black",children:s.jsx(ke,{href:"/catering",children:"Catering"})})]})]})}),e[55]=f):f=e[55],e[56]!==o?(h=o?.success&&s.jsx("div",{className:"rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm font-semibold text-emerald-700",children:o.success}),e[56]=o,e[57]=h):h=e[57],e[58]!==o?(b=o?.error&&s.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm font-semibold text-red-700",children:o.error}),e[58]=o,e[59]=b):b=e[59],D="space-y-6 rounded-3xl bg-white p-6 shadow-sm ring-1 ring-zinc-200 md:p-8",S=Fe;let G;e[60]!==n?(G=Oe.map(t=>{const r=t.id===n,l=t.id<n;return s.jsxs("article",{className:`rounded-2xl border px-4 py-3 ${r?"border-[#F57C00] bg-[#FFF3E0]":l?"border-emerald-200 bg-emerald-50":"border-zinc-200 bg-zinc-50"}`,children:[s.jsxs("p",{className:"text-[11px] font-black uppercase tracking-widest text-zinc-500",children:["Step ",t.id]}),s.jsx("p",{className:"mt-1 text-sm font-black text-zinc-900",children:t.title}),s.jsx("p",{className:"mt-1 text-xs text-zinc-600",children:t.hint})]},t.id)}),e[60]=n,e[61]=G):G=e[61],e[62]!==G?(p=s.jsx("section",{className:"grid gap-2 md:grid-cols-3",children:G}),e[62]=G,e[63]=p):p=e[63],C=n===1&&s.jsxs("section",{className:"space-y-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-500",children:[s.jsx(Xe,{className:"size-4 text-[#F57C00]"}),"Step 1: Choose Packages"]}),s.jsxs("div",{className:"space-y-4",children:[j.length===0&&s.jsx("p",{className:"rounded-2xl border border-dashed border-zinc-300 bg-zinc-50 px-4 py-6 text-center text-sm text-zinc-500",children:"No cake packages are available right now."}),j.map(t=>{const r=v[t.id];return s.jsxs("article",{className:"overflow-hidden rounded-2xl border border-zinc-200 bg-zinc-50/50",children:[s.jsxs("div",{className:"relative aspect-[16/9] overflow-hidden bg-zinc-100",children:[t.image_url?s.jsx("img",{src:t.image_url,alt:t.name,className:"h-full w-full object-cover",loading:"lazy"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center text-zinc-400",children:s.jsx($e,{className:"size-8"})}),r&&s.jsxs("span",{className:"absolute right-2 top-2 inline-flex items-center gap-1 rounded-full bg-emerald-600 px-2 py-1 text-[11px] font-black text-white",children:[s.jsx(Re,{className:"size-3"}),"Selected"]})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-black text-zinc-900",children:t.name}),t.description?s.jsx("p",{className:"mt-1 text-sm text-zinc-600",children:t.description}):s.jsx("p",{className:"mt-1 text-sm text-zinc-500",children:"Custom cake package for special occasions."})]}),s.jsx("span",{className:"rounded-full bg-[#FFF3E0] px-3 py-1 text-xs font-black text-[#F57C00]",children:ee(t.price)})]}),s.jsx("div",{className:"mt-4",children:s.jsx(z,{type:"button",variant:r?"outline":"default",className:r?"rounded-xl border-zinc-300":"rounded-xl bg-[#212121] text-white hover:bg-black",onClick:()=>K(t.id),children:r?"Remove Package":"Add Package"})}),r&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",htmlFor:`size-${t.id}`,children:"Cake Size"}),s.jsx(Z,{id:`size-${t.id}`,value:r.size,onChange:l=>Q(t.id,l.target.value),className:"mt-2 h-10 rounded-xl border-zinc-200",placeholder:"Small, Medium, Large, 2kg..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",htmlFor:`servings-${t.id}`,children:"Servings"}),s.jsx(Z,{id:`servings-${t.id}`,type:"number",min:1,value:r.servings,onChange:l=>Ce(t.id,Number(l.target.value)),className:"mt-2 h-10 rounded-xl border-zinc-200"})]})]}),s.jsx("label",{className:"mt-3 block text-xs font-black uppercase tracking-widest text-zinc-500",htmlFor:`spec-${t.id}`,children:"Item Specification"}),s.jsx("textarea",{id:`spec-${t.id}`,value:r.specification,onChange:l=>_e(t.id,l.target.value),rows:3,placeholder:"Flavor, writing on cake, color, size notes...",className:"mt-2 w-full rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm focus:border-[#F57C00] focus:outline-none focus:ring-2 focus:ring-[#F57C00]/15"})]})]})]},t.id)})]}),s.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-zinc-50 p-4",children:[s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Current Selection"}),s.jsxs("div",{className:"mt-3 space-y-2",children:[c.length===0&&s.jsx("p",{className:"text-sm text-zinc-500",children:"No cake packages selected yet."}),c.map(qe)]}),s.jsx("div",{className:"mt-4 border-t border-zinc-200 pt-3",children:s.jsxs("div",{className:"flex items-center justify-between text-sm font-black",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:ee(ce)})]})}),s.jsx(W,{message:a.errors.items})]})]}),e[64]!==a||e[65]!==n?(u=n===2&&s.jsxs("section",{className:"space-y-5",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-500",children:[s.jsx(we,{className:"size-4 text-[#F57C00]"}),"Step 2: Your Details"]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"mb-2 flex items-center gap-2 text-xs font-black uppercase tracking-widest text-zinc-500",htmlFor:"name",children:[s.jsx(Ae,{className:"size-3.5"}),"Full Name"]}),s.jsx(Z,{id:"name",value:a.data.name,onChange:t=>a.setData("name",t.target.value),className:"h-11 rounded-xl border-zinc-200",placeholder:"Your full name"}),s.jsx(W,{message:a.errors.name})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-2 flex items-center gap-2 text-xs font-black uppercase tracking-widest text-zinc-500",htmlFor:"phone",children:[s.jsx(Le,{className:"size-3.5"}),"Phone Number"]}),s.jsx(Z,{id:"phone",value:a.data.phone,onChange:t=>a.setData("phone",t.target.value),className:"h-11 rounded-xl border-zinc-200",placeholder:"+2519XXXXXXXX"}),s.jsx(W,{message:a.errors.phone})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-2 flex items-center gap-2 text-xs font-black uppercase tracking-widest text-zinc-500",htmlFor:"needed_date",children:[s.jsx(Be,{className:"size-3.5"}),"Needed Date"]}),s.jsx(Z,{id:"needed_date",type:"date",min:Se(),value:a.data.needed_date,onChange:t=>a.setData("needed_date",t.target.value),className:"h-11 rounded-xl border-zinc-200"}),s.jsx(W,{message:a.errors.needed_date})]}),s.jsxs("div",{children:[s.jsx("label",{className:"mb-2 text-xs font-black uppercase tracking-widest text-zinc-500",htmlFor:"special_instructions",children:"General Notes"}),s.jsx("textarea",{id:"special_instructions",rows:4,value:a.data.special_instructions,onChange:t=>a.setData("special_instructions",t.target.value),className:"w-full rounded-xl border border-zinc-200 px-3 py-2 text-sm focus:border-[#F57C00] focus:outline-none focus:ring-2 focus:ring-[#F57C00]/15",placeholder:"Delivery timing, pickup preferences, extra instructions..."}),s.jsx(W,{message:a.errors.special_instructions})]})]}),e[64]=a,e[65]=n,e[66]=u):u=e[66],_=n===3&&s.jsxs("section",{className:"space-y-5",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-500",children:[s.jsx(we,{className:"size-4 text-[#F57C00]"}),"Step 3: Review and Submit"]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("article",{className:"rounded-2xl border border-zinc-200 bg-zinc-50 p-4",children:[s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Contact"}),s.jsx("p",{className:"mt-2 text-sm font-semibold text-zinc-800",children:a.data.name||"N/A"}),s.jsx("p",{className:"text-sm text-zinc-700",children:a.data.phone||"N/A"}),s.jsxs("p",{className:"mt-2 text-sm text-zinc-700",children:["Needed: ",a.data.needed_date||"N/A"]})]}),s.jsxs("article",{className:"rounded-2xl border border-zinc-200 bg-zinc-50 p-4",children:[s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Notes"}),s.jsx("p",{className:"mt-2 text-sm text-zinc-700",children:a.data.special_instructions.trim()!==""?a.data.special_instructions:"No additional notes."})]})]}),s.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-zinc-50 p-4",children:[s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Selected Cakes"}),s.jsx("div",{className:"mt-3 space-y-2",children:c.map(Ye)}),s.jsx("div",{className:"mt-4 border-t border-zinc-200 pt-3",children:s.jsxs("div",{className:"flex items-center justify-between text-sm font-black",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:ee(ce)})]})}),s.jsx(W,{message:a.errors.items})]})]}),e[12]=o,e[13]=a,e[14]=v,e[15]=j,e[16]=c,e[17]=n,e[18]=w,e[19]=y,e[20]=S,e[21]=p,e[22]=C,e[23]=u,e[24]=_,e[25]=F,e[26]=f,e[27]=h,e[28]=b,e[29]=P,e[30]=g,e[31]=D}else w=e[18],y=e[19],S=e[20],p=e[21],C=e[22],u=e[23],_=e[24],F=e[25],f=e[26],h=e[27],b=e[28],P=e[29],g=e[30],D=e[31];let E;e[67]!==te?(E=te&&s.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm font-semibold text-red-700",children:te}),e[67]=te,e[68]=E):E=e[68];let T;e[69]!==n?(T=n>1&&s.jsxs(z,{type:"button",variant:"outline",className:"rounded-xl border-zinc-200",onClick:()=>{d(null),m(n===3?2:1)},children:[s.jsx(Me,{className:"mr-1 size-4"}),"Back"]}),e[69]=n,e[70]=T):T=e[70];let A;e[71]!==T?(A=s.jsx("div",{children:T}),e[71]=T,e[72]=A):A=e[72];let B;e[73]!==y||e[74]!==n?(B=n===1&&s.jsxs(z,{type:"button",className:"rounded-xl bg-[#212121] text-white hover:bg-black",onClick:y,children:["Next",s.jsx(ye,{className:"ml-1 size-4"})]}),e[73]=y,e[74]=n,e[75]=B):B=e[75];let I;e[76]!==w||e[77]!==n?(I=n===2&&s.jsxs(z,{type:"button",className:"rounded-xl bg-[#212121] text-white hover:bg-black",onClick:w,children:["Next",s.jsx(ye,{className:"ml-1 size-4"})]}),e[76]=w,e[77]=n,e[78]=I):I=e[78];let X;e[79]!==a.processing||e[80]!==n?(X=n===3&&s.jsx(z,{type:"submit",className:"rounded-xl bg-[#F57C00] text-white hover:bg-[#E65100]",disabled:a.processing,children:a.processing?"Submitting Preorder...":"Submit Cake Preorder"}),e[79]=a.processing,e[80]=n,e[81]=X):X=e[81];let $;e[82]!==B||e[83]!==I||e[84]!==X?($=s.jsxs("div",{className:"ml-auto flex gap-2",children:[B,I,X]}),e[82]=B,e[83]=I,e[84]=X,e[85]=$):$=e[85];let R;e[86]!==A||e[87]!==$?(R=s.jsxs("section",{className:"flex flex-wrap items-center justify-between gap-3 border-t border-zinc-200 pt-4",children:[A,$]}),e[86]=A,e[87]=$,e[88]=R):R=e[88];let L;e[89]!==S||e[90]!==p||e[91]!==C||e[92]!==u||e[93]!==_||e[94]!==E||e[95]!==R||e[96]!==D?(L=s.jsxs("form",{className:D,onSubmit:S,children:[p,C,u,_,E,R]}),e[89]=S,e[90]=p,e[91]=C,e[92]=u,e[93]=_,e[94]=E,e[95]=R,e[96]=D,e[97]=L):L=e[97];let M;e[98]!==ge?(M=s.jsx(Ie,{business:ge}),e[98]=ge,e[99]=M):M=e[99];let O;e[100]!==F||e[101]!==f||e[102]!==h||e[103]!==b||e[104]!==L||e[105]!==M?(O=s.jsxs("div",{className:F,children:[f,h,b,L,M]}),e[100]=F,e[101]=f,e[102]=h,e[103]=b,e[104]=L,e[105]=M,e[106]=O):O=e[106];let Y;e[107]!==P||e[108]!==O?(Y=s.jsx("div",{className:P,children:O}),e[107]=P,e[108]=O,e[109]=Y):Y=e[109];let le;return e[110]!==g||e[111]!==Y?(le=s.jsxs(s.Fragment,{children:[g,Y]}),e[110]=g,e[111]=Y,e[112]=le):le=e[112],le}function Ye(i){return s.jsxs("div",{className:"flex items-start justify-between gap-3 text-sm",children:[s.jsxs("span",{className:"font-semibold text-zinc-700",children:[i.package.name,s.jsxs("span",{className:"block text-xs font-medium text-zinc-500",children:["Size: ",i.size||"N/A"," | Servings: ",i.servings]}),i.specification.trim()!==""&&s.jsxs("span",{className:"block text-xs font-medium text-zinc-500",children:["Spec: ",i.specification]})]}),s.jsx("span",{className:"font-black text-zinc-900",children:ee(i.line_total)})]},i.cake_package_id)}function qe(i){return s.jsxs("div",{className:"flex items-start justify-between gap-3 text-sm",children:[s.jsxs("span",{className:"font-semibold text-zinc-700",children:[i.package.name,s.jsxs("span",{className:"block text-xs font-medium text-zinc-500",children:["Size: ",i.size||"N/A"," | Servings: ",i.servings]})]}),s.jsx("span",{className:"font-black text-zinc-900",children:ee(i.line_total)})]},i.cake_package_id)}function He(i){return{cake_package_id:i.cake_package_id,quantity:1,size:i.size.trim(),servings:i.servings,specification:i.specification}}function Ue(i){return i.size.trim()===""||i.servings<1}function Ge(i,e){return i+e.line_total}function We(i){return!!i}export{cs as default};
