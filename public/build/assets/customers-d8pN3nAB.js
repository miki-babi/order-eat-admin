import{c as rt,r as ct,u as Ke,j as t,b as Le,H as nt,L as tt}from"./app-XqpdAWDD.js";import{B as d}from"./badge-CpEQKSDS.js";import{b as it,B as se}from"./createLucideIcon-Th9lyFeF.js";import{d as ee,C as te,a as Ge,b as Qe}from"./card-CPjgo7Oe.js";import{a as ot,g as dt,e as mt,f as xt,D as ht}from"./dialog-CuhBw1X-.js";import{I as pt}from"./input-ClbFjSrq.js";import{L as Je}from"./label-3SozHmtE.js";import{U as Xe,A as ft,C as Ye}from"./app-layout-D_pGfZ7x.js";import{C as gt}from"./clock-3-_iTPwsfY.js";import{S as ut}from"./store-CTrG6B4i.js";import{P as bt}from"./package-FpVNxr4-.js";import{M as jt}from"./map-pin-DbIr1Deq.js";import{T as Nt}from"./trending-up-D3o2GKeV.js";import{S as Ze}from"./search-DiFoPkFw.js";import{C as et}from"./chevron-left-CuIJRqV4.js";/* empty css            */import"./index-Day_2gAs.js";import"./index-C3EPQDSK.js";import"./index-C8o9R0tm.js";const wt=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],yt=it("MessageSquare",wt),vt=[{title:"Customers",href:"/staff/customers"}];function st(s){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(s)}function zt(s){return s==="telegram"?"Telegram":s==="table"?"Table":"Web"}function _t(s){return s==="telegram"?"bg-sky-50 text-sky-700 ring-1 ring-sky-200":s==="table"?"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200":"bg-zinc-100 text-zinc-700 ring-1 ring-zinc-200"}function ts(s){const e=rt.c(152),{customers:i,selectedCustomer:r,filters:at,smsTemplates:m,smsPlaceholders:ae,summary:h}=s;let le;e[0]===Symbol.for("react.memo_cache_sentinel")?(le=[],e[0]=le):le=e[0];const[c,Ie]=ct.useState(le),Me=at.search??"";let re;e[1]!==Me?(re={search:Me},e[1]=Me,e[2]=re):re=e[2];const o=Ke(re);let ce;e[3]===Symbol.for("react.memo_cache_sentinel")?(ce=[],e[3]=ce):ce=e[3];let ne;e[4]===Symbol.for("react.memo_cache_sentinel")?(ne={customer_ids:ce,message:""},e[4]=ne):ne=e[4];const n=Ke(ne);let Pe;e:{if(i.data.length===0){Pe=!1;break e}let a;if(e[5]!==i.data||e[6]!==c){let l;e[8]!==c?(l=x=>c.includes(x.id),e[8]=c,e[9]=l):l=e[9],a=i.data.every(l),e[5]=i.data,e[6]=c,e[7]=a}else a=e[7];Pe=a}const p=Pe;let ie;e[10]===Symbol.for("react.memo_cache_sentinel")?(ie=a=>{Ie(l=>l.includes(a)?l.filter(x=>x!==a):[...l,a])},e[10]=ie):ie=e[10];const lt=ie;let oe;e[11]!==i.data||e[12]!==p?(oe=()=>{if(p){Ie(a=>a.filter(l=>!i.data.some(x=>x.id===l)));return}Ie(a=>[...new Set([...a,...i.data.map(Mt)])])},e[11]=i.data,e[12]=p,e[13]=oe):oe=e[13];const Ae=oe;let de;e[14]!==o.data?(de=a=>{a.preventDefault(),Le.get("/staff/customers",o.data,{preserveState:!0,replace:!0})},e[14]=o.data,e[15]=de):de=e[15];const He=de;let me;e[16]!==c||e[17]!==n?(me=a=>{a.preventDefault(),n.transform(l=>({...l,customer_ids:c})),n.post("/staff/customers/sms",{preserveScroll:!0,onSuccess:()=>{n.reset("message")}})},e[16]=c,e[17]=n,e[18]=me):me=e[18];const Oe=me;let xe;e[19]!==o.data.search?(xe=()=>{if(typeof window>"u"){Le.get("/staff/customers",{search:o.data.search||void 0},{preserveState:!0,preserveScroll:!0,replace:!0});return}const a=new URLSearchParams(window.location.search);a.delete("customer_id");const l=a.toString(),x=l.length>0?`/staff/customers?${l}`:"/staff/customers";Le.get(x,{},{preserveState:!0,preserveScroll:!0,replace:!0})},e[19]=o.data.search,e[20]=xe):xe=e[20];const Re=xe;let he;e[21]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(nt,{title:"Customers"}),e[21]=he):he=e[21];let pe;e[22]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-[#9E9E9E]",children:"Total Customers"}),e[22]=pe):pe=e[22];let f;e[23]!==h.total_customers?(f=h.total_customers.toLocaleString(),e[23]=h.total_customers,e[24]=f):f=e[24];let g;e[25]!==f?(g=t.jsxs("div",{children:[pe,t.jsx("h3",{className:"mt-2 text-3xl font-black text-[#212121]",children:f})]}),e[25]=f,e[26]=g):g=e[26];let fe;e[27]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("div",{className:"rounded-2xl bg-[#F57C00]/10 p-3 text-[#F57C00]",children:t.jsx(Xe,{className:"size-6"})}),e[27]=fe):fe=e[27];let u;e[28]!==g?(u=t.jsx(ee,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:t.jsx(te,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[g,fe]})})}),e[28]=g,e[29]=u):u=e[29];let ge;e[30]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-emerald-500",children:"Active (With Orders)"}),e[30]=ge):ge=e[30];let b;e[31]!==h.active_customers?(b=h.active_customers.toLocaleString(),e[31]=h.active_customers,e[32]=b):b=e[32];let j;e[33]!==b?(j=t.jsxs("div",{children:[ge,t.jsx("h3",{className:"mt-2 text-3xl font-black text-[#212121]",children:b})]}),e[33]=b,e[34]=j):j=e[34];let ue;e[35]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("div",{className:"rounded-2xl bg-emerald-50 p-3 text-emerald-500",children:t.jsx(Nt,{className:"size-6"})}),e[35]=ue):ue=e[35];let N;e[36]!==j?(N=t.jsx(ee,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:t.jsx(te,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[j,ue]})})}),e[36]=j,e[37]=N):N=e[37];let w;e[38]!==u||e[39]!==N?(w=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u,N]}),e[38]=u,e[39]=N,e[40]=w):w=e[40];let be;e[41]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(Ge,{className:"border-b border-zinc-100 bg-zinc-50/50 py-4",children:t.jsxs(Qe,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[t.jsx(Ze,{className:"size-4 text-[#F57C00]"}),"Search Database"]})}),e[41]=be):be=e[41];let je;e[42]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(Je,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",htmlFor:"search",children:"Name or Phone Number"}),e[42]=je):je=e[42];let Ne;e[43]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(Ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-zinc-400"}),e[43]=Ne):Ne=e[43];let y;e[44]!==o?(y=a=>o.setData("search",a.target.value),e[44]=o,e[45]=y):y=e[45];let v;e[46]!==o.data.search||e[47]!==y?(v=t.jsxs("div",{className:"min-w-[300px] flex-1",children:[je,t.jsxs("div",{className:"relative mt-1.5",children:[Ne,t.jsx(pt,{id:"search",className:"h-11 pl-10 rounded-xl border-zinc-200 focus:ring-[#F57C00] transition-all",value:o.data.search,onChange:y,placeholder:"Enter name, phone, @username, or Telegram ID..."})]})]}),e[46]=o.data.search,e[47]=y,e[48]=v):v=e[48];let we,ye;e[49]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(se,{type:"submit",className:"h-11 px-8 rounded-xl bg-[#F57C00] font-black shadow-lg shadow-[#F57C00]/20 hover:bg-[#E65100]",children:"Apply Filter"}),ye=t.jsx(se,{type:"button",variant:"outline",className:"h-11 rounded-xl font-bold border-zinc-200",onClick:It,children:"Reset"}),e[49]=we,e[50]=ye):(we=e[49],ye=e[50]);let z;e[51]!==He||e[52]!==v?(z=t.jsxs(ee,{className:"border-none shadow-md ring-1 ring-zinc-200",children:[be,t.jsx(te,{className:"pt-6",children:t.jsxs("form",{className:"flex flex-wrap items-end gap-3",onSubmit:He,children:[v,we,ye]})})]}),e[51]=He,e[52]=v,e[53]=z):z=e[53];let ve;e[54]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsxs(Qe,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[t.jsx(Xe,{className:"size-4 text-[#F57C00]"}),"Customer Directory"]}),e[54]=ve):ve=e[54];let _;e[55]!==c.length?(_=c.length>0&&t.jsxs(d,{className:"bg-[#F57C00] font-black uppercase tracking-tighter shadow-none",children:[c.length," Selected"]}),e[55]=c.length,e[56]=_):_=e[56];let k;e[57]!==_?(k=t.jsx(Ge,{className:"border-b border-zinc-100 bg-white py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[ve,_]})}),e[57]=_,e[58]=k):k=e[58];let C;e[59]!==p||e[60]!==Ae?(C=t.jsx("th",{className:"w-12 px-6 py-4",children:t.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-zinc-300 text-[#F57C00] focus:ring-[#F57C00]/20",checked:p,onChange:Ae})}),e[59]=p,e[60]=Ae,e[61]=C):C=e[61];let ze,_e,ke,Ce;e[62]===Symbol.for("react.memo_cache_sentinel")?(ze=t.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Customer Info"}),_e=t.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Order Stats"}),ke=t.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Volume"}),Ce=t.jsx("th",{className:"px-6 py-4 text-right text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Actions"}),e[62]=ze,e[63]=_e,e[64]=ke,e[65]=Ce):(ze=e[62],_e=e[63],ke=e[64],Ce=e[65]);let S;e[66]!==C?(S=t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-zinc-100 bg-zinc-50/50",children:[C,ze,_e,ke,Ce]})}),e[66]=C,e[67]=S):S=e[67];let F;if(e[68]!==i.data||e[69]!==o.data.search||e[70]!==c){let a;e[72]!==o.data.search||e[73]!==c?(a=l=>t.jsxs("tr",{className:"group border-b border-zinc-50 transition-colors hover:bg-zinc-50/50 last:border-0",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-zinc-300 text-[#F57C00] focus:ring-[#F57C00]/20",checked:c.includes(l.id),onChange:()=>lt(l.id)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-zinc-100 text-xs font-black text-zinc-500 transition-colors group-hover:bg-[#F57C00]/10 group-hover:text-[#F57C00]",children:l.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-[#212121]",children:l.name}),t.jsx("p",{className:"text-xs font-medium text-zinc-500",children:l.phone}),l.telegram_username&&t.jsxs("p",{className:"text-[11px] font-semibold text-sky-600",children:["@",l.telegram_username]}),l.telegram_id&&t.jsxs("p",{className:"text-[10px] font-semibold text-zinc-400",children:["TG ID: ",l.telegram_id]})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(d,{className:"bg-zinc-100 font-bold text-zinc-700 shadow-none ring-1 ring-zinc-200",children:[l.orders_count," Orders"]})})}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("p",{className:"font-black text-[#212121]",children:st(l.total_spent)}),l.last_order_at&&t.jsxs("p",{className:"text-[10px] font-medium text-zinc-400",children:["Last: ",l.last_order_at]})]}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsx(se,{variant:"ghost",size:"sm",asChild:!0,className:"h-8 rounded-lg font-bold text-[#F57C00] hover:bg-[#F57C00]/10",children:t.jsx(tt,{href:`/staff/customers?search=${encodeURIComponent(o.data.search??"")}&customer_id=${l.id}`,preserveState:!0,preserveScroll:!0,children:"View History"})})})]},l.id),e[72]=o.data.search,e[73]=c,e[74]=a):a=e[74],F=i.data.map(a),e[68]=i.data,e[69]=o.data.search,e[70]=c,e[71]=F}else F=e[71];let E;e[75]!==F?(E=t.jsx("tbody",{children:F}),e[75]=F,e[76]=E):E=e[76];let D;e[77]!==S||e[78]!==E?(D=t.jsx(te,{className:"p-0",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left",children:[S,E]})})}),e[77]=S,e[78]=E,e[79]=D):D=e[79];let T;e[80]!==k||e[81]!==D?(T=t.jsxs(ee,{className:"overflow-hidden border-none shadow-md ring-1 ring-zinc-200",children:[k,D]}),e[80]=k,e[81]=D,e[82]=T):T=e[82];let Se;e[83]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx(Ge,{className:"border-b border-zinc-100 bg-zinc-50/50 py-4",children:t.jsxs(Qe,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[t.jsx(yt,{className:"size-4 text-[#F57C00]"}),"Outreach & Promotions"]})}),e[83]=Se):Se=e[83];let Fe;e[84]===Symbol.for("react.memo_cache_sentinel")?(Fe=t.jsx(Je,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Message Templates"}),e[84]=Fe):Fe=e[84];let L;e[85]!==m.length?(L=t.jsxs("div",{className:"flex items-center justify-between",children:[Fe,t.jsx(d,{variant:"outline",className:"text-[10px] font-bold text-[#F57C00] border-[#F57C00]/30",children:m.length})]}),e[85]=m.length,e[86]=L):L=e[86];let I;e[87]!==n||e[88]!==m?(I=t.jsx("div",{className:"grid gap-2",children:m.length>0?t.jsx("div",{className:"flex flex-col gap-2",children:m.map(a=>t.jsxs("button",{type:"button",onClick:()=>n.setData("message",a.body),className:"flex flex-col rounded-xl border border-zinc-100 bg-zinc-50/50 p-3 text-left transition-all hover:border-[#F57C00]/30 hover:bg-white hover:shadow-sm",children:[t.jsx("span",{className:"text-xs font-black text-[#212121]",children:a.label}),t.jsx("span",{className:"mt-1 line-clamp-1 text-[10px] text-zinc-500",children:a.body})]},a.key))}):t.jsx("div",{className:"rounded-xl border border-dashed border-zinc-200 py-6 text-center",children:t.jsx("p",{className:"text-[10px] font-bold text-zinc-400",children:"No templates defined"})})}),e[87]=n,e[88]=m,e[89]=I):I=e[89];let M;e[90]!==L||e[91]!==I?(M=t.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[L,I]}),e[90]=L,e[91]=I,e[92]=M):M=e[92];let Ee;e[93]===Symbol.for("react.memo_cache_sentinel")?(Ee=t.jsx(Je,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Compose Message"}),e[93]=Ee):Ee=e[93];const Be=`text-[10px] font-black tracking-widest ${n.data.message.length>400?"text-rose-500":"text-zinc-400"}`;let P;e[94]!==n.data.message.length||e[95]!==Be?(P=t.jsxs("div",{className:"flex items-center justify-between",children:[Ee,t.jsxs("span",{className:Be,children:[n.data.message.length,"/480 Characters"]})]}),e[94]=n.data.message.length,e[95]=Be,e[96]=P):P=e[96];let A;e[97]!==n?(A=a=>n.setData("message",a.target.value),e[97]=n,e[98]=A):A=e[98];let H;e[99]!==n.data.message||e[100]!==A?(H=t.jsx("textarea",{id:"message",className:"min-h-[160px] w-full rounded-2xl border border-zinc-200 bg-white p-4 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-[#F57C00]/20 transition-all placeholder:text-zinc-300",value:n.data.message,maxLength:480,onChange:A,placeholder:"Enter your promotional or notification message here..."}),e[99]=n.data.message,e[100]=A,e[101]=H):H=e[101];let O;e[102]!==c.length?(O=t.jsx("div",{className:"absolute bottom-4 right-4 flex h-10 w-10 items-center justify-center rounded-full bg-zinc-50 text-[10px] font-black text-zinc-400 ring-1 ring-zinc-200",children:c.length}),e[102]=c.length,e[103]=O):O=e[103];let R;e[104]!==H||e[105]!==O?(R=t.jsxs("div",{className:"relative",children:[H,O]}),e[104]=H,e[105]=O,e[106]=R):R=e[106];let B;e[107]!==ae?(B=ae.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1.5",children:ae.map(Lt)}),e[107]=ae,e[108]=B):B=e[108];let De;e[109]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter",children:"Click to use placeholders in your message"}),e[109]=De):De=e[109];let $;e[110]!==B?($=t.jsxs("div",{className:"flex-1 space-y-1",children:[B,De]}),e[110]=B,e[111]=$):$=e[111];const $e=n.processing||c.length===0||!n.data.message,Ue=n.processing?"Delivering...":`Send to ${c.length} Recipients`;let U;e[112]!==$e||e[113]!==Ue?(U=t.jsx(se,{type:"submit",disabled:$e,className:"h-12 px-10 rounded-xl bg-[#212121] font-black shadow-lg shadow-zinc-200 hover:bg-[#F57C00] transition-colors",children:Ue}),e[112]=$e,e[113]=Ue,e[114]=U):U=e[114];let q;e[115]!==$||e[116]!==U?(q=t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[$,U]}),e[115]=$,e[116]=U,e[117]=q):q=e[117];let V;e[118]!==P||e[119]!==R||e[120]!==q?(V=t.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[P,R,q]}),e[118]=P,e[119]=R,e[120]=q,e[121]=V):V=e[121];let W;e[122]!==Oe||e[123]!==M||e[124]!==V?(W=t.jsxs(ee,{className:"border-none shadow-lg ring-1 ring-zinc-200",children:[Se,t.jsx(te,{className:"pt-6",children:t.jsxs("form",{className:"grid gap-8 lg:grid-cols-12",onSubmit:Oe,children:[M,V]})})]}),e[122]=Oe,e[123]=M,e[124]=V,e[125]=W):W=e[125];const qe=!!r;let G;e[126]!==Re?(G=a=>{a||Re()},e[126]=Re,e[127]=G):G=e[127];let Q;e[128]!==r?(Q=r?t.jsxs(ot,{className:"max-h-[92vh] overflow-y-auto border-none p-0 sm:max-w-6xl",children:[t.jsxs(dt,{className:"sr-only",children:[t.jsx(mt,{children:"Customer History"}),t.jsx(xt,{children:"Detailed order history, source channels, top branch, and ordering habits."})]}),t.jsx("div",{className:"border-b border-zinc-100 bg-[#212121] px-6 py-6 text-white md:px-8",children:t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-40",children:"Client Dossier"}),t.jsx("h3",{className:"mt-2 text-2xl font-black",children:r.name}),t.jsx("p",{className:"mt-1 font-bold text-[#F57C00] opacity-80",children:r.phone}),r.telegram_username&&t.jsxs("p",{className:"mt-1 text-xs font-semibold text-sky-200",children:["@",r.telegram_username]}),r.telegram_id&&t.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-zinc-300",children:["TG ID: ",r.telegram_id]})]}),t.jsx("div",{className:"text-right",children:t.jsxs(d,{className:"border border-white/20 bg-white/10 font-black uppercase tracking-widest text-white shadow-none backdrop-blur-md",children:[r.source_summary.total," Total Orders"]})})]})}),t.jsxs("div",{className:"space-y-6 p-4 md:p-8",children:[t.jsxs("div",{className:"grid gap-4 lg:grid-cols-4",children:[t.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:"Source Mix"}),t.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[t.jsxs(d,{className:"bg-zinc-100 text-zinc-700 ring-1 ring-zinc-200 shadow-none",children:["Web ",r.source_summary.web]}),t.jsxs(d,{className:"bg-sky-50 text-sky-700 ring-1 ring-sky-200 shadow-none",children:["Telegram ",r.source_summary.telegram]}),t.jsxs(d,{className:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 shadow-none",children:["Table ",r.source_summary.table]})]})]}),t.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[t.jsxs("p",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[t.jsx(gt,{className:"size-3.5"}),"Frequent Time"]}),t.jsx("div",{className:"mt-3 space-y-1.5",children:r.top_order_hours.length>0?r.top_order_hours.map(Tt):t.jsx("p",{className:"text-xs font-semibold text-zinc-400",children:"No ordering pattern yet"})}),r.top_order_weekdays.length>0&&t.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:r.top_order_weekdays.map(Dt)})]}),t.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[t.jsxs("p",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[t.jsx(ut,{className:"size-3.5"}),"Top Branch"]}),t.jsx("p",{className:"mt-3 text-sm font-black text-[#212121]",children:r.top_branch?.pickup_location??"N/A"}),r.top_branch&&t.jsxs("p",{className:"text-xs font-semibold text-zinc-500",children:[r.top_branch.orders_count," order(s)"]}),r.branch_summary.length>1&&t.jsx("div",{className:"mt-3 space-y-1",children:r.branch_summary.slice(1).map(Et)})]}),t.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[t.jsxs("p",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[t.jsx(bt,{className:"size-3.5"}),"Most Ordered"]}),t.jsx("div",{className:"mt-3 space-y-1.5",children:r.top_items.length>0?r.top_items.slice(0,4).map(Ft):t.jsx("p",{className:"text-xs font-semibold text-zinc-400",children:"No items yet"})})]})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"mb-3 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[t.jsx(jt,{className:"size-3.5"}),"Recent Orders (20)"]}),r.orders.length===0?t.jsx("div",{className:"py-12 text-center",children:t.jsx("p",{className:"text-zinc-400 font-bold uppercase tracking-widest text-xs",children:"No order history found for this account"})}):t.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.orders.map(Ct)})]})]})]}):null,e[128]=r,e[129]=Q):Q=e[129];let J;e[130]!==qe||e[131]!==G||e[132]!==Q?(J=t.jsx(ht,{open:qe,onOpenChange:G,children:Q}),e[130]=qe,e[131]=G,e[132]=Q,e[133]=J):J=e[133];const Ve=i.from??0,We=i.to??0;let K;e[134]!==i.total||e[135]!==Ve||e[136]!==We?(K=t.jsxs("p",{className:"text-muted-foreground text-sm",children:["Showing ",Ve," to ",We," of ",i.total," customer(s)"]}),e[134]=i.total,e[135]=Ve,e[136]=We,e[137]=K):K=e[137];let X;e[138]!==i.links?(X=i.links.map(kt),e[138]=i.links,e[139]=X):X=e[139];let Y;e[140]!==X?(Y=t.jsx("div",{className:"flex items-center gap-2",children:X}),e[140]=X,e[141]=Y):Y=e[141];let Z;e[142]!==K||e[143]!==Y?(Z=t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[K,Y]}),e[142]=K,e[143]=Y,e[144]=Z):Z=e[144];let Te;return e[145]!==w||e[146]!==z||e[147]!==T||e[148]!==W||e[149]!==J||e[150]!==Z?(Te=t.jsxs(ft,{breadcrumbs:vt,children:[he,t.jsxs("div",{className:"space-y-8 bg-zinc-50/50 p-6 min-h-screen",children:[w,z,T,W,J,Z]})]}),e[145]=w,e[146]=z,e[147]=T,e[148]=W,e[149]=J,e[150]=Z,e[151]=Te):Te=e[151],Te}function kt(s){return t.jsx(se,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,asChild:!!s.url,className:`h-11 rounded-xl px-4 font-bold transition-all ${s.active?"bg-[#F57C00] text-white shadow-lg shadow-[#F57C00]/20":"text-zinc-500 border-zinc-200"}`,children:s.url?t.jsx(tt,{href:s.url,preserveState:!0,preserveScroll:!0,children:s.label.includes("Previous")?t.jsx(et,{className:"size-4"}):s.label.includes("Next")?t.jsx(Ye,{className:"size-4"}):t.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})}):t.jsx("span",{children:s.label.includes("Previous")?t.jsx(et,{className:"size-4"}):s.label.includes("Next")?t.jsx(Ye,{className:"size-4"}):t.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})})},s.label)}function Ct(s){return t.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-50/50 p-5 transition-all hover:bg-white hover:shadow-md hover:ring-1 hover:ring-[#F57C00]/20",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:"Order Ref"}),t.jsxs("p",{className:"text-sm font-black text-[#212121]",children:["#",s.id]})]}),t.jsx("p",{className:"text-lg font-black text-[#F57C00]",children:st(s.total_amount)})]}),t.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[t.jsx(d,{className:`rounded-lg px-2 py-0.5 text-[9px] font-black uppercase tracking-widest shadow-none ${_t(s.source_channel)}`,children:zt(s.source_channel)}),t.jsx(d,{className:"rounded-lg bg-white px-2 py-0.5 text-[9px] font-black uppercase tracking-widest text-zinc-500 ring-1 ring-zinc-200 shadow-none",children:s.order_status}),t.jsxs(d,{className:"rounded-lg bg-white px-2 py-0.5 text-[9px] font-black uppercase tracking-widest text-[#F57C00] ring-1 ring-[#F57C00]/20 shadow-none",children:["Receipt ",s.receipt_status]})]}),t.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"Location"}),t.jsx("p",{className:"truncate text-[11px] font-bold text-zinc-600",children:s.pickup_location??"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"Date"}),t.jsx("p",{className:"text-[11px] font-bold text-zinc-600",children:s.pickup_date??"N/A"})]})]}),s.table_name&&t.jsxs("p",{className:"mt-2 text-[10px] font-semibold text-emerald-700",children:["Table: ",s.table_name]}),t.jsxs("div",{className:"mt-3",children:[t.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"Items"}),s.items.length>0?t.jsx("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:s.items.map(St)}):t.jsx("p",{className:"mt-1 text-[11px] font-semibold text-zinc-400",children:"No item details"})]})]},s.id)}function St(s){return t.jsxs(d,{className:"bg-white text-zinc-600 ring-1 ring-zinc-200 shadow-none",children:[s.quantity,"x ",s.name??"Unknown"]},s.id)}function Ft(s){return t.jsxs("p",{className:"text-xs font-semibold text-zinc-700",children:[s.name," ",t.jsxs("span",{className:"text-zinc-400",children:["x",s.quantity]})]},s.name)}function Et(s){return t.jsxs("p",{className:"text-xs font-medium text-zinc-500",children:[s.pickup_location,": ",s.orders_count]},s.pickup_location)}function Dt(s){return t.jsxs(d,{className:"bg-zinc-100 text-zinc-600 ring-1 ring-zinc-200 shadow-none",children:[s.weekday," ",s.orders_count]},s.weekday)}function Tt(s){return t.jsxs("p",{className:"text-xs font-semibold text-zinc-700",children:[s.label," ",t.jsxs("span",{className:"text-zinc-400",children:["(",s.orders_count,")"]})]},s.hour)}function Lt(s){return t.jsx(d,{variant:"outline",className:"cursor-help rounded-lg border-zinc-200 bg-white px-2 py-0.5 text-[9px] font-bold text-zinc-500 hover:text-[#F57C00]",title:s.description,children:`{${s.token}}`},s.token)}function It(){return Le.get("/staff/customers")}function Mt(s){return s.id}export{ts as default};
