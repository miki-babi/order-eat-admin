import{c as _t,r as vt,u as xt,j as t,b as Ge,H as yt,L as ut}from"./app-CG6OGoCR.js";import{B as d}from"./badge-DiU1zVvd.js";import{b as wt,B as he}from"./createLucideIcon-DoozJVY3.js";import{d as xe,C as pe,a as ot,b as dt}from"./card-C7rdScFt.js";import{a as zt,g as kt,e as Ct,f as St,D as Et}from"./dialog-BDfrFqmQ.js";import{I as mt}from"./input-Ihttg1GE.js";import{L as me}from"./label-D4UVs7LC.js";import{U as pt,A as Ft,C as ht}from"./app-layout-Dm5T_JG0.js";import{C as Dt}from"./clock-3-CXD7f5gY.js";import{S as Tt}from"./store--Hfxq455.js";import{P as Lt}from"./package-CDH_7ikH.js";import{M as Mt}from"./map-pin-CNW3to94.js";import{T as It}from"./trending-up-CILjSPrK.js";import{S as gt}from"./search-B25Ts9VF.js";import{C as ft}from"./chevron-left-DCiZXyTC.js";/* empty css            */import"./index-_suEDysK.js";import"./index-D3nUJHML.js";import"./index-C8o9R0tm.js";const Pt=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Ot=wt("MessageSquare",Pt),$t=[{title:"Customers",href:"/staff/customers"}];function bt(s){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(s)}function Bt(s){return s==="telegram"?"Telegram":s==="table"?"Table":"Web"}function Rt(s){return s==="telegram"?"bg-sky-50 text-sky-700 ring-1 ring-sky-200":s==="table"?"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200":"bg-zinc-100 text-zinc-700 ring-1 ring-zinc-200"}function fs(s){const e=_t.c(189),{customers:i,selectedCustomer:n,filters:jt,smsTemplates:x,smsPlaceholders:ge,summary:f}=s;let fe;e[0]===Symbol.for("react.memo_cache_sentinel")?(fe=[],e[0]=fe):fe=e[0];const[c,Qe]=vt.useState(fe),Je=jt.search??"";let ue;e[1]!==Je?(ue={search:Je},e[1]=Je,e[2]=ue):ue=e[2];const o=xt(ue);let be;e[3]===Symbol.for("react.memo_cache_sentinel")?(be=[],e[3]=be):be=e[3];let je;e[4]===Symbol.for("react.memo_cache_sentinel")?(je={customer_ids:be,platform:"sms",message:"",telegram_button_text:"",telegram_button_url:""},e[4]=je):je=e[4];const a=xt(je),m=a.data.platform==="telegram",p=m?2e3:480;let Ne;e[5]!==m||e[6]!==a.data.telegram_button_text||e[7]!==a.data.telegram_button_url?(Ne=m&&a.data.telegram_button_text.trim()===""!=(a.data.telegram_button_url.trim()===""),e[5]=m,e[6]=a.data.telegram_button_text,e[7]=a.data.telegram_button_url,e[8]=Ne):Ne=e[8];const h=Ne;let Ke;e:{if(i.data.length===0){Ke=!1;break e}let l;if(e[9]!==i.data||e[10]!==c){let r;e[12]!==c?(r=g=>c.includes(g.id),e[12]=c,e[13]=r):r=e[13],l=i.data.every(r),e[9]=i.data,e[10]=c,e[11]=l}else l=e[11];Ke=l}const u=Ke;let _e;e[14]===Symbol.for("react.memo_cache_sentinel")?(_e=l=>{Qe(r=>r.includes(l)?r.filter(g=>g!==l):[...r,l])},e[14]=_e):_e=e[14];const Nt=_e;let ve;e[15]!==i.data||e[16]!==u?(ve=()=>{if(u){Qe(l=>l.filter(r=>!i.data.some(g=>g.id===r)));return}Qe(l=>[...new Set([...l,...i.data.map(Kt)])])},e[15]=i.data,e[16]=u,e[17]=ve):ve=e[17];const Xe=ve;let ye;e[18]!==o.data?(ye=l=>{l.preventDefault(),Ge.get("/staff/customers",o.data,{preserveState:!0,replace:!0})},e[18]=o.data,e[19]=ye):ye=e[19];const Ye=ye;let we;e[20]!==c||e[21]!==a?(we=l=>{l.preventDefault(),a.transform(r=>({...r,customer_ids:c})),a.post("/staff/customers/sms",{preserveScroll:!0,onSuccess:()=>{a.reset("message","telegram_button_text","telegram_button_url")}})},e[20]=c,e[21]=a,e[22]=we):we=e[22];const Ze=we;let ze;e[23]!==o.data.search?(ze=()=>{if(typeof window>"u"){Ge.get("/staff/customers",{search:o.data.search||void 0},{preserveState:!0,preserveScroll:!0,replace:!0});return}const l=new URLSearchParams(window.location.search);l.delete("customer_id");const r=l.toString(),g=r.length>0?`/staff/customers?${r}`:"/staff/customers";Ge.get(g,{},{preserveState:!0,preserveScroll:!0,replace:!0})},e[23]=o.data.search,e[24]=ze):ze=e[24];const et=ze;let ke;e[25]===Symbol.for("react.memo_cache_sentinel")?(ke=t.jsx(yt,{title:"Customers"}),e[25]=ke):ke=e[25];let Ce;e[26]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-[#9E9E9E]",children:"Total Customers"}),e[26]=Ce):Ce=e[26];let b;e[27]!==f.total_customers?(b=f.total_customers.toLocaleString(),e[27]=f.total_customers,e[28]=b):b=e[28];let j;e[29]!==b?(j=t.jsxs("div",{children:[Ce,t.jsx("h3",{className:"mt-2 text-3xl font-black text-[#212121]",children:b})]}),e[29]=b,e[30]=j):j=e[30];let Se;e[31]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx("div",{className:"rounded-2xl bg-[#F57C00]/10 p-3 text-[#F57C00]",children:t.jsx(pt,{className:"size-6"})}),e[31]=Se):Se=e[31];let N;e[32]!==j?(N=t.jsx(xe,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:t.jsx(pe,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[j,Se]})})}),e[32]=j,e[33]=N):N=e[33];let Ee;e[34]===Symbol.for("react.memo_cache_sentinel")?(Ee=t.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-emerald-500",children:"Active (With Orders)"}),e[34]=Ee):Ee=e[34];let _;e[35]!==f.active_customers?(_=f.active_customers.toLocaleString(),e[35]=f.active_customers,e[36]=_):_=e[36];let v;e[37]!==_?(v=t.jsxs("div",{children:[Ee,t.jsx("h3",{className:"mt-2 text-3xl font-black text-[#212121]",children:_})]}),e[37]=_,e[38]=v):v=e[38];let Fe;e[39]===Symbol.for("react.memo_cache_sentinel")?(Fe=t.jsx("div",{className:"rounded-2xl bg-emerald-50 p-3 text-emerald-500",children:t.jsx(It,{className:"size-6"})}),e[39]=Fe):Fe=e[39];let y;e[40]!==v?(y=t.jsx(xe,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:t.jsx(pe,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[v,Fe]})})}),e[40]=v,e[41]=y):y=e[41];let w;e[42]!==N||e[43]!==y?(w=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[N,y]}),e[42]=N,e[43]=y,e[44]=w):w=e[44];let De;e[45]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsx(ot,{className:"border-b border-zinc-100 bg-zinc-50/50 py-4",children:t.jsxs(dt,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[t.jsx(gt,{className:"size-4 text-[#F57C00]"}),"Search Database"]})}),e[45]=De):De=e[45];let Te;e[46]===Symbol.for("react.memo_cache_sentinel")?(Te=t.jsx(me,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",htmlFor:"search",children:"Name or Phone Number"}),e[46]=Te):Te=e[46];let Le;e[47]===Symbol.for("react.memo_cache_sentinel")?(Le=t.jsx(gt,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-zinc-400"}),e[47]=Le):Le=e[47];let z;e[48]!==o?(z=l=>o.setData("search",l.target.value),e[48]=o,e[49]=z):z=e[49];let k;e[50]!==o.data.search||e[51]!==z?(k=t.jsxs("div",{className:"min-w-[300px] flex-1",children:[Te,t.jsxs("div",{className:"relative mt-1.5",children:[Le,t.jsx(mt,{id:"search",className:"h-11 pl-10 rounded-xl border-zinc-200 focus:ring-[#F57C00] transition-all",value:o.data.search,onChange:z,placeholder:"Enter name, phone, @username, or Telegram ID..."})]})]}),e[50]=o.data.search,e[51]=z,e[52]=k):k=e[52];let Me,Ie;e[53]===Symbol.for("react.memo_cache_sentinel")?(Me=t.jsx(he,{type:"submit",className:"h-11 px-8 rounded-xl bg-[#F57C00] font-black shadow-lg shadow-[#F57C00]/20 hover:bg-[#E65100]",children:"Apply Filter"}),Ie=t.jsx(he,{type:"button",variant:"outline",className:"h-11 rounded-xl font-bold border-zinc-200",onClick:Jt,children:"Reset"}),e[53]=Me,e[54]=Ie):(Me=e[53],Ie=e[54]);let C;e[55]!==Ye||e[56]!==k?(C=t.jsxs(xe,{className:"border-none shadow-md ring-1 ring-zinc-200",children:[De,t.jsx(pe,{className:"pt-6",children:t.jsxs("form",{className:"flex flex-wrap items-end gap-3",onSubmit:Ye,children:[k,Me,Ie]})})]}),e[55]=Ye,e[56]=k,e[57]=C):C=e[57];let Pe;e[58]===Symbol.for("react.memo_cache_sentinel")?(Pe=t.jsxs(dt,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[t.jsx(pt,{className:"size-4 text-[#F57C00]"}),"Customer Directory"]}),e[58]=Pe):Pe=e[58];let S;e[59]!==c.length?(S=c.length>0&&t.jsxs(d,{className:"bg-[#F57C00] font-black uppercase tracking-tighter shadow-none",children:[c.length," Selected"]}),e[59]=c.length,e[60]=S):S=e[60];let E;e[61]!==S?(E=t.jsx(ot,{className:"border-b border-zinc-100 bg-white py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[Pe,S]})}),e[61]=S,e[62]=E):E=e[62];let F;e[63]!==u||e[64]!==Xe?(F=t.jsx("th",{className:"w-12 px-6 py-4",children:t.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-zinc-300 text-[#F57C00] focus:ring-[#F57C00]/20",checked:u,onChange:Xe})}),e[63]=u,e[64]=Xe,e[65]=F):F=e[65];let Oe,$e,Be,Re;e[66]===Symbol.for("react.memo_cache_sentinel")?(Oe=t.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Customer Info"}),$e=t.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Order Stats"}),Be=t.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Volume"}),Re=t.jsx("th",{className:"px-6 py-4 text-right text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Actions"}),e[66]=Oe,e[67]=$e,e[68]=Be,e[69]=Re):(Oe=e[66],$e=e[67],Be=e[68],Re=e[69]);let D;e[70]!==F?(D=t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-zinc-100 bg-zinc-50/50",children:[F,Oe,$e,Be,Re]})}),e[70]=F,e[71]=D):D=e[71];let T;if(e[72]!==i.data||e[73]!==o.data.search||e[74]!==c){let l;e[76]!==o.data.search||e[77]!==c?(l=r=>t.jsxs("tr",{className:"group border-b border-zinc-50 transition-colors hover:bg-zinc-50/50 last:border-0",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-zinc-300 text-[#F57C00] focus:ring-[#F57C00]/20",checked:c.includes(r.id),onChange:()=>Nt(r.id)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-zinc-100 text-xs font-black text-zinc-500 transition-colors group-hover:bg-[#F57C00]/10 group-hover:text-[#F57C00]",children:r.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-[#212121]",children:r.name}),t.jsx("p",{className:"text-xs font-medium text-zinc-500",children:r.phone}),r.telegram_username&&t.jsxs("p",{className:"text-[11px] font-semibold text-sky-600",children:["@",r.telegram_username]}),r.telegram_id&&t.jsxs("p",{className:"text-[10px] font-semibold text-zinc-400",children:["TG ID: ",r.telegram_id]})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(d,{className:"bg-zinc-100 font-bold text-zinc-700 shadow-none ring-1 ring-zinc-200",children:[r.orders_count," Orders"]})})}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("p",{className:"font-black text-[#212121]",children:bt(r.total_spent)}),r.last_order_at&&t.jsxs("p",{className:"text-[10px] font-medium text-zinc-400",children:["Last: ",r.last_order_at]})]}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsx(he,{variant:"ghost",size:"sm",asChild:!0,className:"h-8 rounded-lg font-bold text-[#F57C00] hover:bg-[#F57C00]/10",children:t.jsx(ut,{href:`/staff/customers?search=${encodeURIComponent(o.data.search??"")}&customer_id=${r.id}`,preserveState:!0,preserveScroll:!0,children:"View History"})})})]},r.id),e[76]=o.data.search,e[77]=c,e[78]=l):l=e[78],T=i.data.map(l),e[72]=i.data,e[73]=o.data.search,e[74]=c,e[75]=T}else T=e[75];let L;e[79]!==T?(L=t.jsx("tbody",{children:T}),e[79]=T,e[80]=L):L=e[80];let M;e[81]!==D||e[82]!==L?(M=t.jsx(pe,{className:"p-0",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left",children:[D,L]})})}),e[81]=D,e[82]=L,e[83]=M):M=e[83];let I;e[84]!==E||e[85]!==M?(I=t.jsxs(xe,{className:"overflow-hidden border-none shadow-md ring-1 ring-zinc-200",children:[E,M]}),e[84]=E,e[85]=M,e[86]=I):I=e[86];let Ae;e[87]===Symbol.for("react.memo_cache_sentinel")?(Ae=t.jsx(ot,{className:"border-b border-zinc-100 bg-zinc-50/50 py-4",children:t.jsxs(dt,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-[#212121]",children:[t.jsx(Ot,{className:"size-4 text-[#F57C00]"}),"Outreach & Promotions"]})}),e[87]=Ae):Ae=e[87];let He;e[88]===Symbol.for("react.memo_cache_sentinel")?(He=t.jsx(me,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Message Templates"}),e[88]=He):He=e[88];let P;e[89]!==x.length?(P=t.jsxs("div",{className:"flex items-center justify-between",children:[He,t.jsx(d,{variant:"outline",className:"text-[10px] font-bold text-[#F57C00] border-[#F57C00]/30",children:x.length})]}),e[89]=x.length,e[90]=P):P=e[90];let O;e[91]!==a||e[92]!==x?(O=t.jsx("div",{className:"grid gap-2",children:x.length>0?t.jsx("div",{className:"flex flex-col gap-2",children:x.map(l=>t.jsxs("button",{type:"button",onClick:()=>a.setData("message",l.body),className:"flex flex-col rounded-xl border border-zinc-100 bg-zinc-50/50 p-3 text-left transition-all hover:border-[#F57C00]/30 hover:bg-white hover:shadow-sm",children:[t.jsx("span",{className:"text-xs font-black text-[#212121]",children:l.label}),t.jsx("span",{className:"mt-1 line-clamp-1 text-[10px] text-zinc-500",children:l.body})]},l.key))}):t.jsx("div",{className:"rounded-xl border border-dashed border-zinc-200 py-6 text-center",children:t.jsx("p",{className:"text-[10px] font-bold text-zinc-400",children:"No templates defined"})})}),e[91]=a,e[92]=x,e[93]=O):O=e[93];let $;e[94]!==P||e[95]!==O?($=t.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[P,O]}),e[94]=P,e[95]=O,e[96]=$):$=e[96];let Ue;e[97]===Symbol.for("react.memo_cache_sentinel")?(Ue=t.jsx(me,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Delivery Channel"}),e[97]=Ue):Ue=e[97];const tt=`rounded-lg px-4 py-1.5 text-xs font-black transition-colors ${a.data.platform==="sms"?"bg-[#212121] text-white":"text-zinc-600 hover:bg-zinc-50"}`;let B;e[98]!==a?(B=()=>{a.setData("platform","sms"),a.setData("telegram_button_text",""),a.setData("telegram_button_url","")},e[98]=a,e[99]=B):B=e[99];let R;e[100]!==tt||e[101]!==B?(R=t.jsx("button",{type:"button",className:tt,onClick:B,children:"SMS"}),e[100]=tt,e[101]=B,e[102]=R):R=e[102];const st=`rounded-lg px-4 py-1.5 text-xs font-black transition-colors ${a.data.platform==="telegram"?"bg-[#212121] text-white":"text-zinc-600 hover:bg-zinc-50"}`;let A;e[103]!==a?(A=()=>a.setData("platform","telegram"),e[103]=a,e[104]=A):A=e[104];let H;e[105]!==st||e[106]!==A?(H=t.jsx("button",{type:"button",className:st,onClick:A,children:"Telegram"}),e[105]=st,e[106]=A,e[107]=H):H=e[107];let U;e[108]!==R||e[109]!==H?(U=t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[Ue,t.jsxs("div",{className:"inline-flex rounded-xl border border-zinc-200 bg-white p-1",children:[R,H]})]}),e[108]=R,e[109]=H,e[110]=U):U=e[110];let qe;e[111]===Symbol.for("react.memo_cache_sentinel")?(qe=t.jsx(me,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Compose Message"}),e[111]=qe):qe=e[111];const at=`text-[10px] font-black tracking-widest ${a.data.message.length>Math.floor(p*.85)?"text-rose-500":"text-zinc-400"}`;let q;e[112]!==p||e[113]!==a.data.message.length||e[114]!==at?(q=t.jsxs("div",{className:"flex items-center justify-between",children:[qe,t.jsxs("span",{className:at,children:[a.data.message.length,"/",p," Characters"]})]}),e[112]=p,e[113]=a.data.message.length,e[114]=at,e[115]=q):q=e[115];let V;e[116]!==a?(V=l=>a.setData("message",l.target.value),e[116]=a,e[117]=V):V=e[117];const lt=m?"Enter your Telegram outreach message. Optional inline button fields are below.":"Enter your promotional or notification SMS here...";let W;e[118]!==p||e[119]!==a.data.message||e[120]!==V||e[121]!==lt?(W=t.jsx("textarea",{id:"message",className:"min-h-[160px] w-full rounded-2xl border border-zinc-200 bg-white p-4 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-[#F57C00]/20 transition-all placeholder:text-zinc-300",value:a.data.message,maxLength:p,onChange:V,placeholder:lt}),e[118]=p,e[119]=a.data.message,e[120]=V,e[121]=lt,e[122]=W):W=e[122];let G;e[123]!==c.length?(G=t.jsx("div",{className:"absolute bottom-4 right-4 flex h-10 w-10 items-center justify-center rounded-full bg-zinc-50 text-[10px] font-black text-zinc-400 ring-1 ring-zinc-200",children:c.length}),e[123]=c.length,e[124]=G):G=e[124];let Q;e[125]!==W||e[126]!==G?(Q=t.jsxs("div",{className:"relative",children:[W,G]}),e[125]=W,e[126]=G,e[127]=Q):Q=e[127];let J;e[128]!==h||e[129]!==m||e[130]!==a?(J=m&&t.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[t.jsxs("div",{className:"space-y-1.5",children:[t.jsx(me,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",htmlFor:"telegram_button_text",children:"Inline Button Text"}),t.jsx(mt,{id:"telegram_button_text",className:"h-11 rounded-xl border-zinc-200 focus:ring-[#F57C00]",value:a.data.telegram_button_text,maxLength:64,onChange:l=>a.setData("telegram_button_text",l.target.value),placeholder:"Open Offer"})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsx(me,{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",htmlFor:"telegram_button_url",children:"Inline Button URL"}),t.jsx(mt,{id:"telegram_button_url",type:"url",className:"h-11 rounded-xl border-zinc-200 focus:ring-[#F57C00]",value:a.data.telegram_button_url,onChange:l=>a.setData("telegram_button_url",l.target.value),placeholder:"https://example.com/promo"})]}),t.jsx("p",{className:`text-[10px] font-bold uppercase tracking-widest md:col-span-2 ${h?"text-rose-500":"text-zinc-400"}`,children:h?"Provide both button text and URL, or leave both empty.":"If provided, Telegram recipients will receive a primary inline button."})]}),e[128]=h,e[129]=m,e[130]=a,e[131]=J):J=e[131];let K;e[132]!==a.errors.message||e[133]!==a.errors.telegram_button_text||e[134]!==a.errors.telegram_button_url?(K=(a.errors.message||a.errors.telegram_button_text||a.errors.telegram_button_url)&&t.jsxs("div",{className:"space-y-1 rounded-xl border border-rose-200 bg-rose-50 px-3 py-2",children:[a.errors.message?t.jsx("p",{className:"text-[11px] font-bold text-rose-700",children:a.errors.message}):null,a.errors.telegram_button_text?t.jsx("p",{className:"text-[11px] font-bold text-rose-700",children:a.errors.telegram_button_text}):null,a.errors.telegram_button_url?t.jsx("p",{className:"text-[11px] font-bold text-rose-700",children:a.errors.telegram_button_url}):null]}),e[132]=a.errors.message,e[133]=a.errors.telegram_button_text,e[134]=a.errors.telegram_button_url,e[135]=K):K=e[135];let X;e[136]!==ge?(X=ge.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1.5",children:ge.map(Qt)}),e[136]=ge,e[137]=X):X=e[137];let Ve;e[138]===Symbol.for("react.memo_cache_sentinel")?(Ve=t.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter",children:"Click to use placeholders in your message"}),e[138]=Ve):Ve=e[138];let Y;e[139]!==X?(Y=t.jsxs("div",{className:"flex-1 space-y-1",children:[X,Ve]}),e[139]=X,e[140]=Y):Y=e[140];let Z;e[141]!==h||e[142]!==c.length||e[143]!==a.data.message||e[144]!==a.processing?(Z=a.processing||c.length===0||a.data.message.trim()===""||h,e[141]=h,e[142]=c.length,e[143]=a.data.message,e[144]=a.processing,e[145]=Z):Z=e[145];const rt=a.processing?"Delivering...":`Send ${m?"Telegram":"SMS"} to ${c.length} Recipients`;let ee;e[146]!==Z||e[147]!==rt?(ee=t.jsx(he,{type:"submit",disabled:Z,className:"h-12 px-10 rounded-xl bg-[#212121] font-black shadow-lg shadow-zinc-200 hover:bg-[#F57C00] transition-colors",children:rt}),e[146]=Z,e[147]=rt,e[148]=ee):ee=e[148];let te;e[149]!==Y||e[150]!==ee?(te=t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[Y,ee]}),e[149]=Y,e[150]=ee,e[151]=te):te=e[151];let se;e[152]!==U||e[153]!==q||e[154]!==Q||e[155]!==J||e[156]!==K||e[157]!==te?(se=t.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[U,q,Q,J,K,te]}),e[152]=U,e[153]=q,e[154]=Q,e[155]=J,e[156]=K,e[157]=te,e[158]=se):se=e[158];let ae;e[159]!==Ze||e[160]!==$||e[161]!==se?(ae=t.jsxs(xe,{className:"border-none shadow-lg ring-1 ring-zinc-200",children:[Ae,t.jsx(pe,{className:"pt-6",children:t.jsxs("form",{className:"grid gap-8 lg:grid-cols-12",onSubmit:Ze,children:[$,se]})})]}),e[159]=Ze,e[160]=$,e[161]=se,e[162]=ae):ae=e[162];const nt=!!n;let le;e[163]!==et?(le=l=>{l||et()},e[163]=et,e[164]=le):le=e[164];let re;e[165]!==n?(re=n?t.jsxs(zt,{className:"max-h-[92vh] overflow-y-auto border-none p-0 sm:max-w-6xl",children:[t.jsxs(kt,{className:"sr-only",children:[t.jsx(Ct,{children:"Customer History"}),t.jsx(St,{children:"Detailed order history, source channels, top branch, and ordering habits."})]}),t.jsx("div",{className:"border-b border-zinc-100 bg-[#212121] px-6 py-6 text-white md:px-8",children:t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-40",children:"Client Dossier"}),t.jsx("h3",{className:"mt-2 text-2xl font-black",children:n.name}),t.jsx("p",{className:"mt-1 font-bold text-[#F57C00] opacity-80",children:n.phone}),n.telegram_username&&t.jsxs("p",{className:"mt-1 text-xs font-semibold text-sky-200",children:["@",n.telegram_username]}),n.telegram_id&&t.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-zinc-300",children:["TG ID: ",n.telegram_id]})]}),t.jsx("div",{className:"text-right",children:t.jsxs(d,{className:"border border-white/20 bg-white/10 font-black uppercase tracking-widest text-white shadow-none backdrop-blur-md",children:[n.source_summary.total," Total Orders"]})})]})}),t.jsxs("div",{className:"space-y-6 p-4 md:p-8",children:[t.jsxs("div",{className:"grid gap-4 lg:grid-cols-4",children:[t.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:"Source Mix"}),t.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[t.jsxs(d,{className:"bg-zinc-100 text-zinc-700 ring-1 ring-zinc-200 shadow-none",children:["Web ",n.source_summary.web]}),t.jsxs(d,{className:"bg-sky-50 text-sky-700 ring-1 ring-sky-200 shadow-none",children:["Telegram ",n.source_summary.telegram]}),t.jsxs(d,{className:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 shadow-none",children:["Table ",n.source_summary.table]})]})]}),t.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[t.jsxs("p",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[t.jsx(Dt,{className:"size-3.5"}),"Frequent Time"]}),t.jsx("div",{className:"mt-3 space-y-1.5",children:n.top_order_hours.length>0?n.top_order_hours.map(Gt):t.jsx("p",{className:"text-xs font-semibold text-zinc-400",children:"No ordering pattern yet"})}),n.top_order_weekdays.length>0&&t.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:n.top_order_weekdays.map(Wt)})]}),t.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[t.jsxs("p",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[t.jsx(Tt,{className:"size-3.5"}),"Top Branch"]}),t.jsx("p",{className:"mt-3 text-sm font-black text-[#212121]",children:n.top_branch?.pickup_location??"N/A"}),n.top_branch&&t.jsxs("p",{className:"text-xs font-semibold text-zinc-500",children:[n.top_branch.orders_count," order(s)"]}),n.branch_summary.length>1&&t.jsx("div",{className:"mt-3 space-y-1",children:n.branch_summary.slice(1).map(Vt)})]}),t.jsxs("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4",children:[t.jsxs("p",{className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[t.jsx(Lt,{className:"size-3.5"}),"Most Ordered"]}),t.jsx("div",{className:"mt-3 space-y-1.5",children:n.top_items.length>0?n.top_items.slice(0,4).map(qt):t.jsx("p",{className:"text-xs font-semibold text-zinc-400",children:"No items yet"})})]})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"mb-3 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-zinc-400",children:[t.jsx(Mt,{className:"size-3.5"}),"Recent Orders (20)"]}),n.orders.length===0?t.jsx("div",{className:"py-12 text-center",children:t.jsx("p",{className:"text-zinc-400 font-bold uppercase tracking-widest text-xs",children:"No order history found for this account"})}):t.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:n.orders.map(Ht)})]})]})]}):null,e[165]=n,e[166]=re):re=e[166];let ne;e[167]!==nt||e[168]!==le||e[169]!==re?(ne=t.jsx(Et,{open:nt,onOpenChange:le,children:re}),e[167]=nt,e[168]=le,e[169]=re,e[170]=ne):ne=e[170];const ct=i.from??0,it=i.to??0;let ce;e[171]!==i.total||e[172]!==ct||e[173]!==it?(ce=t.jsxs("p",{className:"text-muted-foreground text-sm",children:["Showing ",ct," to ",it," of ",i.total," customer(s)"]}),e[171]=i.total,e[172]=ct,e[173]=it,e[174]=ce):ce=e[174];let ie;e[175]!==i.links?(ie=i.links.map(At),e[175]=i.links,e[176]=ie):ie=e[176];let oe;e[177]!==ie?(oe=t.jsx("div",{className:"flex items-center gap-2",children:ie}),e[177]=ie,e[178]=oe):oe=e[178];let de;e[179]!==ce||e[180]!==oe?(de=t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[ce,oe]}),e[179]=ce,e[180]=oe,e[181]=de):de=e[181];let We;return e[182]!==w||e[183]!==C||e[184]!==I||e[185]!==ae||e[186]!==ne||e[187]!==de?(We=t.jsxs(Ft,{breadcrumbs:$t,children:[ke,t.jsxs("div",{className:"space-y-8 bg-zinc-50/50 p-6 min-h-screen",children:[w,C,I,ae,ne,de]})]}),e[182]=w,e[183]=C,e[184]=I,e[185]=ae,e[186]=ne,e[187]=de,e[188]=We):We=e[188],We}function At(s){return t.jsx(he,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,asChild:!!s.url,className:`h-11 rounded-xl px-4 font-bold transition-all ${s.active?"bg-[#F57C00] text-white shadow-lg shadow-[#F57C00]/20":"text-zinc-500 border-zinc-200"}`,children:s.url?t.jsx(ut,{href:s.url,preserveState:!0,preserveScroll:!0,children:s.label.includes("Previous")?t.jsx(ft,{className:"size-4"}):s.label.includes("Next")?t.jsx(ht,{className:"size-4"}):t.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})}):t.jsx("span",{children:s.label.includes("Previous")?t.jsx(ft,{className:"size-4"}):s.label.includes("Next")?t.jsx(ht,{className:"size-4"}):t.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})})},s.label)}function Ht(s){return t.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-50/50 p-5 transition-all hover:bg-white hover:shadow-md hover:ring-1 hover:ring-[#F57C00]/20",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:"Order Ref"}),t.jsxs("p",{className:"text-sm font-black text-[#212121]",children:["#",s.id]})]}),t.jsx("p",{className:"text-lg font-black text-[#F57C00]",children:bt(s.total_amount)})]}),t.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[t.jsx(d,{className:`rounded-lg px-2 py-0.5 text-[9px] font-black uppercase tracking-widest shadow-none ${Rt(s.source_channel)}`,children:Bt(s.source_channel)}),t.jsx(d,{className:"rounded-lg bg-white px-2 py-0.5 text-[9px] font-black uppercase tracking-widest text-zinc-500 ring-1 ring-zinc-200 shadow-none",children:s.order_status}),t.jsxs(d,{className:"rounded-lg bg-white px-2 py-0.5 text-[9px] font-black uppercase tracking-widest text-[#F57C00] ring-1 ring-[#F57C00]/20 shadow-none",children:["Receipt ",s.receipt_status]})]}),t.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"Location"}),t.jsx("p",{className:"truncate text-[11px] font-bold text-zinc-600",children:s.pickup_location??"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"Date"}),t.jsx("p",{className:"text-[11px] font-bold text-zinc-600",children:s.pickup_date??"N/A"})]})]}),s.table_name&&t.jsxs("p",{className:"mt-2 text-[10px] font-semibold text-emerald-700",children:["Table: ",s.table_name]}),t.jsxs("div",{className:"mt-3",children:[t.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-400",children:"Items"}),s.items.length>0?t.jsx("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:s.items.map(Ut)}):t.jsx("p",{className:"mt-1 text-[11px] font-semibold text-zinc-400",children:"No item details"})]})]},s.id)}function Ut(s){return t.jsxs(d,{className:"bg-white text-zinc-600 ring-1 ring-zinc-200 shadow-none",children:[s.quantity,"x ",s.name??"Unknown"]},s.id)}function qt(s){return t.jsxs("p",{className:"text-xs font-semibold text-zinc-700",children:[s.name," ",t.jsxs("span",{className:"text-zinc-400",children:["x",s.quantity]})]},s.name)}function Vt(s){return t.jsxs("p",{className:"text-xs font-medium text-zinc-500",children:[s.pickup_location,": ",s.orders_count]},s.pickup_location)}function Wt(s){return t.jsxs(d,{className:"bg-zinc-100 text-zinc-600 ring-1 ring-zinc-200 shadow-none",children:[s.weekday," ",s.orders_count]},s.weekday)}function Gt(s){return t.jsxs("p",{className:"text-xs font-semibold text-zinc-700",children:[s.label," ",t.jsxs("span",{className:"text-zinc-400",children:["(",s.orders_count,")"]})]},s.hour)}function Qt(s){return t.jsx(d,{variant:"outline",className:"cursor-help rounded-lg border-zinc-200 bg-white px-2 py-0.5 text-[9px] font-bold text-zinc-500 hover:text-[#F57C00]",title:s.description,children:`{${s.token}}`},s.token)}function Jt(){return Ge.get("/staff/customers")}function Kt(s){return s.id}export{fs as default};
