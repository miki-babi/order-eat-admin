import{c as Tt,a as Ot,r as h,u as $t,j as t,H as Bt}from"./app-SZ8ZgFWE.js";import{I as ae}from"./input-error-ACiSH9h7.js";import{B as oe}from"./createLucideIcon-gmhFn2Sn.js";import{I as qe}from"./input-CATR05C3.js";import{L as We}from"./label-B2ypE-j7.js";import{C as gt}from"./circle-check-nD_vqT2l.js";import{S as bt}from"./search-ohkTX5KI.js";import{S as ce}from"./shopping-cart-DDOl-skn.js";import{A as Lt}from"./arrow-right-B5mZB97I.js";import{M as Mt}from"./map-pin-W6gYFwTR.js";import{E as Rt}from"./external-link-Zb_fmCN1.js";import{U as qt}from"./upload-vvzxakv6.js";import{C as Wt}from"./clock-3--lA7MvVc.js";const Ut=["1. Browse Menu","2. Review Cart","3. Pickup Details","4. Receipt Upload"];function rt(){return typeof window>"u"?null:window.Telegram?.WebApp??null}function lt(){if(typeof window>"u")return null;const s=e=>{const o=e.trim().replace(/^[?#]/,"");if(o==="")return null;const m=new URLSearchParams(o).get("tgWebAppData");if(typeof m!="string")return null;const p=m.trim();return p===""?null:p};return s(window.location.search)??s(window.location.hash)}function Xt(s){return s==="telegram"?!0:rt()!==null||lt()!==null}function Yt(s){if(typeof s=="number"&&Number.isInteger(s)&&s>0)return s;if(typeof s!="string"||s.trim()==="")return null;const e=s.trim();if(!/^\d+$/.test(e))return null;const o=Number(e);return Number.isInteger(o)&&o>0?o:null}function wt(s){if(typeof s!="string")return null;const e=s.trim().replace(/^@+/,"");return e===""?null:e}function Ht(s){if(!s)return null;const e=typeof s.first_name=="string"?s.first_name.trim():"",o=typeof s.last_name=="string"?s.last_name.trim():"",b=`${e} ${o}`.trim();if(b!=="")return b;const m=wt(s.username);return m?`@${m}`:null}function jt(){const s=new Date;return new Date(s.getTime()-s.getTimezoneOffset()*6e4).toISOString().slice(0,10)}function re(s){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(s)}function Nt(s,e){if(!s||typeof s!="object"||Array.isArray(s))return{};const o={};return Object.entries(s).forEach(([b,m])=>{const p=Number(b),E=typeof m=="number"?m:Number(m);!Number.isInteger(p)||p<1||!e.has(p)||!Number.isInteger(E)||E<1||E>100||(o[p]=E)}),o}function Jt(s,e){if(typeof window>"u")return{};try{const o=window.localStorage.getItem(s);return o?Nt(JSON.parse(o),e):{}}catch{return{}}}function Gt(s,e){if(!(typeof window>"u"))try{if(Object.keys(e).length===0){window.localStorage.removeItem(s);return}window.localStorage.setItem(s,JSON.stringify(e))}catch{}}function Kt(s){if(!(typeof window>"u"))try{window.localStorage.removeItem(s)}catch{}}function yt(s){const e=typeof s=="number"?s:Number(s);return Number.isInteger(e)&&e>=1&&e<=4?e:1}function Vt(s){if(typeof window>"u")return 1;try{const e=window.localStorage.getItem(s);return e?yt(JSON.parse(e)):1}catch{return 1}}function Zt(s,e){if(!(typeof window>"u"))try{window.localStorage.setItem(s,JSON.stringify(yt(e)))}catch{}}function Qt(s){if(!(typeof window>"u"))try{window.localStorage.removeItem(s)}catch{}}function _s(s){const e=Tt.c(152),{menuItems:o,categories:b,pickupLocations:m,customerToken:p,customerPrefill:E,filters:Ue,forcedChannel:vt}=s,{auth:kt,flash:N}=Ot().props,ot=vt??Ue.channel??"web",j=Xt(ot)?"telegram":ot,y=`kds:customer:web-cart:${p}`,v=`kds:customer:web-step:${p}`;let de;e[0]!==o?(de=new Set(o.map(ps)),e[0]=o,e[1]=de):de=e[1];const _=de;let me;e[2]!==v?(me=()=>Vt(v),e[2]=v,e[3]=me):me=e[3];const[a,k]=h.useState(me),[C,Ct]=h.useState(Ue.search??""),[f,ct]=h.useState(Ue.category??"all"),[dt,ue]=h.useState(!1),[xe,pe]=h.useState(!1),mt=h.useRef(!1),Xe=h.useRef(0);let fe;e[4]!==_||e[5]!==y?(fe=()=>Jt(y,_),e[4]=_,e[5]=y,e[6]=fe):fe=e[6];const[u,ut]=h.useState(fe),Ye=E.name??kt?.user?.name??"",He=E.phone??"";let he;e[7]===Symbol.for("react.memo_cache_sentinel")?(he=jt(),e[7]=he):he=e[7];const Je=m[0]?.id??"";let ge;e[8]===Symbol.for("react.memo_cache_sentinel")?(ge=[],e[8]=ge):ge=e[8];let be;e[9]!==j||e[10]!==p||e[11]!==Ye||e[12]!==He||e[13]!==Je?(be={customer_token:p,name:Ye,phone:He,telegram_id:null,telegram_username:"",pickup_date:he,pickup_location_id:Je,channel:j,notify_when_ready:!1,receipt:null,items:ge},e[9]=j,e[10]=p,e[11]=Ye,e[12]=He,e[13]=Je,e[14]=be):be=e[14];const i=$t(be);let je;e[15]!==o?(je=o.reduce(xs,{}),e[15]=o,e[16]=je):je=e[16];const Ge=je;let we;if(e[17]!==f||e[18]!==o||e[19]!==C){let n;e[21]!==f||e[22]!==C?(n=l=>{const r=f==="all"||(l.category??"Uncategorized")===f,d=C.toLowerCase(),S=!d||l.name.toLowerCase().includes(d)||(l.description??"").toLowerCase().includes(d)||(l.category??"").toLowerCase().includes(d);return r&&S},e[21]=f,e[22]=C,e[23]=n):n=e[23],we=o.filter(n),e[17]=f,e[18]=o,e[19]=C,e[20]=we}else we=e[20];const Ne=we;let D;e[24]!==u?(D=Object.entries(u),e[24]=u,e[25]=D):D=e[25];let ye;e[26]!==Ge||e[27]!==D?(ye=D.map(n=>{const[l,r]=n,d=Ge[Number(l)];return!d||r<1?null:{...d,quantity:r,lineTotal:d.price*r}}).filter(us),e[26]=Ge,e[27]=D,e[28]=ye):ye=e[28];const x=ye,F=x.reduce(ms,0),Ke=x.reduce(ds,0);let ve,ke;e[29]!==_||e[30]!==u||e[31]!==y?(ve=()=>{Gt(y,Nt(u,_))},ke=[u,y,_],e[29]=_,e[30]=u,e[31]=y,e[32]=ve,e[33]=ke):(ve=e[32],ke=e[33]),h.useEffect(ve,ke);let Ce,Fe;e[34]!==a||e[35]!==v?(Ce=()=>{Zt(v,a)},Fe=[a,v],e[34]=a,e[35]=v,e[36]=Ce,e[37]=Fe):(Ce=e[36],Fe=e[37]),h.useEffect(Ce,Fe);let Ee,_e;e[38]!==a?(Ee=()=>{if(typeof window>"u")return;let n=!1;const l=()=>{n||(n=!0,window.requestAnimationFrame(()=>{const r=window.scrollY||0;if(window.matchMedia("(min-width: 768px)").matches){ue(!1),pe(!1),Xe.current=r,n=!1;return}const S=r-Xe.current,Re=r>96;S>6&&Re?a===1&&(ue(!0),pe(!0)):(S<-6||r<32)&&(ue(!1),pe(!1)),a!==1&&(ue(!1),pe(!1)),Xe.current=r,n=!1}))};return window.addEventListener("scroll",l,{passive:!0}),window.addEventListener("resize",l),l(),()=>{window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}},_e=[a],e[38]=a,e[39]=Ee,e[40]=_e):(Ee=e[39],_e=e[40]),h.useEffect(Ee,_e);let ze;e[41]!==j||e[42]!==i?(ze=()=>{if(j!=="telegram")return;let n=!1,l=null,r=null;const d=g=>{g===""||mt.current||n||(mt.current=!0,l=new AbortController,fetch("/api/telegram/miniapp/identity",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({init_data:g}),signal:l.signal}).then(cs).then(c=>{!c?.ok||!c.customer||n||i.setData(w=>({...w,channel:"telegram",customer_token:typeof c.customer?.customer_token=="string"&&c.customer.customer_token!==""?c.customer.customer_token:w.customer_token,name:typeof c.customer?.name=="string"&&c.customer.name.trim()!==""?c.customer.name:w.name,phone:typeof c.customer?.phone=="string"&&c.customer.phone.trim()!==""?c.customer.phone:w.phone,telegram_id:typeof c.customer?.telegram_id=="number"&&c.customer.telegram_id>0?c.customer.telegram_id:w.telegram_id,telegram_username:typeof c.customer?.telegram_username=="string"?c.customer.telegram_username:w.telegram_username}))}).catch(os))},S=g=>{if(n)return;g.ready?.(),g.expand?.();const c=g.initDataUnsafe?.user,w=Yt(c?.id),It=wt(c?.username),pt=Ht(c);w!==null&&i.setData(ht=>({...ht,channel:"telegram",telegram_id:w,telegram_username:It??ht.telegram_username})),pt&&i.data.name.trim()===""&&i.setData("name",pt);const ft=typeof g.initData=="string"?g.initData.trim():"",Pt=ft!==""?ft:lt()??"";d(Pt)},Re=rt(),xt=lt();return Re?S(Re):typeof document<"u"&&(xt!==null&&d(xt),r=document.createElement("script"),r.src="https://telegram.org/js/telegram-web-app.js",r.async=!0,r.onload=()=>{const g=rt();g&&S(g)},document.head.appendChild(r)),()=>{n=!0,l?.abort(),r&&r.remove()}},e[41]=j,e[42]=i,e[43]=ze):ze=e[43];let Se;e[44]!==j?(Se=[j],e[44]=j,e[45]=Se):Se=e[45],h.useEffect(ze,Se);let De;e[46]===Symbol.for("react.memo_cache_sentinel")?(De=(n,l)=>{ut(r=>{const d={...r};return l<=0?delete d[n]:d[n]=l,d})},e[46]=De):De=e[46];const le=De;let Ae;e[47]!==i.data.name||e[48]!==i.data.phone||e[49]!==i.data.pickup_date||e[50]!==i.data.pickup_location_id?(Ae=i.data.name.trim()&&i.data.phone.trim()&&i.data.pickup_date&&i.data.pickup_location_id,e[47]=i.data.name,e[48]=i.data.phone,e[49]=i.data.pickup_date,e[50]=i.data.pickup_location_id,e[51]=Ae):Ae=e[51];const Ve=Ae;let Ie;e[52]!==i.data.pickup_location_id||e[53]!==m?(Ie=m.find(n=>n.id===i.data.pickup_location_id)??null,e[52]=i.data.pickup_location_id,e[53]=m,e[54]=Ie):Ie=e[54];const z=Ie,Ze=()=>{const n=x.map(ls),l={...i.data,items:n,receipt:i.data.receipt?{name:i.data.receipt.name,size:i.data.receipt.size,type:i.data.receipt.type}:null};console.groupCollapsed("[Order Submit] attempt"),console.log("step",a),console.log("cartCount",F),console.log("cartTotal",Ke),console.log("payload",l),console.groupEnd(),i.transform(r=>({...r,items:n})),i.post("/orders",{forceFormData:!0,preserveScroll:!0,onStart:rs,onProgress:as,onSuccess:()=>{Kt(y),Qt(v),ut({}),k(1),console.log("[Order Submit] success")},onError:r=>{if(console.error("[Order Submit] validation or server error",r),r.items){k(2);return}if(r.receipt){k(4);return}(r.name||r.phone||r.pickup_date||r.pickup_location_id)&&k(3)},onFinish:is})};let A;e[55]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(Bt,{title:"Cafe Menu"}),e[55]=A):A=e[55];const Ft="min-h-screen bg-[#FAFAFA] text-[#212121]";let I;e[56]!==F||e[57]!==xe||e[58]!==a?(I=a===1&&F>0&&t.jsx("button",{onClick:()=>{k(2),window.scrollTo({top:0,behavior:"smooth"})},className:`fixed bottom-24 right-6 z-[60] flex h-16 w-16 items-center justify-center rounded-full bg-[#212121] text-white shadow-[0_20px_50px_rgba(0,0,0,0.3)] ring-4 ring-white transition-all duration-300 cursor-pointer hover:scale-110 active:scale-95 md:bottom-12 md:right-12 md:translate-y-0 md:opacity-100 md:pointer-events-auto ${xe?"translate-y-[140%] opacity-0 pointer-events-none":"translate-y-0 opacity-100"}`,children:t.jsxs("div",{className:"relative",children:[t.jsx(ce,{className:"size-7"}),t.jsx("span",{className:"absolute -top-3 -right-3 flex h-6 w-6 items-center justify-center rounded-full bg-[#F57C00] text-[11px] font-black text-white shadow-md ring-2 ring-white animate-in zoom-in-50 duration-300",children:F})]})}),e[56]=F,e[57]=xe,e[58]=a,e[59]=I):I=e[59];const Et="mx-auto w-full max-w-7xl px-4 py-8 md:px-8 pb-32 md:pb-12",Qe=`sticky top-[0px] z-40 mb-6 overflow-hidden rounded-2xl bg-white p-1.5 shadow-lg ring-1 ring-zinc-100 transition-all duration-300 md:relative md:top-0 md:bg-white md:p-1 md:shadow-md md:translate-y-0 md:opacity-100 md:pointer-events-auto ${dt?"-translate-y-[130%] opacity-0 pointer-events-none":"translate-y-0 opacity-100"}`;let P;e[60]!==a?(P=Ut.map((n,l)=>{const r=a===l+1,d=a>l+1;return t.jsxs("div",{className:`flex flex-1 items-center justify-center rounded-xl px-2 py-2.5 transition-all duration-500 md:px-4 md:py-3 ${r?"bg-[#FFF3E0] text-[#F57C00] shadow-sm":"bg-transparent"}`,children:[t.jsx("div",{className:`flex h-7 w-7 shrink-0 items-center justify-center rounded-full text-[10px] font-black transition-all duration-500 ${r?"bg-[#F57C00] text-white shadow-md shadow-[#F57C00]/20 scale-110":d?"bg-[#2E7D32] text-white":"bg-zinc-100 text-zinc-400"} ${r?"mr-2":"md:mr-3"}`,children:d?t.jsx(gt,{className:"size-4",strokeWidth:3}):l+1}),t.jsx("span",{className:`text-[11px] font-black uppercase tracking-tight md:text-sm md:normal-case md:tracking-normal ${r?"block":"hidden md:block"} ${r?"text-[#F57C00]":"text-zinc-500"}`,children:n.split(". ")[1]})]},n)}),e[60]=a,e[61]=P):P=e[61];let T;e[62]!==P?(T=t.jsx("div",{className:"flex flex-row items-center gap-1",children:P}),e[62]=P,e[63]=T):T=e[63];let O;e[64]!==Qe||e[65]!==T?(O=t.jsx("div",{className:Qe,children:T}),e[64]=Qe,e[65]=T,e[66]=O):O=e[66];const et=`sticky top-[0px] z-60 mb-10 overflow-hidden rounded-2xl bg-white p-1.5 shadow-lg ring-1 ring-zinc-100 transition-all duration-300 md:relative md:top-0 md:bg-white md:p-1 md:shadow-md md:translate-y-0 md:opacity-100 md:pointer-events-auto ${a===1?"block":"hidden"} ${dt?"-translate-y-[160%] opacity-0 pointer-events-none":"translate-y-0 opacity-100"}`,tt=`px-6 py-2.5 rounded-full text-sm font-bold transition-all duration-300 shadow-sm ${f==="all"?"bg-[#F57C00] text-white shadow-[#F57C00]/20 scale-105":"bg-white text-[#757575] hover:bg-[#F5F5F5] ring-1 ring-zinc-200"}`;let Pe;e[67]===Symbol.for("react.memo_cache_sentinel")?(Pe=()=>ct("all"),e[67]=Pe):Pe=e[67];let $;e[68]!==tt?($=t.jsx("button",{type:"button",className:tt,onClick:Pe,children:"All items"}),e[68]=tt,e[69]=$):$=e[69];let B;if(e[70]!==f||e[71]!==b){let n;e[73]!==f?(n=l=>t.jsx("button",{type:"button",className:`px-6 py-2.5 rounded-full text-sm font-bold transition-all duration-300 shadow-sm ${f===l?"bg-[#F57C00] text-white shadow-[#F57C00]/20 scale-105":"bg-white text-[#757575] hover:bg-[#F5F5F5] ring-1 ring-zinc-200"}`,onClick:()=>ct(l),children:l},l),e[73]=f,e[74]=n):n=e[74],B=b.map(n),e[70]=f,e[71]=b,e[72]=B}else B=e[72];let L;e[75]!==$||e[76]!==B?(L=t.jsxs("div",{className:" flex flex-wrap gap-3 p-2 transition-all duration-300",children:[$,B]}),e[75]=$,e[76]=B,e[77]=L):L=e[77];let M;e[78]!==et||e[79]!==L?(M=t.jsx("div",{className:et,children:L}),e[78]=et,e[79]=L,e[80]=M):M=e[80];const _t="grid gap-8 lg:grid-cols-[1fr_360px]";let R;e[81]!==N?(R=N?.success&&t.jsx("div",{className:"animate-in fade-in slide-in-from-top-4 rounded-xl border-l-4 border-[#2E7D32] bg-green-50 px-5 py-4 text-sm font-medium text-[#1B5E20] shadow-sm transition-all duration-500",children:N.success}),e[81]=N,e[82]=R):R=e[82];let q;e[83]!==N?(q=N?.error&&t.jsx("div",{className:"animate-in fade-in slide-in-from-top-4 rounded-xl border-l-4 border-[#C62828] bg-red-50 px-5 py-4 text-sm font-medium text-[#B71C1C] shadow-sm transition-all duration-500",children:N.error}),e[83]=N,e[84]=q):q=e[84];let W;e[85]!==u||e[86]!==Ne||e[87]!==C||e[88]!==a?(W=a===1&&t.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"group relative transition-all duration-300 focus-within:ring-2 focus-within:ring-[#F57C00]/20 rounded-2xl",children:[t.jsx(bt,{className:"absolute top-1/2 left-5 size-5 -translate-y-1/2 text-[#757575] group-focus-within:text-[#F57C00] transition-colors duration-300"}),t.jsx(qe,{className:"h-14 rounded-2xl border-none pl-14 text-base shadow-sm ring-1 ring-zinc-200 transition-all duration-300 focus:ring-2 focus:ring-[#F57C00] placeholder:text-[#9E9E9E]",value:C,onChange:n=>Ct(n.target.value),placeholder:"Search by item, description, or category"})]})}),t.jsx("div",{className:"grid gap-6 sm:grid-cols-2",children:Ne.map(n=>t.jsxs("div",{className:"group flex flex-col overflow-hidden rounded-2xl bg-white shadow-sm ring-1 ring-zinc-200 transition-all duration-300 hover:-translate-y-1 hover:shadow-xl",children:[t.jsxs("div",{className:"relative aspect-[3/2] overflow-hidden",children:[n.image_url?t.jsx("img",{src:n.image_url,alt:n.name,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-110",loading:"lazy"}):t.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center bg-[#F5F5F5]",children:[t.jsx("div",{className:"mb-2 h-12 w-12 rounded-full bg-zinc-200/50 flex items-center justify-center",children:t.jsx(ce,{className:"size-6 text-zinc-400 opacity-50"})}),t.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"Preparation in progress"})]}),t.jsx("div",{className:"absolute top-4 right-4 rounded-full bg-black/40 px-3 py-1.5 text-xs font-black text-white backdrop-blur-md",children:re(n.price)})]}),t.jsxs("div",{className:"flex flex-1 flex-col p-5",children:[t.jsx("div",{className:"mb-1 flex items-start justify-between",children:t.jsxs("div",{children:[n.category&&t.jsx("span",{className:"block text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:n.category}),t.jsx("h3",{className:"text-xl font-bold text-[#212121] leading-tight mt-1 group-hover:text-[#F57C00] transition-colors duration-300",children:n.name})]})}),t.jsx("p",{className:"mt-2 text-sm leading-relaxed text-[#757575] line-clamp-2",children:n.description??"A delicious selection crafted with high-quality ingredients just for you."}),t.jsx("div",{className:"mt-auto pt-6",children:t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-[#FAFAFA] p-1 shadow-inner ring-1 ring-zinc-200",children:[t.jsx("button",{type:"button",className:"flex h-9 w-9 items-center justify-center rounded-full bg-white font-bold text-[#212121] shadow-sm transition-all hover:bg-[#F57C00] hover:text-white disabled:opacity-20 active:scale-95",disabled:(u[n.id]??0)<=0,onClick:()=>le(n.id,(u[n.id]??0)-1),children:"-"}),t.jsx("span",{className:"w-10 text-center text-[15px] font-black",children:u[n.id]??0}),t.jsx("button",{type:"button",className:"flex h-9 w-9 items-center justify-center rounded-full bg-white font-bold text-[#212121] shadow-sm transition-all hover:bg-[#F57C00] hover:text-white active:scale-95",onClick:()=>le(n.id,(u[n.id]??0)+1),children:"+"})]}),t.jsx(oe,{type:"button",className:`h-11 rounded-full px-6 font-bold transition-all duration-300 active:scale-95 ${(u[n.id]??0)>0?"bg-[#2E7D32] hover:bg-[#1B5E20]":"bg-[#F57C00] hover:bg-[#E65100]"}`,onClick:()=>le(n.id,Math.max(1,(u[n.id]??0)+1)),children:(u[n.id]??0)>0?"Add more":"Add to cart"})]})})]})]},n.id))}),Ne.length===0&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[t.jsx("div",{className:"mb-4 h-24 w-24 rounded-full bg-zinc-100 flex items-center justify-center",children:t.jsx(bt,{className:"size-10 text-zinc-300"})}),t.jsx("h3",{className:"text-xl font-bold text-[#212121]",children:"No items found"}),t.jsx("p",{className:"mt-2 text-[#757575]",children:"Try adjusting your search or category filters."})]})]}),e[85]=u,e[86]=Ne,e[87]=C,e[88]=a,e[89]=W):W=e[89];let U;e[90]!==x||e[91]!==i.errors||e[92]!==a?(U=a===2&&t.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-500",children:t.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-sm ring-1 ring-zinc-200",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-[#212121]",children:"Review Your Cart"}),t.jsx("p",{className:"text-sm text-[#757575]",children:"Confirm quantities and totals before we proceed to checkout."})]}),t.jsx("div",{className:"space-y-4",children:x.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[t.jsx("div",{className:"mb-6 flex h-24 w-24 items-center justify-center rounded-full bg-zinc-50 shadow-inner",children:t.jsx(ce,{className:"size-10 text-zinc-300"})}),t.jsx("h3",{className:"text-xl font-bold text-[#212121]",children:"Your cart is empty"}),t.jsx("p",{className:"mt-2 text-[#757575]",children:"Look like you haven't added anything to your order yet."}),t.jsxs(oe,{onClick:()=>k(1),className:"mt-8 h-12 rounded-xl bg-[#F57C00] px-8 font-black text-white shadow-lg shadow-[#F57C00]/20 hover:bg-[#E65100] active:scale-95 transition-all",children:["Browse Our Menu",t.jsx(Lt,{className:"ml-2 size-4"})]})]}):x.map(n=>t.jsxs("div",{className:"flex flex-col gap-4 rounded-xl border border-zinc-100 bg-[#FAFAFA] p-4 transition-all hover:shadow-md md:flex-row md:items-center",children:[t.jsxs("div",{className:"flex flex-1 items-center gap-4",children:[t.jsx("div",{className:"h-20 w-20 shrink-0 overflow-hidden rounded-lg border bg-white shadow-sm",children:n.image_url?t.jsx("img",{src:n.image_url,alt:n.name,className:"h-full w-full object-cover",loading:"lazy"}):t.jsx("div",{className:"flex h-full w-full items-center justify-center bg-zinc-50 text-[10px] font-bold uppercase tracking-tighter text-zinc-400",children:"No Photo"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"truncate text-lg font-bold text-[#212121]",children:n.name}),t.jsxs("p",{className:"text-sm font-black text-[#F57C00]",children:[re(n.price)," ",t.jsx("span",{className:"ml-1 text-xs font-medium text-[#9E9E9E]",children:"each"})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between border-t border-zinc-100 pt-4 md:border-0 md:pt-0",children:[t.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-white p-1 shadow-sm ring-1 ring-zinc-100",children:[t.jsx("button",{type:"button",className:"flex h-8 w-8 items-center justify-center rounded-full text-[#F57C00] transition-all hover:bg-[#F57C00] hover:text-white active:scale-90",onClick:()=>le(n.id,n.quantity-1),children:"-"}),t.jsx("span",{className:"w-8 text-center text-sm font-black",children:n.quantity}),t.jsx("button",{type:"button",className:"flex h-8 w-8 items-center justify-center rounded-full text-[#F57C00] transition-all hover:bg-[#F57C00] hover:text-white active:scale-90",onClick:()=>le(n.id,n.quantity+1),children:"+"})]}),t.jsx("p",{className:"text-right text-lg font-black text-[#212121] md:w-28",children:re(n.lineTotal)})]})]},n.id))}),t.jsx("div",{className:"mt-6",children:t.jsx(ae,{message:i.errors.items})})]})}),e[90]=x,e[91]=i.errors,e[92]=a,e[93]=U):U=e[93];let X;e[94]!==i||e[95]!==m||e[96]!==z||e[97]!==a?(X=a===3&&t.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-500",children:t.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-sm ring-1 ring-zinc-200",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-bold text-[#212121]",children:"Pickup & Contact"}),t.jsx("p",{className:"text-sm text-[#757575]",children:"Help us coordinate your pickup with accurate details."})]}),t.jsxs("div",{className:"grid gap-6",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(We,{htmlFor:"name",className:"text-xs font-black uppercase tracking-widest text-[#9E9E9E]",children:"Customer Name"}),t.jsx(qe,{id:"name",className:"h-12 rounded-xl border-zinc-200 focus:ring-[#F57C00] focus:border-[#F57C00]",value:i.data.name,onChange:n=>i.setData("name",n.target.value),placeholder:"Enter your full name"}),t.jsx(ae,{message:i.errors.name})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsxs(We,{htmlFor:"phone",className:"text-xs font-black uppercase tracking-widest text-[#9E9E9E]",children:["Phone Number ",t.jsx("span",{className:"text-[#F57C00]",children:"*"})]}),t.jsx(qe,{id:"phone",className:"h-12 rounded-xl border-zinc-200 focus:ring-[#F57C00] focus:border-[#F57C00]",value:i.data.phone,onChange:n=>i.setData("phone",n.target.value),placeholder:"251 9XX XXX XXX"}),t.jsx("p",{className:"text-[10px] text-[#9E9E9E]",children:"We'll send a tracking link to this number."}),t.jsx(ae,{message:i.errors.phone})]}),t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(We,{htmlFor:"pickup_date",className:"text-xs font-black uppercase tracking-widest text-[#9E9E9E]",children:"Pickup Date"}),t.jsx(qe,{id:"pickup_date",type:"date",min:jt(),className:"h-12 rounded-xl border-zinc-200 focus:ring-[#F57C00] focus:border-[#F57C00]",value:i.data.pickup_date,onChange:n=>i.setData("pickup_date",n.target.value)}),t.jsx(ae,{message:i.errors.pickup_date})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(We,{htmlFor:"pickup_location",className:"text-xs font-black uppercase tracking-widest text-[#9E9E9E]",children:"Branch Location"}),t.jsxs("select",{id:"pickup_location",className:"flex h-12 w-full rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#F57C00] focus-visible:ring-offset-2",value:i.data.pickup_location_id,onChange:n=>i.setData("pickup_location_id",Number(n.target.value)||""),children:[t.jsx("option",{value:"",children:"Select a branch"}),m.map(ns)]}),t.jsx(ae,{message:i.errors.pickup_location_id})]})]}),z&&t.jsx("div",{className:"rounded-2xl border border-[#FFF3E0] bg-[#FFF8F1] p-5 transition-all animate-in slide-in-from-top-2",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-[#F57C00] text-white",children:t.jsx(Mt,{className:"size-5"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-[#212121]",children:z.name}),t.jsx("p",{className:"mt-1 text-sm text-[#757575] leading-relaxed",children:z.address}),z.google_maps_url&&t.jsxs("a",{className:"mt-3 inline-flex items-center gap-1.5 text-sm font-bold text-[#F57C00] hover:underline",href:z.google_maps_url,target:"_blank",rel:"noopener noreferrer",children:["Open in Google Maps",t.jsx(Rt,{className:"size-3"})]})]})]})}),t.jsxs("label",{className:"flex cursor-pointer items-start gap-3 rounded-xl border border-zinc-100 bg-[#FAFAFA] p-4 transition-all hover:bg-white hover:shadow-sm",children:[t.jsx("input",{type:"checkbox",className:"mt-1 h-5 w-5 rounded border-zinc-300 text-[#F57C00] focus:ring-[#F57C00]",checked:i.data.notify_when_ready,onChange:n=>i.setData("notify_when_ready",n.target.checked)}),t.jsxs("span",{className:"text-sm font-medium text-[#212121] leading-tight",children:["SMS Ready Notification",t.jsx("span",{className:"block mt-1 text-xs font-normal text-[#757575]",children:"We'll text you as soon as your order is packaged and ready to go."})]})]})]})]})}),e[94]=i,e[95]=m,e[96]=z,e[97]=a,e[98]=X):X=e[98];let Y;e[99]!==i||e[100]!==a?(Y=a===4&&t.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-500",children:t.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-sm ring-1 ring-zinc-200",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-bold text-[#212121]",children:"Payment Upload"}),t.jsx("p",{className:"text-sm text-[#757575]",children:"Upload your bank transfer receipt to verify your order."})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"group relative flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-zinc-200 bg-[#FAFAFA] p-10 transition-all hover:border-[#F57C00] hover:bg-white",children:[t.jsx("div",{className:"mb-4 rounded-full bg-white p-4 shadow-sm ring-1 ring-zinc-100 group-hover:scale-110 group-hover:text-[#F57C00] transition-all duration-300",children:t.jsx(qt,{className:"size-8"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-base font-bold text-[#212121]",children:"Click to upload receipt"}),t.jsx("p",{className:"mt-1 text-xs text-[#9E9E9E]",children:"PNG, JPG or WEBP (Max 5MB)"})]}),t.jsx("input",{id:"receipt",type:"file",className:"absolute inset-0 cursor-pointer opacity-0",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:n=>i.setData("receipt",n.target.files?.[0]??null)})]}),i.data.receipt&&t.jsxs("div",{className:"flex items-center gap-4 rounded-xl bg-[#E8F5E9] p-4 text-[#2E7D32] animate-in slide-in-from-bottom-2",children:[t.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-[#2E7D32] text-white",children:t.jsx(gt,{className:"size-5"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("p",{className:"truncate text-sm font-bold",children:["File selected: ",i.data.receipt.name]}),t.jsx("p",{className:"text-[10px] opacity-80 uppercase font-black",children:"Ready for submission"})]}),t.jsx("button",{type:"button",className:"text-xs font-black uppercase tracking-widest hover:underline",onClick:()=>i.setData("receipt",null),children:"Remove"})]}),t.jsx("div",{className:"rounded-xl bg-[#FFF3E0] p-4 text-[#E65100]",children:t.jsxs("p",{className:"text-xs font-medium leading-relaxed",children:[t.jsx("span",{className:"font-black uppercase tracking-widest mr-2 underline",children:"Note:"}),"You can also skip this for now and upload later using the tracking link we'll send via SMS."]})}),t.jsx(ae,{message:i.errors.receipt})]})]})}),e[99]=i,e[100]=a,e[101]=Y):Y=e[101];const st=`fixed bottom-0 left-0 right-0 z-50 bg-white/90 p-4 shadow-[0_-8px_30px_rgb(0,0,0,0.12)] backdrop-blur-xl ring-1 ring-zinc-200/50 transition-all duration-300 md:relative md:bottom-auto md:left-auto md:right-auto md:z-0 md:w-full md:max-w-none md:translate-x-0 md:translate-y-0 md:opacity-100 md:pointer-events-auto md:bg-transparent md:p-0 md:pt-12 md:shadow-none md:ring-0 md:backdrop-blur-none ${xe?"translate-y-[120%] opacity-0 pointer-events-none":"translate-y-0 opacity-100"}`,nt=`h-14 rounded-2xl px-8 font-bold text-[#757575] transition-all hover:bg-zinc-100 ${a===1?"opacity-0 pointer-events-none":"opacity-100"}`,it=a===1;let Te;e[102]===Symbol.for("react.memo_cache_sentinel")?(Te=()=>{k(ss),window.scrollTo({top:0,behavior:"smooth"})},e[102]=Te):Te=e[102];let H;e[103]!==nt||e[104]!==it?(H=t.jsx(oe,{type:"button",variant:"ghost",className:nt,disabled:it,onClick:Te,children:"Back"}),e[103]=nt,e[104]=it,e[105]=H):H=e[105];let J;e[106]!==Ve||e[107]!==x.length||e[108]!==i.processing||e[109]!==a||e[110]!==Ze?(J=t.jsx("div",{className:"flex items-center gap-3",children:a<4?t.jsx(oe,{type:"button",className:"h-14 rounded-2xl px-12 font-black shadow-lg shadow-[#F57C00]/20 bg-[#F57C00] hover:bg-[#E65100] active:scale-95 transition-all text-white",disabled:a===1&&x.length===0||a===2&&x.length===0||a===3&&!Ve,onClick:()=>{k(ts),window.scrollTo({top:0,behavior:"smooth"})},children:"Continue"}):t.jsx(oe,{type:"button",className:"h-14 rounded-2xl px-12 font-black shadow-lg shadow-[#2E7D32]/20 bg-[#2E7D32] hover:bg-[#1B5E20] active:scale-95 transition-all text-white",disabled:i.processing||x.length===0,onClick:Ze,children:i.processing?"Submitting...":"Confirm Order"})}),e[106]=Ve,e[107]=x.length,e[108]=i.processing,e[109]=a,e[110]=Ze,e[111]=J):J=e[111];let G;e[112]!==H||e[113]!==J?(G=t.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[H,J]}),e[112]=H,e[113]=J,e[114]=G):G=e[114];let K;e[115]!==st||e[116]!==G?(K=t.jsx("div",{className:st,children:G}),e[115]=st,e[116]=G,e[117]=K):K=e[117];let V;e[118]!==R||e[119]!==q||e[120]!==W||e[121]!==U||e[122]!==X||e[123]!==Y||e[124]!==K?(V=t.jsxs("section",{className:"space-y-6",children:[R,q,W,U,X,Y,K]}),e[118]=R,e[119]=q,e[120]=W,e[121]=U,e[122]=X,e[123]=Y,e[124]=K,e[125]=V):V=e[125];const zt="hidden lg:block",St="sticky top-24 space-y-6",Dt="overflow-hidden rounded-2xl bg-white shadow-xl ring-1 ring-zinc-200";let Oe;e[126]===Symbol.for("react.memo_cache_sentinel")?(Oe=t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ce,{className:"size-5 text-[#F57C00]"}),t.jsx("h3",{className:"font-black uppercase tracking-widest text-sm",children:"Review Order"})]}),e[126]=Oe):Oe=e[126];let Z;e[127]!==F?(Z=t.jsx("div",{className:"bg-[#212121] px-6 py-5 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[Oe,t.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-[10px] font-black uppercase",children:[F," items"]})]})}),e[127]=F,e[128]=Z):Z=e[128];const At="p-6",at=x.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center",id:"empty-cart-summary",children:[t.jsx("div",{className:"mb-4 h-16 w-16 rounded-full bg-zinc-50 flex items-center justify-center",children:t.jsx(ce,{className:"size-6 text-zinc-300"})}),t.jsx("p",{className:"text-sm font-medium text-[#9E9E9E]",children:"Your bag is empty."})]}):t.jsxs("div",{className:"space-y-4",children:[x.slice(0,5).map(es),x.length>5&&t.jsxs("p",{className:"text-center text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:["+ ",x.length-5," additional items"]}),t.jsxs("div",{className:"mt-6 space-y-3 rounded-xl bg-[#FAFAFA] p-4 text-sm",children:[t.jsxs("div",{className:"flex justify-between text-[#757575]",children:[t.jsx("span",{children:"Subtotal"}),t.jsx("span",{className:"font-bold",children:re(Ke)})]}),t.jsxs("div",{className:"flex justify-between text-[#757575]",children:[t.jsx("span",{children:"Processing Fee"}),t.jsx("span",{className:"font-bold text-[#2E7D32]",children:"FREE"})]}),t.jsx("div",{className:"border-t border-zinc-200 pt-3",children:t.jsxs("div",{className:"flex justify-between text-lg font-black text-[#212121]",children:[t.jsx("span",{children:"Total"}),t.jsx("span",{className:"text-[#F57C00]",children:re(Ke)})]})})]})]});let Q;e[129]!==at?(Q=t.jsx("div",{className:At,children:at}),e[129]=at,e[130]=Q):Q=e[130];let ee;e[131]!==Z||e[132]!==Q?(ee=t.jsxs("div",{className:Dt,children:[Z,Q]}),e[131]=Z,e[132]=Q,e[133]=ee):ee=e[133];let $e;e[134]===Symbol.for("react.memo_cache_sentinel")?($e=t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-white shadow-sm",children:t.jsx(Wt,{className:"size-4"})}),t.jsx("h4",{className:"text-sm font-black uppercase tracking-widest",children:"Help & Info"})]}),e[134]=$e):$e=e[134];let Be;e[135]===Symbol.for("react.memo_cache_sentinel")?(Be=t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"mt-1 h-1.5 w-1.5 shrink-0 rounded-full bg-[#F57C00]"}),t.jsx("p",{className:"text-xs leading-relaxed font-medium",children:"Pickup times are estimated and may vary based on demand."})]}),e[135]=Be):Be=e[135];let Le;e[136]===Symbol.for("react.memo_cache_sentinel")?(Le=t.jsxs("div",{className:"rounded-2xl bg-[#FFF3E0] p-6 text-[#E65100]",children:[$e,t.jsxs("div",{className:"space-y-3",children:[Be,t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"mt-1 h-1.5 w-1.5 shrink-0 rounded-full bg-[#F57C00]"}),t.jsx("p",{className:"text-xs leading-relaxed font-medium",children:"Please ensure your phone number is correct for tracking updates."})]})]})]}),e[136]=Le):Le=e[136];let te;e[137]!==ee?(te=t.jsx("aside",{className:zt,children:t.jsxs("div",{className:St,children:[ee,Le]})}),e[137]=ee,e[138]=te):te=e[138];let se;e[139]!==V||e[140]!==te?(se=t.jsxs("div",{className:_t,children:[V,te]}),e[139]=V,e[140]=te,e[141]=se):se=e[141];let ne;e[142]!==O||e[143]!==M||e[144]!==se?(ne=t.jsxs("main",{className:Et,children:[O,M,se]}),e[142]=O,e[143]=M,e[144]=se,e[145]=ne):ne=e[145];let ie;e[146]!==I||e[147]!==ne?(ie=t.jsxs("div",{className:Ft,children:[I,ne]}),e[146]=I,e[147]=ne,e[148]=ie):ie=e[148];let Me;return e[149]!==A||e[150]!==ie?(Me=t.jsxs(t.Fragment,{children:[A,ie]}),e[149]=A,e[150]=ie,e[151]=Me):Me=e[151],Me}function es(s){return t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[t.jsx("div",{className:"h-12 w-12 shrink-0 overflow-hidden rounded-lg border border-zinc-100 bg-zinc-50 shadow-sm",children:s.image_url?t.jsx("img",{src:s.image_url,alt:s.name,className:"h-full w-full object-cover",loading:"lazy"}):t.jsx("div",{className:"flex h-full w-full items-center justify-center bg-zinc-100 text-[8px] font-black uppercase tracking-tighter text-zinc-400",children:"Prep"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"truncate text-sm font-bold text-[#212121]",children:s.name}),t.jsxs("p",{className:"text-xs font-medium text-[#757575]",children:["Qty: ",s.quantity]})]})]}),t.jsx("span",{className:"text-sm font-black text-[#212121]",children:re(s.lineTotal)})]},s.id)}function ts(s){return Math.min(4,s+1)}function ss(s){return Math.max(1,s-1)}function ns(s){return t.jsx("option",{value:s.id,children:s.name},s.id)}function is(){console.log("[Order Submit] finished")}function as(s){console.log("[Order Submit] upload progress",s?.percentage??0)}function rs(){console.log("[Order Submit] request started")}function ls(s){return{menu_item_id:s.id,quantity:s.quantity}}function os(){}async function cs(s){return s.ok?await s.json():null}function ds(s,e){return s+e.lineTotal}function ms(s,e){return s+e.quantity}function us(s){return!!s}function xs(s,e){return s[e.id]=e,s}function ps(s){return s.id}export{_s as C};
