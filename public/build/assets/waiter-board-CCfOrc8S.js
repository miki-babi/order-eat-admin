import{c as te,r as ae,j as s,b as V,H as ne}from"./app-5ivQ32xl.js";import{B as _}from"./badge-CAmwWNqt.js";import{b as U,B as J}from"./createLucideIcon-4mFshcGX.js";import{d as i,C as r,a as Q,b as X}from"./card-BkdTVfqM.js";import{k as ce,b as ie,A as re}from"./app-layout-BUVgbUhZ.js";/* empty css            */import"./index-CA5ca-U-.js";import"./index-_-JSrlHk.js";import"./index-C8o9R0tm.js";import"./map-pin-B680Klqa.js";import"./store-ofhzWzBO.js";const le=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],me=U("CheckCheck",le);const de=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],oe=U("Flame",de);const xe=[["path",{d:"M12 3V2",key:"ar7q03"}],["path",{d:"m15.4 17.4 3.2-2.8a2 2 0 1 1 2.8 2.9l-3.6 3.3c-.7.8-1.7 1.2-2.8 1.2h-4c-1.1 0-2.1-.4-2.8-1.2l-1.302-1.464A1 1 0 0 0 6.151 19H5",key:"n2g93r"}],["path",{d:"M2 14h12a2 2 0 0 1 0 4h-2",key:"1o2jem"}],["path",{d:"M4 10h16",key:"img6z1"}],["path",{d:"M5 10a7 7 0 0 1 14 0",key:"1ega1o"}],["path",{d:"M5 14v6a1 1 0 0 1-1 1H2",key:"1hescx"}]],pe=U("HandPlatter",xe);const he=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],fe=U("Timer",he),ge=[{title:"Waiter Board",href:"/staff/waiter-board"}];function be(a){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(a)}function Y(a){return a==="telegram"?"bg-sky-100 text-sky-700":a==="table"?"bg-orange-100 text-orange-700":"bg-zinc-100 text-zinc-700"}function ue(a){return a==="prepared"?"bg-emerald-100 text-emerald-700":a==="preparing"?"bg-indigo-100 text-indigo-700":"bg-amber-100 text-amber-700"}function Me(a){const e=te.c(58),{screens:v,selectedScreenId:w,pendingConfirmationOrders:S,awaitingKitchenOrders:C,readyToServeOrders:B,servedOrders:$,summary:n}=a,[O,T]=ae.useState(null),Z=ye;let F;e[0]===Symbol.for("react.memo_cache_sentinel")?(F=t=>{T(t),V.patch(`/staff/waiter-board/orders/${t}/confirm`,{},{preserveScroll:!0,onFinish:()=>T(c=>c===t?null:c)})},e[0]=F):F=e[0];const ee=F;let M;e[1]===Symbol.for("react.memo_cache_sentinel")?(M=t=>{T(t),V.patch(`/staff/waiter-board/orders/${t}/serve`,{},{preserveScroll:!0,onFinish:()=>T(c=>c===t?null:c)})},e[1]=M):M=e[1];const se=M;let A;e[2]!==O?(A=(t,c)=>s.jsx(i,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(r,{className:"space-y-4 p-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-black text-zinc-900",children:["#",t.id," ",t.customer_name??"Guest"]}),s.jsxs("p",{className:"text-xs font-medium text-zinc-500",children:[t.customer_phone??"No phone",t.table_name?` • Table ${t.table_name}`:""]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_,{className:Y(t.source_channel),children:t.source_channel}),s.jsx(_,{className:"bg-zinc-100 text-zinc-700",children:be(t.total_amount)})]})]}),s.jsxs("div",{className:"rounded-xl bg-zinc-50 p-3 ring-1 ring-zinc-100",children:[s.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Items"}),s.jsx("p",{className:"mt-1 text-sm font-medium text-zinc-700",children:t.items.map(ke).join(" • ")})]}),t.kitchen_progress.total>0?s.jsxs("div",{className:"space-y-2 rounded-xl bg-zinc-50 p-3 ring-1 ring-zinc-100",children:[s.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:["Kitchen Progress ",t.kitchen_progress.prepared,"/",t.kitchen_progress.total]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.kitchen_screens.map(je)})]}):s.jsx("div",{className:"rounded-xl bg-emerald-50 p-3 text-xs font-bold text-emerald-700 ring-1 ring-emerald-100",children:"No kitchen routing needed. Ready for serving."}),c?s.jsx(J,{type:"button",className:`h-10 w-full rounded-xl font-black ${c.className??"bg-[#F57C00] hover:bg-[#E65100]"}`,disabled:O===t.id,onClick:()=>c.onClick(t.id),children:O===t.id?"Processing...":c.label}):null]})},t.id),e[2]=O,e[3]=A):A=e[3];const l=A;let E;e[4]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(ne,{title:"Waiter Board"}),e[4]=E):E=e[4];let H;e[5]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx(Q,{className:"border-b border-zinc-100",children:s.jsxs(X,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-900",children:[s.jsx(ce,{className:"size-4 text-[#F57C00]"}),"Waiter Screens"]})}),e[5]=H):H=e[5];let m;e[6]!==v||e[7]!==w?(m=s.jsxs(i,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[H,s.jsx(r,{className:"pt-4",children:v.length===0?s.jsx("p",{className:"text-sm font-medium text-zinc-500",children:"No waiter screen assigned to your account yet."}):s.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(t=>s.jsxs(J,{type:"button",size:"sm",variant:w===t.id?"default":"outline",className:w===t.id?"bg-[#F57C00] hover:bg-[#E65100]":"",onClick:()=>Z(t.id),children:[t.name," (",t.pickup_location_name,")"]},t.id))})})]}),e[6]=v,e[7]=w,e[8]=m):m=e[8];let R;e[9]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Pending Confirmation"}),e[9]=R):R=e[9];let d;e[10]!==n.pending_confirmation?(d=s.jsx(i,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(r,{className:"pt-5",children:[R,s.jsx("p",{className:"mt-2 text-3xl font-black text-zinc-900",children:n.pending_confirmation})]})}),e[10]=n.pending_confirmation,e[11]=d):d=e[11];let P;e[12]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Awaiting Kitchen"}),e[12]=P):P=e[12];let o;e[13]!==n.awaiting_kitchen?(o=s.jsx(i,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(r,{className:"pt-5",children:[P,s.jsx("p",{className:"mt-2 text-3xl font-black text-zinc-900",children:n.awaiting_kitchen})]})}),e[13]=n.awaiting_kitchen,e[14]=o):o=e[14];let q;e[15]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Ready To Serve"}),e[15]=q):q=e[15];let x;e[16]!==n.ready_to_serve?(x=s.jsx(i,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(r,{className:"pt-5",children:[q,s.jsx("p",{className:"mt-2 text-3xl font-black text-zinc-900",children:n.ready_to_serve})]})}),e[16]=n.ready_to_serve,e[17]=x):x=e[17];let K;e[18]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Served (Recent)"}),e[18]=K):K=e[18];let p;e[19]!==n.served?(p=s.jsx(i,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(r,{className:"pt-5",children:[K,s.jsx("p",{className:"mt-2 text-3xl font-black text-zinc-900",children:n.served})]})}),e[19]=n.served,e[20]=p):p=e[20];let h;e[21]!==o||e[22]!==x||e[23]!==p||e[24]!==d?(h=s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[d,o,x,p]}),e[21]=o,e[22]=x,e[23]=p,e[24]=d,e[25]=h):h=e[25];let W;e[26]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsxs("h2",{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-900",children:[s.jsx(pe,{className:"size-4 text-amber-500"}),"Confirm Orders"]}),e[26]=W):W=e[26];let f;e[27]!==S||e[28]!==l?(f=S.length===0?s.jsx(i,{className:"border-dashed border-zinc-300",children:s.jsx(r,{className:"py-8 text-center text-sm font-medium text-zinc-500",children:"No pending confirmation orders."})}):S.map(t=>l(t,{label:"Confirm And Send",onClick:ee})),e[27]=S,e[28]=l,e[29]=f):f=e[29];let g;e[30]!==f?(g=s.jsxs("section",{className:"space-y-3",children:[W,f]}),e[30]=f,e[31]=g):g=e[31];let I;e[32]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsxs("h2",{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-900",children:[s.jsx(fe,{className:"size-4 text-indigo-500"}),"Waiting Kitchen"]}),e[32]=I):I=e[32];let b;e[33]!==C||e[34]!==l?(b=C.length===0?s.jsx(i,{className:"border-dashed border-zinc-300",children:s.jsx(r,{className:"py-8 text-center text-sm font-medium text-zinc-500",children:"No confirmed orders waiting on kitchen."})}):C.map(t=>l(t)),e[33]=C,e[34]=l,e[35]=b):b=e[35];let u;e[36]!==b?(u=s.jsxs("section",{className:"space-y-3",children:[I,b]}),e[36]=b,e[37]=u):u=e[37];let L;e[38]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsxs("h2",{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-900",children:[s.jsx(me,{className:"size-4 text-emerald-500"}),"Ready To Serve"]}),e[38]=L):L=e[38];let N;e[39]!==B||e[40]!==l?(N=B.length===0?s.jsx(i,{className:"border-dashed border-zinc-300",children:s.jsx(r,{className:"py-8 text-center text-sm font-medium text-zinc-500",children:"No orders ready to serve."})}):B.map(t=>l(t,{label:"Mark As Served",onClick:se,className:"bg-emerald-600 hover:bg-emerald-700"})),e[39]=B,e[40]=l,e[41]=N):N=e[41];let j;e[42]!==N?(j=s.jsxs("section",{className:"space-y-3",children:[L,N]}),e[42]=N,e[43]=j):j=e[43];let k;e[44]!==g||e[45]!==u||e[46]!==j?(k=s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[g,u,j]}),e[44]=g,e[45]=u,e[46]=j,e[47]=k):k=e[47];let G;e[48]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(Q,{className:"border-b border-zinc-100",children:s.jsxs(X,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-900",children:[s.jsx(ie,{className:"size-4 text-zinc-500"}),"Recently Served"]})}),e[48]=G):G=e[48];let y;e[49]!==$?(y=$.length===0?s.jsx("p",{className:"text-sm font-medium text-zinc-500",children:"No served orders yet."}):$.map(Ne),e[49]=$,e[50]=y):y=e[50];let z;e[51]!==y?(z=s.jsxs(i,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[G,s.jsx(r,{className:"space-y-2 pt-4",children:y})]}),e[51]=y,e[52]=z):z=e[52];let D;return e[53]!==h||e[54]!==k||e[55]!==z||e[56]!==m?(D=s.jsxs(re,{breadcrumbs:ge,children:[E,s.jsxs("div",{className:"min-h-screen space-y-6 bg-zinc-50/60 p-6",children:[m,h,k,z]})]}),e[53]=h,e[54]=k,e[55]=z,e[56]=m,e[57]=D):D=e[57],D}function Ne(a){return s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-xl bg-zinc-50 px-3 py-2 ring-1 ring-zinc-100",children:[s.jsxs("p",{className:"text-sm font-bold text-zinc-800",children:["#",a.id," ",a.customer_name??"Guest",a.table_name?` • Table ${a.table_name}`:""]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_,{className:Y(a.source_channel),children:a.source_channel}),s.jsxs(_,{className:"bg-emerald-100 text-emerald-700",children:[s.jsx(oe,{className:"mr-1 size-3"}),"Served"]})]})]},a.id)}function je(a){return s.jsxs(_,{className:ue(a.status),children:[a.name??"Kitchen",": ",a.status]},a.id)}function ke(a){return`${a.name??"Item"} x${a.quantity}`}function ye(a){V.get("/staff/waiter-board",{screen_id:a},{preserveState:!0,replace:!0})}export{Me as default};
