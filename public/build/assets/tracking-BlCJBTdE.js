import{c as je,a as Ne,u as ve,r as he,j as t,b as we,H as _e,L as de}from"./app-D84iCcti.js";import{I as ke}from"./input-error-Bb3X9jEa.js";import{b as ye,B as me}from"./createLucideIcon-Zg2zAzDP.js";import{C as ue}from"./circle-check-BVEd2mup.js";import{C as Ee}from"./circle-alert-DSjBQNpB.js";import{A as Fe}from"./arrow-right-DSRH5FAv.js";import{R as Ce}from"./receipt-B1TRmLMN.js";import{U as ze}from"./upload-CGIo8c5P.js";import{E as Ae}from"./external-link-BdA2PQIV.js";import{S as Se}from"./shopping-bag-BnOSE3dy.js";import{C as ge}from"./clock-3-conF8FCi.js";import{M as Re}from"./map-pin-CWjuY-5I.js";import{P as Pe}from"./package-9kUSMK7B.js";/* empty css            */const Ie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Oe=ye("Circle",Ie),xe=[{key:"pending",label:"Order Received",desc:"We have received your order and are waiting for payment verification."},{key:"preparing",label:"Preparing",desc:"Our team is carefully preparing your delicious items."},{key:"ready",label:"Ready for Pickup",desc:"Your order is packaged and ready at the selected location."},{key:"completed",label:"Picked Up",desc:"Order has been successfully collected. Enjoy!"}],De=1e4;function Te(){if(typeof window>"u")return!1;if(window.Telegram?.WebApp)return!0;const e=s=>{const r=s.trim().replace(/^[?#]/,"");return r===""?!1:new URLSearchParams(r).has("tgWebAppData")};return e(window.location.search)||e(window.location.hash)}function be(i){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(i)}function Ze(i){const e=je.c(99),{order:s}=i,{flash:r}=Ne().props,pe=Te()?"/telegram/menu":"/";let D;e[0]===Symbol.for("react.memo_cache_sentinel")?(D={receipt:null},e[0]=D):D=e[0];const a=ve(D),se=he.useRef(!1);let T;e[1]!==s.order_status?(T=xe.findIndex(l=>l.key===s.order_status),e[1]=s.order_status,e[2]=T):T=e[2];const O=Math.max(T,0),ae=s.receipt_status!=="approved";let $,B;e[3]!==a.processing?($=()=>{const l=window.setInterval(()=>{document.visibilityState!=="visible"||a.processing||se.current||(se.current=!0,we.reload({only:["order"],preserveState:!0,preserveScroll:!0,onFinish:()=>{se.current=!1}}))},De);return()=>{window.clearInterval(l)}},B=[a.processing],e[3]=a.processing,e[4]=$,e[5]=B):($=e[4],B=e[5]),he.useEffect($,B);let M;e[6]!==a||e[7]!==s.tracking_token?(M=()=>{a.post(`/orders/${s.tracking_token}/receipt`,{forceFormData:!0,preserveScroll:!0})},e[6]=a,e[7]=s.tracking_token,e[8]=M):M=e[8];const ie=M,re=`Track Order #${s.id} - Cafe`;let c;e[9]!==re?(c=t.jsx(_e,{title:re}),e[9]=re,e[10]=c):c=e[10];let U;e[11]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsxs(de,{href:pe,className:"flex items-center gap-2 group",children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-[#212121] transition-transform group-hover:rotate-12",children:t.jsx(Se,{className:"size-4 text-[#F57C00]"})}),t.jsx("span",{className:"text-sm font-black uppercase tracking-tighter",children:"Cafe"})]}),e[11]=U):U=e[11];let n;e[12]!==s.id?(n=t.jsxs("span",{className:"text-xs font-black uppercase tracking-widest text-[#9E9E9E]",children:["Order #",s.id]}),e[12]=s.id,e[13]=n):n=e[13];let L;e[14]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("div",{className:"h-4 w-[1px] bg-zinc-200"}),e[14]=L):L=e[14];let H;e[15]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(me,{asChild:!0,variant:"ghost",className:"h-8 rounded-full px-4 text-xs font-bold text-[#F57C00] hover:bg-[#FFF3E0]",children:t.jsx(de,{href:pe,children:"New Order"})}),e[15]=H):H=e[15];let o;e[16]!==n?(o=t.jsx("header",{className:"sticky top-0 z-50 border-b border-zinc-100 bg-white/80 backdrop-blur-md",children:t.jsxs("div",{className:"mx-auto flex h-16 max-w-4xl items-center justify-between px-4",children:[U,t.jsxs("div",{className:"flex items-center gap-4",children:[n,L,H]})]})}),e[16]=n,e[17]=o):o=e[17];let d;e[18]!==r?(d=(r?.success||r?.error)&&t.jsxs("div",{className:"mb-8 animate-in slide-in-from-top-4 duration-500",children:[r?.success&&t.jsxs("div",{className:"flex items-center gap-3 rounded-2xl bg-[#E8F5E9] p-4 text-[#2E7D32] shadow-sm ring-1 ring-[#2E7D32]/20",children:[t.jsx(ue,{className:"size-5"}),t.jsx("p",{className:"text-sm font-bold",children:r.success})]}),r?.error&&t.jsxs("div",{className:"flex items-center gap-3 rounded-2xl bg-[#FFEBEE] p-4 text-[#C62828] shadow-sm ring-1 ring-[#C62828]/20",children:[t.jsx(Ee,{className:"size-5"}),t.jsx("p",{className:"text-sm font-bold",children:r.error})]})]}),e[18]=r,e[19]=d):d=e[19];const le=`rounded-full px-4 py-1.5 text-[10px] font-black uppercase tracking-[0.2em] shadow-xl transition-all duration-500 ring-2 ring-[#F57C00]/20 ${s.order_status==="completed"?"bg-[#2E7D32] text-white":"bg-[#F57C00] text-white shadow-[#F57C00]/40 scale-110  "}`,ce=xe[O];let m;e[20]!==le||e[21]!==ce.label?(m=t.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 md:right-8",children:t.jsx("div",{className:le,children:ce.label})}),e[20]=le,e[21]=ce.label,e[22]=m):m=e[22];let V;e[23]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-40",children:"Pickup Identification"}),e[23]=V):V=e[23];let x;e[24]!==s.pickup_location.name?(x=t.jsxs("div",{children:[V,t.jsx("h4",{className:"mt-2 text-xl font-bold md:text-2xl",children:s.pickup_location.name})]}),e[24]=s.pickup_location.name,e[25]=x):x=e[25];let p;e[26]!==m||e[27]!==x?(p=t.jsxs("div",{className:"relative bg-[#212121] px-6 py-7 text-white md:px-8",children:[m,x]}),e[26]=m,e[27]=x,e[28]=p):p=e[28];let W,G;e[29]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-2xl bg-[#FAFAFA] text-[#212121] ring-1 ring-zinc-100",children:t.jsx(ge,{className:"size-6 text-[#F57C00]"})}),G=t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Scheduled Time"}),e[29]=W,e[30]=G):(W=e[29],G=e[30]);let f;e[31]!==s.pickup_date?(f=t.jsxs("div",{className:"flex items-start gap-5",children:[W,t.jsxs("div",{children:[G,t.jsx("p",{className:"mt-1 text-base font-bold text-[#212121]",children:s.pickup_date})]})]}),e[31]=s.pickup_date,e[32]=f):f=e[32];let Y;e[33]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-2xl bg-[#FAFAFA] text-[#212121] ring-1 ring-zinc-100",children:t.jsx(Re,{className:"size-6 text-[#F57C00]"})}),e[33]=Y):Y=e[33];let q;e[34]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Pickup Address"}),e[34]=q):q=e[34];let h;e[35]!==s.pickup_location.address?(h=t.jsx("p",{className:"mt-1 text-sm font-bold leading-relaxed text-[#212121]",children:s.pickup_location.address}),e[35]=s.pickup_location.address,e[36]=h):h=e[36];let u;e[37]!==s.pickup_location.google_maps_url?(u=s.pickup_location.google_maps_url&&t.jsxs("a",{href:s.pickup_location.google_maps_url,target:"_blank",rel:"noopener noreferrer",className:"group mt-3 inline-flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-[#F57C00] transition-colors hover:text-[#E65100]",children:["Open in Google Maps ",t.jsx(Fe,{className:"size-3 transition-transform group-hover:translate-x-1"})]}),e[37]=s.pickup_location.google_maps_url,e[38]=u):u=e[38];let g;e[39]!==h||e[40]!==u?(g=t.jsxs("div",{className:"flex items-start gap-5",children:[Y,t.jsxs("div",{className:"flex-1 min-w-0",children:[q,h,u]})]}),e[39]=h,e[40]=u,e[41]=g):g=e[41];let b;e[42]!==f||e[43]!==g?(b=t.jsxs("div",{className:"grid gap-8 p-6 md:grid-cols-2 md:p-8",children:[f,g]}),e[42]=f,e[43]=g,e[44]=b):b=e[44];let j;e[45]!==p||e[46]!==b?(j=t.jsx("div",{className:"lg:col-span-2",children:t.jsxs("div",{className:"overflow-hidden rounded-3xl bg-white shadow-xl shadow-zinc-200/50 ring-1 ring-zinc-200",children:[p,b]})}),e[45]=p,e[46]=b,e[47]=j):j=e[47];let J;e[48]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsxs("h3",{className:"mb-8 flex items-center gap-3 text-sm font-black uppercase tracking-widest text-[#9E9E9E]",children:[t.jsx(Pe,{className:"size-5 text-[#F57C00]"}),"Order Journey"]}),e[48]=J):J=e[48];let K;e[49]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx("div",{className:"absolute left-[15px] top-2 h-[calc(100%-24px)] w-[2px] bg-zinc-100"}),e[49]=K):K=e[49];let N;e[50]!==O?(N=xe.map((l,fe)=>{const oe=fe<O,te=fe===O;return t.jsxs("div",{className:"relative flex gap-6",children:[t.jsx("div",{className:`relative z-10 flex h-8 w-8 shrink-0 items-center justify-center rounded-full transition-all duration-500 ${oe?"bg-[#2E7D32] text-white":te?"bg-[#F57C00] text-white shadow-lg shadow-[#F57C00]/30 scale-125":"bg-white text-zinc-300 ring-4 ring-[#FAFAFA]"}`,children:oe?t.jsx(ue,{className:"size-5"}):te?t.jsx("div",{className:"h-2 w-2 rounded-full bg-white animate-pulse"}):t.jsx(Oe,{className:"size-4"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:`text-base font-black ${oe||te?"text-[#212121]":"text-[#9E9E9E]"}`,children:l.label}),t.jsx("p",{className:"mt-1 text-sm leading-relaxed text-[#757575]",children:l.desc}),te&&t.jsx("div",{className:"mt-2 inline-flex items-center gap-2 rounded-full bg-[#FFF3E0] px-3 py-1 text-[10px] font-black uppercase text-[#E65100]",children:"In Progress"})]})]},l.key)}),e[50]=O,e[51]=N):N=e[51];let v;e[52]!==N?(v=t.jsxs("section",{className:"rounded-3xl bg-white p-8 shadow-xl shadow-zinc-200/50 ring-1 ring-zinc-200",children:[J,t.jsxs("div",{className:"relative space-y-12",children:[K,N]})]}),e[52]=N,e[53]=v):v=e[53];let w;e[54]!==a||e[55]!==s.disapproval_reason||e[56]!==s.receipt_status||e[57]!==s.receipt_url||e[58]!==ae||e[59]!==ie?(w=ae&&t.jsxs("section",{className:`rounded-3xl p-8 shadow-xl transition-all duration-500 ${s.receipt_status==="disapproved"?"bg-[#FFEBEE] ring-2 ring-[#C62828]/20":"bg-white ring-1 ring-zinc-200"}`,children:[t.jsxs("h3",{className:`mb-4 flex items-center gap-3 text-sm font-black uppercase tracking-widest ${s.receipt_status==="disapproved"?"text-[#C62828]":"text-[#9E9E9E]"}`,children:[t.jsx(Ce,{className:"size-5"}),"Payment Verification"]}),s.receipt_status==="disapproved"&&t.jsxs("div",{className:"mb-6 rounded-2xl bg-white/50 p-4 text-[#C62828] shadow-sm",children:[t.jsx("p",{className:"text-xs font-black uppercase tracking-widest opacity-60",children:"Rejection Reason:"}),t.jsx("p",{className:"mt-1 text-sm font-bold",children:s.disapproval_reason})]}),t.jsxs("div",{className:"grid gap-6",children:[t.jsxs("div",{className:"group relative flex flex-col items-center justify-center rounded-3xl border-2 border-dashed border-zinc-200 bg-[#FAFAFA] p-8 transition-all hover:border-[#F57C00] hover:bg-white text-center",children:[t.jsx("div",{className:"mb-4 rounded-full bg-white p-4 shadow-sm group-hover:scale-110 group-hover:text-[#F57C00] transition-all",children:t.jsx(ze,{className:"size-8 text-zinc-300"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-base font-black text-[#212121]",children:a.data.receipt?a.data.receipt.name:"Choose receipt file"}),t.jsx("p",{className:"mt-1 text-xs text-[#9E9E9E]",children:"High resolution images preferred (Max 5MB)"})]}),t.jsx("input",{id:"receipt-tracking",type:"file",className:"absolute inset-0 cursor-pointer opacity-0",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:l=>a.setData("receipt",l.target.files?.[0]??null)})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[s.receipt_url&&t.jsxs("a",{href:s.receipt_url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-xs font-bold text-[#757575] hover:text-[#F57C00] transition-colors",children:[t.jsx(Ae,{className:"size-4"}),"View Previously Uploaded Receipt"]}),t.jsx(me,{className:"h-14 w-full rounded-2xl bg-[#F57C00] text-base font-black text-white shadow-lg shadow-[#F57C00]/20 hover:bg-[#E65100] active:scale-[0.98] disabled:opacity-50 transition-all",disabled:a.processing||!a.data.receipt,onClick:ie,children:a.processing?"Uploading...":"Submit Receipt for Verification"}),t.jsx(ke,{message:a.errors.receipt})]})]})]}),e[54]=a,e[55]=s.disapproval_reason,e[56]=s.receipt_status,e[57]=s.receipt_url,e[58]=ae,e[59]=ie,e[60]=w):w=e[60];let _;e[61]!==v||e[62]!==w?(_=t.jsxs("div",{className:"space-y-8",children:[v,w]}),e[61]=v,e[62]=w,e[63]=_):_=e[63];let k;e[64]!==s.items.length?(k=t.jsxs("h4",{className:"mb-6 flex items-center justify-between text-sm font-black uppercase tracking-widest text-[#9E9E9E]",children:["Your Order",t.jsxs("span",{className:"rounded-full bg-[#FAFAFA] px-2 py-1 text-[10px] ring-1 ring-zinc-100",children:[s.items.length," items"]})]}),e[64]=s.items.length,e[65]=k):k=e[65];let y;e[66]!==s.items?(y=s.items.map($e),e[66]=s.items,e[67]=y):y=e[67];let Q;e[68]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx("span",{className:"text-sm font-bold text-[#757575]",children:"Grand Total"}),e[68]=Q):Q=e[68];let E;e[69]!==s.total_amount?(E=be(s.total_amount),e[69]=s.total_amount,e[70]=E):E=e[70];let F;e[71]!==E?(F=t.jsx("div",{className:"mt-6 border-t border-zinc-100 pt-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[Q,t.jsx("span",{className:"text-xl font-black text-[#F57C00]",children:E})]})}),e[71]=E,e[72]=F):F=e[72];let C;e[73]!==y||e[74]!==F?(C=t.jsxs("div",{className:"space-y-4",children:[y,F]}),e[73]=y,e[74]=F,e[75]=C):C=e[75];let z;e[76]!==k||e[77]!==C?(z=t.jsx("aside",{className:"space-y-6",children:t.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-lg shadow-zinc-200/50 ring-1 ring-zinc-200",children:[k,C]})}),e[76]=k,e[77]=C,e[78]=z):z=e[78];let A;e[79]!==j||e[80]!==_||e[81]!==z?(A=t.jsxs("div",{className:"grid gap-8 lg:grid-cols-[1fr_340px]",children:[j,_,z]}),e[79]=j,e[80]=_,e[81]=z,e[82]=A):A=e[82];const ne=`/orders/${s.tracking_token}/confirmation`;let X;e[83]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(ge,{className:"mr-2 size-4"}),e[83]=X):X=e[83];let S;e[84]!==ne?(S=t.jsx(me,{asChild:!0,variant:"ghost",className:"h-12 rounded-xl px-8 font-bold text-[#757575] hover:bg-zinc-100",children:t.jsxs(de,{href:ne,children:[X,"View Order Confirmation"]})}),e[84]=ne,e[85]=S):S=e[85];let Z;e[86]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsxs("div",{className:"flex items-center gap-4 text-[#9E9E9E]",children:[t.jsx("div",{className:"h-[1px] w-12 bg-zinc-200"}),t.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:"Premium Cafe Experience"}),t.jsx("div",{className:"h-[1px] w-12 bg-zinc-200"})]}),e[86]=Z):Z=e[86];let R;e[87]!==S?(R=t.jsxs("div",{className:"mt-12 flex flex-col items-center justify-center gap-6 border-t border-zinc-100 pt-12",children:[S,Z]}),e[87]=S,e[88]=R):R=e[88];let P;e[89]!==d||e[90]!==A||e[91]!==R?(P=t.jsxs("main",{className:"mx-auto max-w-4xl px-4 pt-12",children:[d,A,R]}),e[89]=d,e[90]=A,e[91]=R,e[92]=P):P=e[92];let I;e[93]!==o||e[94]!==P?(I=t.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] text-[#212121] selection:bg-[#F57C00]/20 pb-20",children:[o,P]}),e[93]=o,e[94]=P,e[95]=I):I=e[95];let ee;return e[96]!==I||e[97]!==c?(ee=t.jsxs(t.Fragment,{children:[c,I]}),e[96]=I,e[97]=c,e[98]=ee):ee=e[98],ee}function $e(i){return t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-12 w-12 shrink-0 overflow-hidden rounded-xl border border-zinc-100 bg-[#FAFAFA]",children:i.image_url?t.jsx("img",{src:i.image_url,alt:i.name??"Item",className:"h-full w-full object-cover",loading:"lazy"}):t.jsx("div",{className:"flex h-full w-full items-center justify-center bg-zinc-50 text-[8px] font-black uppercase text-zinc-300",children:"P"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"truncate text-sm font-bold text-[#212121]",children:i.name}),t.jsxs("p",{className:"text-xs font-medium text-[#757575]",children:["x",i.quantity]})]})]}),t.jsx("span",{className:"text-sm font-black text-[#212121]",children:be(i.line_total)})]},i.id)}export{Ze as default};
