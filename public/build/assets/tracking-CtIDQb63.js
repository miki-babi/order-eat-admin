import{c as Ce,a as ze,u as Se,r as M,j as t,b as Ae,H as Re,L as be}from"./app-SZ8ZgFWE.js";import{I as Pe}from"./input-error-ACiSH9h7.js";import{b as Ie,B as je}from"./createLucideIcon-gmhFn2Sn.js";import{C as _e}from"./circle-check-nD_vqT2l.js";import{C as De}from"./circle-alert-DZTWDbiI.js";import{A as Oe}from"./arrow-right-B5mZB97I.js";import{R as Te}from"./receipt-CYGJFH4M.js";import{U as Le}from"./upload-vvzxakv6.js";import{E as $e}from"./external-link-Zb_fmCN1.js";import{S as Me}from"./shopping-bag-BTEOvFNf.js";import{C as ke}from"./clock-3--lA7MvVc.js";import{M as Be}from"./map-pin-W6gYFwTR.js";import{P as Ue}from"./package-DY0FEuS_.js";/* empty css            */const He=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ve=Ie("Circle",He),we=[{key:"pending",label:"Order Received",desc:"We have received your order and are waiting for payment verification."},{key:"preparing",label:"Preparing",desc:"Our team is carefully preparing your delicious items."},{key:"ready",label:"Ready for Pickup",desc:"Your order is packaged and ready at the selected location."},{key:"completed",label:"Picked Up",desc:"Order has been successfully collected. Enjoy!"}],Ye=1e4;function We(){if(typeof window>"u")return!1;if(window.Telegram?.WebApp)return!0;const e=s=>{const l=s.trim().replace(/^[?#]/,"");return l===""?!1:new URLSearchParams(l).has("tgWebAppData")};return e(window.location.search)||e(window.location.hash)}function ye(a){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(a)}function ct(a){const e=Ce.c(104),{order:s}=a,{flash:l}=ze().props,Ne=We()?"/telegram/menu":"/";let B;e[0]===Symbol.for("react.memo_cache_sentinel")?(B={receipt:null},e[0]=B):B=e[0];const r=Se(B),ce=M.useRef(!1),oe=M.useRef(0),[Ee,de]=M.useState(!1);let U;e[1]!==s.order_status?(U=we.findIndex(i=>i.key===s.order_status),e[1]=s.order_status,e[2]=U):U=e[2];const L=Math.max(U,0),me=s.receipt_status!=="approved";let H,V;e[3]===Symbol.for("react.memo_cache_sentinel")?(H=()=>{if(typeof window>"u")return;let i=!1;const c=()=>{i||(i=!0,window.requestAnimationFrame(()=>{const n=window.scrollY||0;if(window.matchMedia("(min-width: 768px)").matches){de(!1),oe.current=n,i=!1;return}const ve=n-oe.current,Fe=n>72;ve>6&&Fe?de(!0):(ve<-6||n<24)&&de(!1),oe.current=n,i=!1}))};return window.addEventListener("scroll",c,{passive:!0}),window.addEventListener("resize",c),c(),()=>{window.removeEventListener("scroll",c),window.removeEventListener("resize",c)}},V=[],e[3]=H,e[4]=V):(H=e[3],V=e[4]),M.useEffect(H,V);let Y,W;e[5]!==r.processing?(Y=()=>{const i=window.setInterval(()=>{document.visibilityState!=="visible"||r.processing||ce.current||(ce.current=!0,Ae.reload({only:["order"],preserveState:!0,preserveScroll:!0,onFinish:()=>{ce.current=!1}}))},Ye);return()=>{window.clearInterval(i)}},W=[r.processing],e[5]=r.processing,e[6]=Y,e[7]=W):(Y=e[6],W=e[7]),M.useEffect(Y,W);let q;e[8]!==r||e[9]!==s.tracking_token?(q=()=>{r.post(`/orders/${s.tracking_token}/receipt`,{forceFormData:!0,preserveScroll:!0})},e[8]=r,e[9]=s.tracking_token,e[10]=q):q=e[10];const xe=q,pe=`Track Order #${s.id} - Cafe`;let o;e[11]!==pe?(o=t.jsx(Re,{title:pe}),e[11]=pe,e[12]=o):o=e[12];const fe=`sticky top-0 z-50 border-b border-zinc-100 bg-white/80 backdrop-blur-md transition-all duration-300 md:translate-y-0 md:opacity-100 md:pointer-events-auto ${Ee?"-translate-y-[120%] opacity-0 pointer-events-none":"translate-y-0 opacity-100"}`;let G;e[13]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsxs(be,{href:Ne,className:"flex items-center gap-2 group",children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-[#212121] transition-transform group-hover:rotate-12",children:t.jsx(Me,{className:"size-4 text-[#F57C00]"})}),t.jsx("span",{className:"text-sm font-black uppercase tracking-tighter",children:"Cafe"})]}),e[13]=G):G=e[13];let d;e[14]!==s.id?(d=t.jsxs("span",{className:"text-xs font-black uppercase tracking-widest text-[#9E9E9E]",children:["Order #",s.id]}),e[14]=s.id,e[15]=d):d=e[15];let J;e[16]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("div",{className:"h-4 w-[1px] bg-zinc-200"}),e[16]=J):J=e[16];let K;e[17]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(je,{asChild:!0,variant:"ghost",className:"h-8 rounded-full px-4 text-xs font-bold text-[#F57C00] hover:bg-[#FFF3E0]",children:t.jsx(be,{href:Ne,children:"New Order"})}),e[17]=K):K=e[17];let m;e[18]!==d?(m=t.jsxs("div",{className:"mx-auto flex h-16 max-w-4xl items-center justify-between px-4",children:[G,t.jsxs("div",{className:"flex items-center gap-4",children:[d,J,K]})]}),e[18]=d,e[19]=m):m=e[19];let x;e[20]!==fe||e[21]!==m?(x=t.jsx("header",{className:fe,children:m}),e[20]=fe,e[21]=m,e[22]=x):x=e[22];let p;e[23]!==l?(p=(l?.success||l?.error)&&t.jsxs("div",{className:"mb-8 animate-in slide-in-from-top-4 duration-500",children:[l?.success&&t.jsxs("div",{className:"flex items-center gap-3 rounded-2xl bg-[#E8F5E9] p-4 text-[#2E7D32] shadow-sm ring-1 ring-[#2E7D32]/20",children:[t.jsx(_e,{className:"size-5"}),t.jsx("p",{className:"text-sm font-bold",children:l.success})]}),l?.error&&t.jsxs("div",{className:"flex items-center gap-3 rounded-2xl bg-[#FFEBEE] p-4 text-[#C62828] shadow-sm ring-1 ring-[#C62828]/20",children:[t.jsx(De,{className:"size-5"}),t.jsx("p",{className:"text-sm font-bold",children:l.error})]})]}),e[23]=l,e[24]=p):p=e[24];const he=`rounded-full px-4 py-1.5 text-[10px] font-black uppercase tracking-[0.2em] shadow-xl transition-all duration-500 ring-2 ring-[#F57C00]/20 ${s.order_status==="completed"?"bg-[#2E7D32] text-white":"bg-[#F57C00] text-white shadow-[#F57C00]/40 scale-110  "}`,ue=we[L];let f;e[25]!==he||e[26]!==ue.label?(f=t.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 md:right-8",children:t.jsx("div",{className:he,children:ue.label})}),e[25]=he,e[26]=ue.label,e[27]=f):f=e[27];let Q;e[28]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-40",children:"Pickup Identification"}),e[28]=Q):Q=e[28];let h;e[29]!==s.pickup_location.name?(h=t.jsxs("div",{children:[Q,t.jsx("h4",{className:"mt-2 text-xl font-bold md:text-2xl",children:s.pickup_location.name})]}),e[29]=s.pickup_location.name,e[30]=h):h=e[30];let u;e[31]!==f||e[32]!==h?(u=t.jsxs("div",{className:"relative bg-[#212121] px-6 py-7 text-white md:px-8",children:[f,h]}),e[31]=f,e[32]=h,e[33]=u):u=e[33];let X,Z;e[34]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-2xl bg-[#FAFAFA] text-[#212121] ring-1 ring-zinc-100",children:t.jsx(ke,{className:"size-6 text-[#F57C00]"})}),Z=t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Scheduled Time"}),e[34]=X,e[35]=Z):(X=e[34],Z=e[35]);let g;e[36]!==s.pickup_date?(g=t.jsxs("div",{className:"flex items-start gap-5",children:[X,t.jsxs("div",{children:[Z,t.jsx("p",{className:"mt-1 text-base font-bold text-[#212121]",children:s.pickup_date})]})]}),e[36]=s.pickup_date,e[37]=g):g=e[37];let ee;e[38]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-2xl bg-[#FAFAFA] text-[#212121] ring-1 ring-zinc-100",children:t.jsx(Be,{className:"size-6 text-[#F57C00]"})}),e[38]=ee):ee=e[38];let te;e[39]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[#9E9E9E]",children:"Pickup Address"}),e[39]=te):te=e[39];let b;e[40]!==s.pickup_location.address?(b=t.jsx("p",{className:"mt-1 text-sm font-bold leading-relaxed text-[#212121]",children:s.pickup_location.address}),e[40]=s.pickup_location.address,e[41]=b):b=e[41];let j;e[42]!==s.pickup_location.google_maps_url?(j=s.pickup_location.google_maps_url&&t.jsxs("a",{href:s.pickup_location.google_maps_url,target:"_blank",rel:"noopener noreferrer",className:"group mt-3 inline-flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-[#F57C00] transition-colors hover:text-[#E65100]",children:["Open in Google Maps ",t.jsx(Oe,{className:"size-3 transition-transform group-hover:translate-x-1"})]}),e[42]=s.pickup_location.google_maps_url,e[43]=j):j=e[43];let w;e[44]!==b||e[45]!==j?(w=t.jsxs("div",{className:"flex items-start gap-5",children:[ee,t.jsxs("div",{className:"flex-1 min-w-0",children:[te,b,j]})]}),e[44]=b,e[45]=j,e[46]=w):w=e[46];let N;e[47]!==g||e[48]!==w?(N=t.jsxs("div",{className:"grid gap-8 p-6 md:grid-cols-2 md:p-8",children:[g,w]}),e[47]=g,e[48]=w,e[49]=N):N=e[49];let v;e[50]!==u||e[51]!==N?(v=t.jsx("div",{className:"lg:col-span-2",children:t.jsxs("div",{className:"overflow-hidden rounded-3xl bg-white shadow-xl shadow-zinc-200/50 ring-1 ring-zinc-200",children:[u,N]})}),e[50]=u,e[51]=N,e[52]=v):v=e[52];let se;e[53]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs("h3",{className:"mb-8 flex items-center gap-3 text-sm font-black uppercase tracking-widest text-[#9E9E9E]",children:[t.jsx(Ue,{className:"size-5 text-[#F57C00]"}),"Order Journey"]}),e[53]=se):se=e[53];let re;e[54]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("div",{className:"absolute left-[15px] top-2 h-[calc(100%-24px)] w-[2px] bg-zinc-100"}),e[54]=re):re=e[54];let _;e[55]!==L?(_=we.map((i,c)=>{const n=c<L,$=c===L;return t.jsxs("div",{className:"relative flex gap-6",children:[t.jsx("div",{className:`relative z-10 flex h-8 w-8 shrink-0 items-center justify-center rounded-full transition-all duration-500 ${n?"bg-[#2E7D32] text-white":$?"bg-[#F57C00] text-white shadow-lg shadow-[#F57C00]/30 scale-125":"bg-white text-zinc-300 ring-4 ring-[#FAFAFA]"}`,children:n?t.jsx(_e,{className:"size-5"}):$?t.jsx("div",{className:"h-2 w-2 rounded-full bg-white animate-pulse"}):t.jsx(Ve,{className:"size-4"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:`text-base font-black ${n||$?"text-[#212121]":"text-[#9E9E9E]"}`,children:i.label}),t.jsx("p",{className:"mt-1 text-sm leading-relaxed text-[#757575]",children:i.desc}),$&&t.jsx("div",{className:"mt-2 inline-flex items-center gap-2 rounded-full bg-[#FFF3E0] px-3 py-1 text-[10px] font-black uppercase text-[#E65100]",children:"In Progress"})]})]},i.key)}),e[55]=L,e[56]=_):_=e[56];let k;e[57]!==_?(k=t.jsxs("section",{className:"rounded-3xl bg-white p-8 shadow-xl shadow-zinc-200/50 ring-1 ring-zinc-200",children:[se,t.jsxs("div",{className:"relative space-y-12",children:[re,_]})]}),e[57]=_,e[58]=k):k=e[58];let y;e[59]!==r||e[60]!==s.disapproval_reason||e[61]!==s.receipt_status||e[62]!==s.receipt_url||e[63]!==me||e[64]!==xe?(y=me&&t.jsxs("section",{className:`rounded-3xl p-8 shadow-xl transition-all duration-500 ${s.receipt_status==="disapproved"?"bg-[#FFEBEE] ring-2 ring-[#C62828]/20":"bg-white ring-1 ring-zinc-200"}`,children:[t.jsxs("h3",{className:`mb-4 flex items-center gap-3 text-sm font-black uppercase tracking-widest ${s.receipt_status==="disapproved"?"text-[#C62828]":"text-[#9E9E9E]"}`,children:[t.jsx(Te,{className:"size-5"}),"Payment Verification"]}),s.receipt_status==="disapproved"&&t.jsxs("div",{className:"mb-6 rounded-2xl bg-white/50 p-4 text-[#C62828] shadow-sm",children:[t.jsx("p",{className:"text-xs font-black uppercase tracking-widest opacity-60",children:"Rejection Reason:"}),t.jsx("p",{className:"mt-1 text-sm font-bold",children:s.disapproval_reason})]}),t.jsxs("div",{className:"grid gap-6",children:[t.jsxs("div",{className:"group relative flex flex-col items-center justify-center rounded-3xl border-2 border-dashed border-zinc-200 bg-[#FAFAFA] p-8 transition-all hover:border-[#F57C00] hover:bg-white text-center",children:[t.jsx("div",{className:"mb-4 rounded-full bg-white p-4 shadow-sm group-hover:scale-110 group-hover:text-[#F57C00] transition-all",children:t.jsx(Le,{className:"size-8 text-zinc-300"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-base font-black text-[#212121]",children:r.data.receipt?r.data.receipt.name:"Choose receipt file"}),t.jsx("p",{className:"mt-1 text-xs text-[#9E9E9E]",children:"High resolution images preferred (Max 5MB)"})]}),t.jsx("input",{id:"receipt-tracking",type:"file",className:"absolute inset-0 cursor-pointer opacity-0",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:i=>r.setData("receipt",i.target.files?.[0]??null)})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[s.receipt_url&&t.jsxs("a",{href:s.receipt_url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-xs font-bold text-[#757575] hover:text-[#F57C00] transition-colors",children:[t.jsx($e,{className:"size-4"}),"View Previously Uploaded Receipt"]}),t.jsx(je,{className:"h-14 w-full rounded-2xl bg-[#F57C00] text-base font-black text-white shadow-lg shadow-[#F57C00]/20 hover:bg-[#E65100] active:scale-[0.98] disabled:opacity-50 transition-all",disabled:r.processing||!r.data.receipt,onClick:xe,children:r.processing?"Uploading...":"Submit Receipt for Verification"}),t.jsx(Pe,{message:r.errors.receipt})]})]})]}),e[59]=r,e[60]=s.disapproval_reason,e[61]=s.receipt_status,e[62]=s.receipt_url,e[63]=me,e[64]=xe,e[65]=y):y=e[65];let E;e[66]!==k||e[67]!==y?(E=t.jsxs("div",{className:"space-y-8",children:[k,y]}),e[66]=k,e[67]=y,e[68]=E):E=e[68];let F;e[69]!==s.items.length?(F=t.jsxs("h4",{className:"mb-6 flex items-center justify-between text-sm font-black uppercase tracking-widest text-[#9E9E9E]",children:["Your Order",t.jsxs("span",{className:"rounded-full bg-[#FAFAFA] px-2 py-1 text-[10px] ring-1 ring-zinc-100",children:[s.items.length," items"]})]}),e[69]=s.items.length,e[70]=F):F=e[70];let C;e[71]!==s.items?(C=s.items.map(qe),e[71]=s.items,e[72]=C):C=e[72];let ie;e[73]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx("span",{className:"text-sm font-bold text-[#757575]",children:"Grand Total"}),e[73]=ie):ie=e[73];let z;e[74]!==s.total_amount?(z=ye(s.total_amount),e[74]=s.total_amount,e[75]=z):z=e[75];let S;e[76]!==z?(S=t.jsx("div",{className:"mt-6 border-t border-zinc-100 pt-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[ie,t.jsx("span",{className:"text-xl font-black text-[#F57C00]",children:z})]})}),e[76]=z,e[77]=S):S=e[77];let A;e[78]!==C||e[79]!==S?(A=t.jsxs("div",{className:"space-y-4",children:[C,S]}),e[78]=C,e[79]=S,e[80]=A):A=e[80];let R;e[81]!==F||e[82]!==A?(R=t.jsx("aside",{className:"space-y-6",children:t.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-lg shadow-zinc-200/50 ring-1 ring-zinc-200",children:[F,A]})}),e[81]=F,e[82]=A,e[83]=R):R=e[83];let P;e[84]!==v||e[85]!==E||e[86]!==R?(P=t.jsxs("div",{className:"grid gap-8 lg:grid-cols-[1fr_340px]",children:[v,E,R]}),e[84]=v,e[85]=E,e[86]=R,e[87]=P):P=e[87];const ge=`/orders/${s.tracking_token}/confirmation`;let ae;e[88]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(ke,{className:"mr-2 size-4"}),e[88]=ae):ae=e[88];let I;e[89]!==ge?(I=t.jsx(je,{asChild:!0,variant:"ghost",className:"h-12 rounded-xl px-8 font-bold text-[#757575] hover:bg-zinc-100",children:t.jsxs(be,{href:ge,children:[ae,"View Order Confirmation"]})}),e[89]=ge,e[90]=I):I=e[90];let le;e[91]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsxs("div",{className:"flex items-center gap-4 text-[#9E9E9E]",children:[t.jsx("div",{className:"h-[1px] w-12 bg-zinc-200"}),t.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:"Premium Cafe Experience"}),t.jsx("div",{className:"h-[1px] w-12 bg-zinc-200"})]}),e[91]=le):le=e[91];let D;e[92]!==I?(D=t.jsxs("div",{className:"mt-12 flex flex-col items-center justify-center gap-6 border-t border-zinc-100 pt-12",children:[I,le]}),e[92]=I,e[93]=D):D=e[93];let O;e[94]!==p||e[95]!==P||e[96]!==D?(O=t.jsxs("main",{className:"mx-auto max-w-4xl px-4 pt-12",children:[p,P,D]}),e[94]=p,e[95]=P,e[96]=D,e[97]=O):O=e[97];let T;e[98]!==x||e[99]!==O?(T=t.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] text-[#212121] selection:bg-[#F57C00]/20 pb-20",children:[x,O]}),e[98]=x,e[99]=O,e[100]=T):T=e[100];let ne;return e[101]!==T||e[102]!==o?(ne=t.jsxs(t.Fragment,{children:[o,T]}),e[101]=T,e[102]=o,e[103]=ne):ne=e[103],ne}function qe(a){return t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-12 w-12 shrink-0 overflow-hidden rounded-xl border border-zinc-100 bg-[#FAFAFA]",children:a.image_url?t.jsx("img",{src:a.image_url,alt:a.name??"Item",className:"h-full w-full object-cover",loading:"lazy"}):t.jsx("div",{className:"flex h-full w-full items-center justify-center bg-zinc-50 text-[8px] font-black uppercase text-zinc-300",children:"P"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"truncate text-sm font-bold text-[#212121]",children:a.name}),t.jsxs("p",{className:"text-xs font-medium text-[#757575]",children:["x",a.quantity]})]})]}),t.jsx("span",{className:"text-sm font-black text-[#212121]",children:ye(a.line_total)})]},a.id)}export{ct as default};
