import{c as se,r as ae,j as t,b as V,H as ne}from"./app-B1ifENt7.js";import{B as _}from"./badge-BxHkdwaA.js";import{b as D,B as J}from"./createLucideIcon-DBjBHpes.js";import{d as c,C as r,a as Q,b as X}from"./card-DUXOF7wf.js";import{f as ie,U as ce,A as re}from"./app-layout-BaTFaLhf.js";/* empty css            */import"./index-CFPRdl_O.js";import"./index-CmpwTNNW.js";import"./x-DG3YsQOQ.js";import"./index-BuAWgm97.js";import"./index-D62cbb27.js";import"./index-C8o9R0tm.js";import"./store-PGPmctu0.js";import"./users-ClLoEKCw.js";import"./map-pin-CMaCX4Sl.js";import"./chevron-right-BOcL-KTG.js";const le=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],me=D("CheckCheck",le);const oe=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],de=D("Flame",oe);const xe=[["path",{d:"M12 3V2",key:"ar7q03"}],["path",{d:"m15.4 17.4 3.2-2.8a2 2 0 1 1 2.8 2.9l-3.6 3.3c-.7.8-1.7 1.2-2.8 1.2h-4c-1.1 0-2.1-.4-2.8-1.2l-1.302-1.464A1 1 0 0 0 6.151 19H5",key:"n2g93r"}],["path",{d:"M2 14h12a2 2 0 0 1 0 4h-2",key:"1o2jem"}],["path",{d:"M4 10h16",key:"img6z1"}],["path",{d:"M5 10a7 7 0 0 1 14 0",key:"1ega1o"}],["path",{d:"M5 14v6a1 1 0 0 1-1 1H2",key:"1hescx"}]],pe=D("HandPlatter",xe);const he=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],fe=D("Timer",he),ge=[{title:"Waiter Board",href:"/staff/waiter-board"}];function be(a){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(a)}function Y(a){return a==="telegram"?"bg-sky-100 text-sky-700":a==="table"?"bg-orange-100 text-orange-700":"bg-zinc-100 text-zinc-700"}function ue(a){return a==="prepared"?"bg-emerald-100 text-emerald-700":a==="preparing"?"bg-indigo-100 text-indigo-700":"bg-amber-100 text-amber-700"}function Pe(a){const e=se.c(58),{screens:v,selectedScreenId:w,pendingConfirmationOrders:S,awaitingKitchenOrders:C,readyToServeOrders:B,servedOrders:$,summary:n}=a,[O,T]=ae.useState(null),Z=ke;let F;e[0]===Symbol.for("react.memo_cache_sentinel")?(F=s=>{T(s),V.patch(`/staff/waiter-board/orders/${s}/confirm`,{},{preserveScroll:!0,onFinish:()=>T(i=>i===s?null:i)})},e[0]=F):F=e[0];const ee=F;let M;e[1]===Symbol.for("react.memo_cache_sentinel")?(M=s=>{T(s),V.patch(`/staff/waiter-board/orders/${s}/serve`,{},{preserveScroll:!0,onFinish:()=>T(i=>i===s?null:i)})},e[1]=M):M=e[1];const te=M;let A;e[2]!==O?(A=(s,i)=>t.jsx(c,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:t.jsxs(r,{className:"space-y-4 p-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-black text-zinc-900",children:["#",s.id," ",s.customer_name??"Guest"]}),t.jsxs("p",{className:"text-xs font-medium text-zinc-500",children:[s.customer_phone??"No phone",s.table_name?` • Table ${s.table_name}`:""]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_,{className:Y(s.source_channel),children:s.source_channel}),t.jsx(_,{className:"bg-zinc-100 text-zinc-700",children:be(s.total_amount)})]})]}),t.jsxs("div",{className:"rounded-xl bg-zinc-50 p-3 ring-1 ring-zinc-100",children:[t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Items"}),t.jsx("p",{className:"mt-1 text-sm font-medium text-zinc-700",children:s.items.map(ye).join(" • ")})]}),s.kitchen_progress.total>0?t.jsxs("div",{className:"space-y-2 rounded-xl bg-zinc-50 p-3 ring-1 ring-zinc-100",children:[t.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:["Kitchen Progress ",s.kitchen_progress.prepared,"/",s.kitchen_progress.total]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:s.kitchen_screens.map(je)})]}):t.jsx("div",{className:"rounded-xl bg-emerald-50 p-3 text-xs font-bold text-emerald-700 ring-1 ring-emerald-100",children:"No kitchen routing needed. Ready for serving."}),i?t.jsx(J,{type:"button",className:`h-10 w-full rounded-xl font-black ${i.className??"bg-[#F57C00] hover:bg-[#E65100]"}`,disabled:O===s.id,onClick:()=>i.onClick(s.id),children:O===s.id?"Processing...":i.label}):null]})},s.id),e[2]=O,e[3]=A):A=e[3];const l=A;let E;e[4]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(ne,{title:"Waiter Board"}),e[4]=E):E=e[4];let H;e[5]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(Q,{className:"border-b border-zinc-100",children:t.jsxs(X,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-900",children:[t.jsx(ie,{className:"size-4 text-[#F57C00]"}),"Waiter Screens"]})}),e[5]=H):H=e[5];let m;e[6]!==v||e[7]!==w?(m=t.jsxs(c,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[H,t.jsx(r,{className:"pt-4",children:v.length===0?t.jsx("p",{className:"text-sm font-medium text-zinc-500",children:"No waiter screen assigned to your account yet."}):t.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(s=>t.jsxs(J,{type:"button",size:"sm",variant:w===s.id?"default":"outline",className:w===s.id?"bg-[#F57C00] hover:bg-[#E65100]":"",onClick:()=>Z(s.id),children:[s.name," (",s.pickup_location_name,")"]},s.id))})})]}),e[6]=v,e[7]=w,e[8]=m):m=e[8];let R;e[9]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Pending Confirmation"}),e[9]=R):R=e[9];let o;e[10]!==n.pending_confirmation?(o=t.jsx(c,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:t.jsxs(r,{className:"pt-5",children:[R,t.jsx("p",{className:"mt-2 text-3xl font-black text-zinc-900",children:n.pending_confirmation})]})}),e[10]=n.pending_confirmation,e[11]=o):o=e[11];let P;e[12]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Awaiting Kitchen"}),e[12]=P):P=e[12];let d;e[13]!==n.awaiting_kitchen?(d=t.jsx(c,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:t.jsxs(r,{className:"pt-5",children:[P,t.jsx("p",{className:"mt-2 text-3xl font-black text-zinc-900",children:n.awaiting_kitchen})]})}),e[13]=n.awaiting_kitchen,e[14]=d):d=e[14];let q;e[15]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Ready To Serve"}),e[15]=q):q=e[15];let x;e[16]!==n.ready_to_serve?(x=t.jsx(c,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:t.jsxs(r,{className:"pt-5",children:[q,t.jsx("p",{className:"mt-2 text-3xl font-black text-zinc-900",children:n.ready_to_serve})]})}),e[16]=n.ready_to_serve,e[17]=x):x=e[17];let K;e[18]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Served (Recent)"}),e[18]=K):K=e[18];let p;e[19]!==n.served?(p=t.jsx(c,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:t.jsxs(r,{className:"pt-5",children:[K,t.jsx("p",{className:"mt-2 text-3xl font-black text-zinc-900",children:n.served})]})}),e[19]=n.served,e[20]=p):p=e[20];let h;e[21]!==d||e[22]!==x||e[23]!==p||e[24]!==o?(h=t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[o,d,x,p]}),e[21]=d,e[22]=x,e[23]=p,e[24]=o,e[25]=h):h=e[25];let W;e[26]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsxs("h2",{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-900",children:[t.jsx(pe,{className:"size-4 text-amber-500"}),"Confirm Orders"]}),e[26]=W):W=e[26];let f;e[27]!==S||e[28]!==l?(f=S.length===0?t.jsx(c,{className:"border-dashed border-zinc-300",children:t.jsx(r,{className:"py-8 text-center text-sm font-medium text-zinc-500",children:"No pending confirmation orders."})}):S.map(s=>l(s,{label:"Confirm And Send",onClick:ee})),e[27]=S,e[28]=l,e[29]=f):f=e[29];let g;e[30]!==f?(g=t.jsxs("section",{className:"space-y-3",children:[W,f]}),e[30]=f,e[31]=g):g=e[31];let I;e[32]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsxs("h2",{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-900",children:[t.jsx(fe,{className:"size-4 text-indigo-500"}),"Waiting Kitchen"]}),e[32]=I):I=e[32];let b;e[33]!==C||e[34]!==l?(b=C.length===0?t.jsx(c,{className:"border-dashed border-zinc-300",children:t.jsx(r,{className:"py-8 text-center text-sm font-medium text-zinc-500",children:"No confirmed orders waiting on kitchen."})}):C.map(s=>l(s)),e[33]=C,e[34]=l,e[35]=b):b=e[35];let u;e[36]!==b?(u=t.jsxs("section",{className:"space-y-3",children:[I,b]}),e[36]=b,e[37]=u):u=e[37];let L;e[38]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsxs("h2",{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-900",children:[t.jsx(me,{className:"size-4 text-emerald-500"}),"Ready To Serve"]}),e[38]=L):L=e[38];let N;e[39]!==B||e[40]!==l?(N=B.length===0?t.jsx(c,{className:"border-dashed border-zinc-300",children:t.jsx(r,{className:"py-8 text-center text-sm font-medium text-zinc-500",children:"No orders ready to serve."})}):B.map(s=>l(s,{label:"Mark As Served",onClick:te,className:"bg-emerald-600 hover:bg-emerald-700"})),e[39]=B,e[40]=l,e[41]=N):N=e[41];let j;e[42]!==N?(j=t.jsxs("section",{className:"space-y-3",children:[L,N]}),e[42]=N,e[43]=j):j=e[43];let y;e[44]!==g||e[45]!==u||e[46]!==j?(y=t.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[g,u,j]}),e[44]=g,e[45]=u,e[46]=j,e[47]=y):y=e[47];let G;e[48]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(Q,{className:"border-b border-zinc-100",children:t.jsxs(X,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-900",children:[t.jsx(ce,{className:"size-4 text-zinc-500"}),"Recently Served"]})}),e[48]=G):G=e[48];let k;e[49]!==$?(k=$.length===0?t.jsx("p",{className:"text-sm font-medium text-zinc-500",children:"No served orders yet."}):$.map(Ne),e[49]=$,e[50]=k):k=e[50];let z;e[51]!==k?(z=t.jsxs(c,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[G,t.jsx(r,{className:"space-y-2 pt-4",children:k})]}),e[51]=k,e[52]=z):z=e[52];let U;return e[53]!==h||e[54]!==y||e[55]!==z||e[56]!==m?(U=t.jsxs(re,{breadcrumbs:ge,children:[E,t.jsxs("div",{className:"min-h-screen space-y-6 bg-zinc-50/60 p-6",children:[m,h,y,z]})]}),e[53]=h,e[54]=y,e[55]=z,e[56]=m,e[57]=U):U=e[57],U}function Ne(a){return t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-xl bg-zinc-50 px-3 py-2 ring-1 ring-zinc-100",children:[t.jsxs("p",{className:"text-sm font-bold text-zinc-800",children:["#",a.id," ",a.customer_name??"Guest",a.table_name?` • Table ${a.table_name}`:""]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_,{className:Y(a.source_channel),children:a.source_channel}),t.jsxs(_,{className:"bg-emerald-100 text-emerald-700",children:[t.jsx(de,{className:"mr-1 size-3"}),"Served"]})]})]},a.id)}function je(a){return t.jsxs(_,{className:ue(a.status),children:[a.name??"Kitchen",": ",a.status]},a.id)}function ye(a){return`${a.name??"Item"} x${a.quantity}`}function ke(a){V.get("/staff/waiter-board",{screen_id:a},{preserveState:!0,replace:!0})}export{Pe as default};
