import{c as Pe,r as De,a as ve,j as s,b as U,H as Fe,L as Ee}from"./app-B1ifENt7.js";import{I as j}from"./input-error-idKhxiu_.js";import{B as ye}from"./badge-BxHkdwaA.js";import{b as Ae,B as g}from"./createLucideIcon-DBjBHpes.js";import{d as x,C as p,a as M,b as O}from"./card-DUXOF7wf.js";import{I as h}from"./input-ZZWHhI5M.js";import{L as m}from"./label-CvzI8C74.js";import{A as Ie}from"./app-layout-BaTFaLhf.js";import{C as Te}from"./cake-slice-BbBMVFzm.js";import{S as Le}from"./search-DbtaBeGd.js";import{I as Be}from"./image-plus-deTB6hLW.js";import{P as Re}from"./pen-line-Lw7DBwrD.js";import{T as qe}from"./trash-2-Bjq0893t.js";import{C as $e}from"./clock-3-DkC5Zolb.js";/* empty css            */import"./index-D62cbb27.js";import"./index-CFPRdl_O.js";import"./index-CmpwTNNW.js";import"./x-DG3YsQOQ.js";import"./index-BuAWgm97.js";import"./index-C8o9R0tm.js";import"./store-PGPmctu0.js";import"./users-ClLoEKCw.js";import"./map-pin-CMaCX4Sl.js";import"./chevron-right-BOcL-KTG.js";const He=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],Me=Ae("PackageCheck",He),Oe=[{title:"Cake Preorders",href:"/staff/cake-preorders"}];function ke(a){return new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",maximumFractionDigits:2}).format(a)}function ks(a){const e=Pe.c(103),{packages:xe,preorders:d,filters:ze,statusOptions:f,canManagePackages:o,canUpdateRequests:$,summary:n}=a,[u,pe]=De.useState(null),he=ze.search??"",ge=ze.status??"";let V;e[0]!==he||e[1]!==ge?(V={search:he,status:ge},e[0]=he,e[1]=ge,e[2]=V):V=e[2];const l=ve(V);let G;e[3]===Symbol.for("react.memo_cache_sentinel")?(G={name:"",description:"",image:null,price:"",is_active:!0},e[3]=G):G=e[3];const c=ve(G);let J;e[4]===Symbol.for("react.memo_cache_sentinel")?(J={_method:"put",name:"",description:"",image:null,price:"",is_active:!0},e[4]=J):J=e[4];const r=ve(J);let K;e[5]!==l.data?(K=t=>{t.preventDefault(),U.get("/staff/cake-preorders",l.data,{preserveState:!0,replace:!0})},e[5]=l.data,e[6]=K):K=e[6];const fe=K;let Q;e[7]!==c?(Q=t=>{t.preventDefault(),c.post("/staff/cake-packages",{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{c.reset(),c.setData("is_active",!0)}})},e[7]=c,e[8]=Q):Q=e[8];const ue=Q;let W;e[9]!==r?(W=t=>{pe(t),r.setData({_method:"put",name:t.name,description:t.description??"",image:null,price:String(t.price),is_active:t.is_active})},e[9]=r,e[10]=W):W=e[10];const H=W;let X;e[11]!==r||e[12]!==u?(X=t=>{t.preventDefault(),u&&r.post(`/staff/cake-packages/${u.id}`,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{pe(null)}})},e[11]=r,e[12]=u,e[13]=X):X=e[13];const je=X,_e=We,we=Qe;let Y;e[14]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(Fe,{title:"Cake Preorders"}),e[14]=Y):Y=e[14];let Z;e[15]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Cake Packages"}),e[15]=Z):Z=e[15];let b;e[16]!==n.total_packages?(b=s.jsx(x,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(p,{className:"pt-6",children:[Z,s.jsx("h3",{className:"mt-2 text-2xl font-black text-zinc-900",children:n.total_packages})]})}),e[16]=n.total_packages,e[17]=b):b=e[17];let ee;e[18]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Active Packages"}),e[18]=ee):ee=e[18];let N;e[19]!==n.active_packages?(N=s.jsx(x,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(p,{className:"pt-6",children:[ee,s.jsx("h3",{className:"mt-2 text-2xl font-black text-zinc-900",children:n.active_packages})]})}),e[19]=n.active_packages,e[20]=N):N=e[20];let se;e[21]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Total Preorders"}),e[21]=se):se=e[21];let v;e[22]!==n.total_preorders?(v=s.jsx(x,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(p,{className:"pt-6",children:[se,s.jsx("h3",{className:"mt-2 text-2xl font-black text-zinc-900",children:n.total_preorders})]})}),e[22]=n.total_preorders,e[23]=v):v=e[23];let te;e[24]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-zinc-500",children:"Pending"}),e[24]=te):te=e[24];let k;e[25]!==n.pending_preorders?(k=s.jsx(x,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:s.jsxs(p,{className:"pt-6",children:[te,s.jsx("h3",{className:"mt-2 text-2xl font-black text-zinc-900",children:n.pending_preorders})]})}),e[25]=n.pending_preorders,e[26]=k):k=e[26];let z;e[27]!==b||e[28]!==N||e[29]!==v||e[30]!==k?(z=s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[b,N,v,k]}),e[27]=b,e[28]=N,e[29]=v,e[30]=k,e[31]=z):z=e[31];let ae;e[32]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx(M,{children:s.jsx(O,{className:"text-sm font-black uppercase tracking-widest text-zinc-700",children:"Search Preorders"})}),e[32]=ae):ae=e[32];let ie;e[33]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(m,{htmlFor:"search",children:"Search"}),e[33]=ie):ie=e[33];let y;e[34]!==l?(y=t=>l.setData("search",t.target.value),e[34]=l,e[35]=y):y=e[35];let _;e[36]!==l.data.search||e[37]!==y?(_=s.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[ie,s.jsx(h,{id:"search",value:l.data.search,onChange:y,placeholder:"Order ID, customer, phone, package"})]}),e[36]=l.data.search,e[37]=y,e[38]=_):_=e[38];let re;e[39]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(m,{htmlFor:"status",children:"Status"}),e[39]=re):re=e[39];const Ce=l.data.status;let w;e[40]!==l?(w=t=>l.setData("status",t.target.value),e[40]=l,e[41]=w):w=e[41];let ce;e[42]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx("option",{value:"",children:"All"}),e[42]=ce):ce=e[42];let C;e[43]!==f?(C=f.map(Ke),e[43]=f,e[44]=C):C=e[44];let S;e[45]!==l.data.status||e[46]!==w||e[47]!==C?(S=s.jsxs("div",{className:"grid gap-2",children:[re,s.jsxs("select",{id:"status",value:Ce,onChange:w,className:"h-10 rounded-xl border border-zinc-200 bg-white px-3 text-sm",children:[ce,C]})]}),e[45]=l.data.status,e[46]=w,e[47]=C,e[48]=S):S=e[48];let le;e[49]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsxs(g,{type:"submit",className:"h-10 flex-1 rounded-xl bg-[#F57C00] text-white hover:bg-[#E65100]",children:[s.jsx(Le,{className:"mr-2 size-4"}),"Apply"]}),s.jsx(g,{type:"button",variant:"outline",className:"h-10 rounded-xl",onClick:Je,children:"Clear"})]}),e[49]=le):le=e[49];let P;e[50]!==fe||e[51]!==_||e[52]!==S?(P=s.jsxs(x,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[ae,s.jsx(p,{children:s.jsxs("form",{className:"grid gap-4 md:grid-cols-4",onSubmit:fe,children:[_,S,le]})})]}),e[50]=fe,e[51]=_,e[52]=S,e[53]=P):P=e[53];let D;e[54]!==o||e[55]!==ue||e[56]!==c?(D=o&&s.jsxs(x,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[s.jsx(M,{children:s.jsxs(O,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-700",children:[s.jsx(Te,{className:"size-4 text-[#F57C00]"}),"Create Cake Package"]})}),s.jsx(p,{children:s.jsxs("form",{className:"grid gap-4 md:grid-cols-5",onSubmit:ue,children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"new-name",children:"Name"}),s.jsx(h,{id:"new-name",value:c.data.name,onChange:t=>c.setData("name",t.target.value)}),s.jsx(j,{message:c.errors.name})]}),s.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[s.jsx(m,{htmlFor:"new-description",children:"Description"}),s.jsx(h,{id:"new-description",value:c.data.description,onChange:t=>c.setData("description",t.target.value)}),s.jsx(j,{message:c.errors.description})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"new-image",children:"Image"}),s.jsx(h,{id:"new-image",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",className:"h-10",onChange:t=>c.setData("image",t.target.files?.[0]??null)}),s.jsx(j,{message:c.errors.image})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"new-price",children:"Price (ETB)"}),s.jsx(h,{id:"new-price",type:"number",min:"0",step:"0.01",value:c.data.price,onChange:t=>c.setData("price",t.target.value)}),s.jsx(j,{message:c.errors.price})]}),s.jsxs("div",{className:"md:col-span-5 flex items-center justify-between rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-3",children:[s.jsxs("label",{className:"text-sm font-semibold text-zinc-700",children:[s.jsx("input",{type:"checkbox",className:"mr-2",checked:c.data.is_active,onChange:t=>c.setData("is_active",t.target.checked)}),"Active package"]}),s.jsx(g,{type:"submit",className:"rounded-xl bg-[#F57C00] text-white hover:bg-[#E65100]",disabled:c.processing,children:"Add Package"})]})]})})]}),e[54]=o,e[55]=ue,e[56]=c,e[57]=D):D=e[57];let F;e[58]!==o||e[59]!==r||e[60]!==u||e[61]!==je?(F=u&&o&&s.jsxs(x,{className:"border-none shadow-sm ring-2 ring-[#212121]",children:[s.jsx(M,{children:s.jsxs(O,{className:"text-sm font-black uppercase tracking-widest text-zinc-700",children:["Edit Package: ",u.name]})}),s.jsx(p,{children:s.jsxs("form",{className:"grid gap-4 md:grid-cols-5",onSubmit:je,children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit-name",children:"Name"}),s.jsx(h,{id:"edit-name",value:r.data.name,onChange:t=>r.setData("name",t.target.value)}),s.jsx(j,{message:r.errors.name})]}),s.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[s.jsx(m,{htmlFor:"edit-description",children:"Description"}),s.jsx(h,{id:"edit-description",value:r.data.description,onChange:t=>r.setData("description",t.target.value)}),s.jsx(j,{message:r.errors.description})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit-image",children:"Replacement Image"}),s.jsx(h,{id:"edit-image",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",className:"h-10",onChange:t=>r.setData("image",t.target.files?.[0]??null)}),s.jsx(j,{message:r.errors.image})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"edit-price",children:"Price (ETB)"}),s.jsx(h,{id:"edit-price",type:"number",min:"0",step:"0.01",value:r.data.price,onChange:t=>r.setData("price",t.target.value)}),s.jsx(j,{message:r.errors.price})]}),s.jsxs("div",{className:"md:col-span-5 flex items-center justify-between rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-3",children:[s.jsxs("label",{className:"text-sm font-semibold text-zinc-700",children:[s.jsx("input",{type:"checkbox",className:"mr-2",checked:r.data.is_active,onChange:t=>r.setData("is_active",t.target.checked)}),"Active package"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(g,{type:"button",variant:"outline",className:"rounded-xl",onClick:()=>pe(null),children:"Cancel"}),s.jsx(g,{type:"submit",className:"rounded-xl bg-[#212121] text-white hover:bg-black",disabled:r.processing,children:"Save Changes"})]})]})]})})]}),e[58]=o,e[59]=r,e[60]=u,e[61]=je,e[62]=F):F=e[62];let ne;e[63]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(M,{children:s.jsx(O,{className:"flex items-center justify-between text-sm font-black uppercase tracking-widest text-zinc-700",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Me,{className:"size-4 text-[#F57C00]"})," Cake Packages"]})})}),e[63]=ne):ne=e[63];let E;if(e[64]!==o||e[65]!==xe||e[66]!==H){let t;e[68]!==o||e[69]!==H?(t=i=>s.jsxs("article",{className:"overflow-hidden rounded-2xl border border-zinc-200 bg-white",children:[s.jsx("div",{className:"aspect-[16/10] overflow-hidden bg-zinc-100",children:i.image_url?s.jsx("img",{src:i.image_url,alt:i.name,className:"h-full w-full object-cover",loading:"lazy"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center text-zinc-400",children:s.jsx(Be,{className:"size-8"})})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-base font-black text-zinc-900",children:i.name}),i.description&&s.jsx("p",{className:"mt-1 text-sm text-zinc-600",children:i.description}),s.jsxs("p",{className:"mt-2 text-sm font-semibold text-zinc-500",children:["Used in ",i.preorder_items_count," preorder items"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ye,{variant:"outline",className:i.is_active?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-zinc-200 bg-zinc-100 text-zinc-600",children:i.is_active?"Active":"Inactive"}),s.jsx("span",{className:"text-sm font-black text-zinc-900",children:ke(i.price)})]})]}),o&&s.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[s.jsxs(g,{type:"button",variant:"outline",className:"h-9 rounded-xl",onClick:()=>H(i),children:[s.jsx(Re,{className:"mr-2 size-4"}),"Edit"]}),s.jsxs(g,{type:"button",variant:"outline",className:"h-9 rounded-xl border-red-200 text-red-600 hover:bg-red-50",onClick:()=>_e(i),children:[s.jsx(qe,{className:"mr-2 size-4"}),"Delete"]})]})]})]},i.id),e[68]=o,e[69]=H,e[70]=t):t=e[70],E=xe.map(t),e[64]=o,e[65]=xe,e[66]=H,e[67]=E}else E=e[67];let A;e[71]!==E?(A=s.jsxs(x,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[ne,s.jsx(p,{children:s.jsx("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:E})})]}),e[71]=E,e[72]=A):A=e[72];let de;e[73]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(M,{children:s.jsxs(O,{className:"flex items-center gap-2 text-sm font-black uppercase tracking-widest text-zinc-700",children:[s.jsx($e,{className:"size-4 text-[#F57C00]"}),"Cake Preorder Requests"]})}),e[73]=de):de=e[73];let I;if(e[74]!==$||e[75]!==d.data||e[76]!==f){let t;e[78]!==$||e[79]!==f?(t=i=>s.jsxs("article",{className:"rounded-2xl border border-zinc-200 p-4",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-black text-zinc-900",children:["Preorder #",i.id]}),s.jsxs("p",{className:"mt-1 text-sm text-zinc-600",children:[i.customer_name," - ",i.customer_phone]}),s.jsxs("p",{className:"mt-1 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:["Needed: ",i.needed_date??"N/A"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-black text-zinc-900",children:ke(i.total_amount)}),s.jsx(ye,{variant:"outline",className:"mt-1 border-zinc-200 bg-zinc-100 text-zinc-700",children:i.status})]})]}),i.special_instructions&&s.jsx("p",{className:"mt-3 rounded-xl bg-zinc-50 p-3 text-sm text-zinc-700",children:i.special_instructions}),s.jsx("div",{className:"mt-3 space-y-2 rounded-xl border border-zinc-200 bg-white p-3",children:i.items.map(Ge)}),$&&s.jsx("div",{className:"mt-3 flex flex-wrap items-center justify-end gap-2",children:s.jsx("select",{defaultValue:i.status,className:"h-9 rounded-xl border border-zinc-200 bg-white px-3 text-sm",onChange:Se=>we(i.id,Se.target.value),children:f.map(Ve)})})]},i.id),e[78]=$,e[79]=f,e[80]=t):t=e[80],I=d.data.map(t),e[74]=$,e[75]=d.data,e[76]=f,e[77]=I}else I=e[77];const be=d.from??0,Ne=d.to??0;let T;e[81]!==d.total||e[82]!==be||e[83]!==Ne?(T=s.jsxs("p",{className:"text-sm text-zinc-600",children:["Showing ",be,"-",Ne," of ",d.total]}),e[81]=d.total,e[82]=be,e[83]=Ne,e[84]=T):T=e[84];let L;e[85]!==d.links?(L=d.links.map(Ue),e[85]=d.links,e[86]=L):L=e[86];let B;e[87]!==L?(B=s.jsx("div",{className:"flex flex-wrap gap-2",children:L}),e[87]=L,e[88]=B):B=e[88];let R;e[89]!==T||e[90]!==B?(R=s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 border-t border-zinc-200 pt-4",children:[T,B]}),e[89]=T,e[90]=B,e[91]=R):R=e[91];let q;e[92]!==I||e[93]!==R?(q=s.jsxs(x,{className:"border-none shadow-sm ring-1 ring-zinc-200",children:[de,s.jsxs(p,{className:"space-y-4",children:[I,R]})]}),e[92]=I,e[93]=R,e[94]=q):q=e[94];let oe;e[95]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx("div",{className:"flex justify-end",children:s.jsx(g,{asChild:!0,variant:"outline",className:"rounded-xl border-zinc-200",children:s.jsx(Ee,{href:"/staff/catering-requests",children:"Go to Catering Requests"})})}),e[95]=oe):oe=e[95];let me;return e[96]!==z||e[97]!==P||e[98]!==D||e[99]!==F||e[100]!==A||e[101]!==q?(me=s.jsxs(Ie,{breadcrumbs:Oe,children:[Y,s.jsxs("div",{className:"space-y-6 bg-zinc-50/50 p-6",children:[z,P,D,F,A,q,oe]})]}),e[96]=z,e[97]=P,e[98]=D,e[99]=F,e[100]=A,e[101]=q,e[102]=me):me=e[102],me}function Ue(a){return s.jsx(g,{type:"button",variant:a.active?"default":"outline",className:"h-8 rounded-lg px-3",disabled:!a.url,onClick:()=>{a.url&&U.visit(a.url,{preserveScroll:!0,preserveState:!0})},children:s.jsx("span",{dangerouslySetInnerHTML:{__html:a.label}})},a.label)}function Ve(a){return s.jsx("option",{value:a,children:a},a)}function Ge(a){return s.jsxs("div",{className:"rounded-lg bg-zinc-50 p-3 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-semibold text-zinc-800",children:[a.package_name??"Package"," x ",a.quantity]}),s.jsx("span",{className:"font-black text-zinc-900",children:ke(a.line_total)})]}),s.jsxs("p",{className:"mt-1 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:["Size: ",a.size??"N/A"," | Servings: ",a.servings??"N/A"]}),a.specification&&s.jsx("p",{className:"mt-1 text-zinc-600",children:a.specification})]},a.id)}function Je(){return U.get("/staff/cake-preorders")}function Ke(a){return s.jsx("option",{value:a,children:a},a)}function Qe(a,e){U.patch(`/staff/cake-preorders/${a}/status`,{status:e},{preserveScroll:!0})}function We(a){window.confirm(`Delete or deactivate "${a.name}"?`)&&U.delete(`/staff/cake-packages/${a.id}`,{preserveScroll:!0})}export{ks as default};
